<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>CVT_Model_2025.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title>CVT Model 2025</title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/index-C1SHFMCp.js"></script>
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.16.3/dist/assets/index-C0iXCvyY.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "CVT_Model_2025.py",
            "mode": "read",
            "version": "0.16.3",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "display": {"cell_output": "above", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "medium", "reference_highlighting": true, "theme": "light"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": true}}, "package_management": {"manager": "pip"}, "runtime": {"auto_instantiate": true, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"sql_output": "auto", "width": "medium"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "# Initialization code that runs before all other cells\nimport numpy as np\nimport plotly.graph_objs as go\nfrom matplotlib import pyplot as plt\nfrom numpy import pi as pi\nfrom numpy import tan as tan\n\nfrom CVT_Parts_2025 import FW, PS, SS, Helix, SPT, FW_names, PS_names, SPT_names\n\nfrom CVT_Plotting_2025 import plot_torque_transfer, plot_error, plot_radial_force, plot_cvt_error_convergence", "code_hash": "7cee2b9f52777d7fce83aa9acc208a26", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "setup", "name": "setup"}, {"code": "import marimo as mo", "code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hbol", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\n# CVT Model Simulation\n### Interactive Simulation with Sliders\n#### JL (Hannes) Pretorius - (2025)\n- Simulates CVT performance for given parameters\n- Includes sliders for interactive parameter adjustment\n- Plots Engine RPM vs. Vehicle Speed, Radial Forces, and Errors\n\"\"\"\n)", "code_hash": "45b8159d444f3ca6393a789f77c10201", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "MJUe", "name": "_"}, {"code": "q_slider = mo.ui.slider(start=0, stop=8, step=1, value=7,)\nw_slider = mo.ui.slider(start=0, stop=6, step=1, value=3,)\ne_slider = mo.ui.slider(start=0, stop=9, step=1, value=8,)\nr_slider = mo.ui.slider(start=0, stop=4, step=1, value=0,)\nt_slider = mo.ui.slider(start=0, stop=2, step=1, value=0,)\ngoal_slider = mo.ui.slider(start=3000, stop=3800, step=50, value=3600)\nshim_slider = mo.ui.slider(start=0, stop=15, step=1, value=0)", "code_hash": "4d43024096cb628a96b99eceb4dc3895", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "vblA", "name": "_"}, {"code": "# General CVT parameters for plotting\nGR = 11.3\nCVTH = 0.75\nCVTL = 3.8\nTRL = GR * CVTL\nTRH = GR * CVTH\nErpmMax = 3700\nErpmMin = 1800\nWdia = 23 * 0.0254\nWcirc = 1.74\nVsmax = ErpmMax / TRH / 60 * Wcirc * 3.6\nVsmin = ErpmMax / TRL / 60 * Wcirc * 3.6\n\n# Run simulation\nresult = cvt_simulation(\n    q=q_slider.value,\n    w=w_slider.value,\n    e=e_slider.value,\n    r=r_slider.value,\n    t=t_slider.value,\n    goal=goal_slider.value,\n    shim=shim_slider.value,\n)\n\nq=q_slider.value\nw=w_slider.value\ne=e_slider.value\nr=r_slider.value\nt=t_slider.value\nshim=shim_slider.value\n\n# Part names\nFWn = FW_names()\nPSn = PS_names()\nSSn = np.array([\"Red\", \"Black\", \"Silver\"])\nSPTn = SPT_names()\n\nrpm_idle_max = result['Idle_rpm']\nrpm_eng = result['Engage_rpm']\nrpm_clu = result['Clutch_rpm']\nengine_rpms = result['engine_rpms']\nveh_speed = result['veh_speed']", "code_hash": "771e851a74b79a2ebeecd40cc31042f1", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "bkHC", "name": "_"}, {"code": "mo.vstack([\n    mo.md(f\"**Goal RPM**: {goal_slider.value} {goal_slider}\"),\n    mo.hstack([\n        mo.md(f\"**Flyweights**: {q_slider.value} {q_slider}\"),\n        mo.md(f\"**Primary Spring**: {w_slider.value} {w_slider}\"),\n\n        mo.md(f\"**Shim**: {shim_slider.value} mm {shim_slider}\")\n    ], justify=\"start\"),\n    mo.hstack([\n        mo.md(f\"**Ramp Angle**: {e_slider.value} {e_slider}\"),\n        mo.md(f\"**Pretension**: {r_slider.value} {r_slider}\"),\n        mo.md(f\"**Secondary Spring**: {t_slider.value} {t_slider}\"),\n\n    ], justify=\"start\")\n])", "code_hash": "e60335169ec0423f36ecfcdc84b1fa78", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "lEQa", "name": "_"}, {"code": "# Display plots and simulation results\ninfo = True\nvert = True\n# Generate plots\nplots = plot_simulation(\n    result,\n    q=q_slider.value,\n    w=w_slider.value,\n    e=e_slider.value,\n    r=r_slider.value,\n    t=t_slider.value,\n    shim=shim_slider.value,\n    goal=goal_slider.value,\n    Vsmin=Vsmin,\n    Vsmax=Vsmax,\n    ErpmMax=ErpmMax,\n    ErpmMin=ErpmMin\n)\n\nif info == True & vert == False:\n    mo.output.append(\n        mo.vstack([\n            mo.hstack([\n                mo.ui.plotly(plots['main_plot']),\n                mo.md(\n                   f\"\"\"      \n                   **CVT Setup:** {[q,w,e,r,t]} - {shim:.0f}\\n\n                   **Flyweight [{q}]:** {FWn[q]}\\n\n                   **Spring 1 [{w}]:** {PSn[w]}\\n\n                   **Shim:** {shim:.0f}mm\\n\n                   **Ramp Angle [{e}]:** {e*2 +32}\\n\n                   **Pretension [{r}]:** {SPTn[r]}\\n\n                   **Spring 2 [{t}]:** {SSn[t]}\\n\n                   \\n\n\n                   **Useful Output Parameters:** \\n\n                    - Max Idle: {rpm_idle_max:.0f} rpm \\n\n                    - Engagement: {rpm_eng:.0f} rpm\\n\n                    - Low Gear: {rpm_clu:.0f} rpm\\n\n                    - Ave. Shift: {np.average(engine_rpms[4:]):.0f} rpm\\n\n                    - Shift Bandwidth : {np.max(engine_rpms[4:])-np.min(engine_rpms[4:]):.0f} rpm\\n\n                    - Max. Speed: {veh_speed[-1]:.0f}km/h\n                    \"\"\"),\n\n\n               ],widths=[4,1])]))\nif info == True & vert == True:\n    mo.output.append(\n        mo.vstack([\n            mo.ui.plotly(plots['main_plot']),\n            mo.hstack([\n                mo.md(\n                   f\"\"\"\n                   **Primary Parts:**\\n\n                   **CVT Setup:** {[q,w,e,r,t]} - {shim:.0f}\\n\n                   **Flyweight [{q}]:** {FWn[q]}\\n\n                   **Spring 1 [{w}]:** {PSn[w]}\\n\n                   **Shim:** {shim:.0f}mm\\n\n                    \"\"\"),\n                mo.md(\n                    f\"\"\"\n                    **Secondary Parts**\\n\n                    **Ramp Angle [{e}]:** {e*2 +32}\\n\n                    **Pretension [{r}]:** {SPTn[r]}\\n\n                    **Spring 2 [{t}]:** {SSn[t]}\\n\n                    \"\"\"\n                ),\n                mo.md(\n                    f\"\"\"\n                    **Useful Output Parameters:** \\n\n                    - Max Idle: {rpm_idle_max:.0f} rpm \\n\n                    - Engagement: {rpm_eng:.0f} rpm\\n\n                    - Low Gear: {rpm_clu:.0f} rpm\\n\n                    - Ave. Shift: {np.average(engine_rpms[4:]):.0f} rpm\\n\n                    - Shift Bandwidth : {np.max(engine_rpms[4:])-np.min(engine_rpms[4:]):.0f} rpm\\n\n                    - Max. Speed: {veh_speed[-1]:.0f}km/h\"\"\"\n                )\n\n               ],widths=[1,1,1])]))\n\nif info == False:\n    mo.output.append( \n        mo.vstack([mo.ui.plotly(plots['main_plot'])]))", "code_hash": "3796a4437b23f1933c5e8f1a4c244807", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "PKri", "name": "_"}, {"code": "plot_radial_force(result, q, w, e, r, t, shim)", "code_hash": "94d25cc1147dca36e1b85a7f1f553fa3", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Xref", "name": "_"}, {"code": "plot_torque_transfer(result, q, w, e, r, t, shim)", "code_hash": "d0b87b2679825395d716ac6503006d2d", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "SFPL", "name": "_"}, {"code": "plot_error(result, q, w, e, r, t,shim)", "code_hash": "b0620cabcd8ee3bee9350ba2ffe7cecb", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "BYtC", "name": "_"}, {"code": "plot_cvt_error_convergence(result)", "code_hash": "b94184398f25dd624c471263d41240ec", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "RGSE", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\n# Mathematical Model\nThe function below defines al the different stages the shifting curve and calculate all the applicable parameters for plotting or further calculations\n\"\"\"\n)", "code_hash": "83fb98bf14d95b9120502a3d1f6be5db", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Kclp", "name": "_"}, {"code": "def cvt_simulation(q=7, w=3, e=8, r=1, t=1, goal=3400, shim=0, no_T2=False):\n    \"\"\"\n    Simulate CVT based on parameters.\n\n    Parameters:\n    q: Flyweights index (0-8)\n    w: Primary spring index (0-6)\n    e: Ramp angle index (0-9)\n    r: Secondary pretension index (0-4)\n    t: Secondary spring index (0-2)\n    goal: Peak power RPM\n    shim: Spring shim displacement\n    \"\"\"\n    # Initialize part parameters\n    FWs = FW()\n    PSs = PS()\n    SSs = SS()\n    Ramps = Helix()\n    SPTs = SPT()\n\n    # Belt parameters\n    L = 1.0414\n    M = 0.365\n    m_prime = M / L\n    beta = np.radians(12)\n\n    # General CVT parameters\n    cf = 0.625  # Effective Coeff. of Friction\n    GR = 11.3  # Gear Reduction Ratio\n    CVTH = 0.76  # CVT High Ratio\n    CVTL = 3.8  # CVT Low Ratio\n    TRL = GR * CVTL  # Torque Ratio Low\n    TRH = GR * CVTH  # Torque Ratio High\n    ErpmMax = 3700  # Max engine RPM\n    ErpmMin = 1800  # Min engine RPM\n    Wdia = 23 * 0.0254  # wheel diameter in m\n    Wcirc = 1.74  # Wdia * np.pi ### needs calibration\n    Vsmax = ErpmMax / TRH / 60 * Wcirc * 3.6  # Max vehicle speed in km/h\n    Vsmin = ErpmMax / TRL / 60 * Wcirc * 3.6  # Min vehicle speed in km/h\n\n    eff = 1  # Efficiency of torque transfer (Not used 2025)\n    floss = 1 # Friction Losses (Not used 2025)\n\n    r_h = 0.045  # Torque Feedback Ramp Radius\n    P0 = 63.5  # static spring displacement\n    Peng = 59  # Spring displacement when belt starts to engage\n    Pmax = 30.226  # Spring displacement when clutch is fully shifted\n\n    w_goal = goal* np.pi/30\n    T1 = engTorq(w_goal)\n\n    # Part names (for reference, optional output)\n    FWn = FW_names()\n    PSn = PS_names()\n    SSn = np.array([\"Red\", \"Black\", \"Silver\"])\n    SPTn = SPT_names()\n\n    # Initialize lists\n    ys = []  # Shift percentage\n    F1_plt = []  # Primary Side Force\n    F2_plt = []  # Secondary Side Force\n    F2_err_plt = []\n    Fc1_plt = []  # Primary Centrifugal Force\n    Fc2_plt = []  # Secondary Centrifugal Force\n    Rs1_plt = []  # Primary Side to Radial Force\n    Rs2_plt = []  # Secondary Side to Radial Force\n    R1_plt = []  # Total Primary Radial Force\n    R2_plt = []  # Total Secondary Radial Force\n    T1_plt = []\n    T2_plt = []\n    Terr_plt = []\n    Tmax1_plt = []  # Required Primary Force\n    Tmax2_plt = []  # Required Primary Force\n\n    veh_speed = []\n    engine_rpms = []\n\n    T_err_history = []\n    F2_err_history = []\n\n    slip = 0\n\n    # Flyweights\n    mfw = FWs[q, 1]  # Flyweight Mass\n    MFW = 3 * mfw / 1000  # 3 flyweights, kg\n\n    # Primary spring\n    k1 = PSs[w, 2]\n    Ls = PSs[w, 1]\n    f0 = k1 * (Ls - (P0 - shim))  # Spring Force at no primary movement\n    feng = k1 * (Ls - (Peng - shim))  # Spring Force at belt engagement\n    fs1x = k1 * (Ls - (Peng - shim))  # Spring Force at zero shift\n    Fs1x = k1 * (Ls - (Pmax - shim))  # Spring Force at full shift\n\n    # Secondary Ramp Angle & Rotation\n    \"\"\" This will have to change for composite ramps\"\"\"\n    ramp_angle = Ramps[e] / 180 * pi  # Ramp Angle in radians\n    full_rotation = (28.575 / tan(ramp_angle)) / (pi * 90) * 2 * pi\n\n    # Secondary Pretension\n    pretension = SPTs[0, r] / 180 * pi\n\n    # Secondary spring forces\n    fs2x = SSs[t, 0]  # Spring Compression Force at no shift\n    Fs2x = SSs[t, 1]  # Spring Compression Force at full shift\n    f2t = SSs[t, 2] * pretension  # Spring Torsion Moments at pretension\n    F2t = SSs[t, 2] * (pretension + full_rotation)  # Spring Torsion Moments at full shift\n\n    y = 0 # Shift Percentage\n    while y <= 1:\n        rsint = FWs[q, (int(y * 4) + 3)]  # Flyweight geometric parameter\n\n        cr = 3.83 - y * (3.83 - 0.76)  # Current ratio\n\n        # Pulley diameters and wrap angles\n        D1, D2 = pulley_diameters(ratio=cr)\n        r1 = D1 / 2\n        r2 = D2 / 2\n        phi_1, phi_2 = wrap_angles(D1, D2)\n\n        T2 = T1 * cr * eff * (0.1 if no_T2 else 1)\n\n        # Interpolating Spring Forces\n        Fs2t = f2t + y * (F2t - f2t)  # Secondary Torsion\n        Fs2 = fs2x + y * (Fs2x - fs2x)  # Secondary Compression\n        Fs1 = fs1x + y * (Fs1x - fs1x)  # Primary Compression\n\n        if y == 0:\n            # Idle Speeds\n            rpm_idle = ((f0 / (MFW * rsint))**0.5) * 60 / (2 * pi)\n            engine_rpms.append(rpm_idle)\n            veh_speed.append(0)\n\n            # Max Idle Speed\n            rpm_idle_max = (60 / (2 * pi)) * (feng / (MFW * rsint))**0.5\n            engine_rpms.append(rpm_idle_max)\n            veh_speed.append(0)\n\n            # Engagement Speed\n            \"\"\" \n            Mulamba: Check and Fix!\n            Why just add 900 rpm for engagement?! - It does match the data he got...\n\n            TRY: Use dynamic friction coefficient instead of static friction coeff.\n            TRY: From Aaen, not all torque from engine needs to be transmitted to get the vehicle moving\n            ====> Calculate the takeoff torque or use Wheel Force Transducer data to estimate\n            \"\"\"\n            cf_dyn = 0.4 * cf #Guess\n            T_takeoff = 0.5 * T1 #Guess\n\n            w_eng = (((T_takeoff * tan(beta) / (r1 * cf_dyn)) + feng) / (MFW * rsint))**0.5\n            rpm_eng = (60 / (2 * pi)) * w_eng\n            engine_rpms.append(rpm_eng)\n            veh_speed.append(0)\n\n            # Clutching\n            \"\"\"Use the engagement rpm just solved for to guess clutching engine and evalute the engine torque at that point\n            \"\"\"\n            T1_clu = engTorq(w_eng)\n\n            w_clu = (((T1_clu * tan(beta) / (r1 * cf)) + feng) / ((MFW * rsint) - (m_prime * tan(beta) * phi_1 * r1**2)))**0.5\n            rpm_clu = (60 / (2 * pi)) * w_clu\n            vel_clu = rpm_clu / (cr * 11.3) / 60 * Wcirc * 3.6\n            engine_rpms.append(rpm_clu)\n            veh_speed.append(vel_clu)\n\n        # Straight shift points:\n\n        ## Iteration for convergence\n        T_factor = 0.1 if no_T2 else 1 # For testbench data\n        T1_guess = T1\n        err = float('inf')\n        tol = 1  # percent error bound\n        max_iter = 50\n        iter_count = 0\n\n        ### Lists to store errors for this shift point\n        T_err_iter = []\n        F2_err_iter = []\n\n\n        while err > tol and iter_count < max_iter:\n            T2_guess = T1_guess * cr * eff * T_factor\n            F2_guess = (0.5 * T2_guess + Fs2t) / (r_h * tan(ramp_angle)) + Fs2\n\n            denom = MFW * rsint + m_prime * tan(beta) * (phi_1 * r1**2 - phi_2 * r2**2 / cr**2)\n            w1 = ((F2_guess + Fs1) / denom)**0.5\n\n            T1_new = engTorq(w1)\n            T2_new = T1_new * cr * eff * T_factor\n            F2_new = (0.5 * T2_new + Fs2t) / (r_h * tan(ramp_angle)) + Fs2\n\n            T_err = percentError(T2_guess, T2_new)\n            F2_err = percentError(F2_guess, F2_new)\n            err = max(abs(T_err), abs(F2_err))\n\n            # Store errors for this iteration\n            T_err_iter.append(T_err)\n            F2_err_iter.append(F2_err)\n\n            T1_guess = T1_new\n            iter_count += 1\n\n        print(f\"shift: {y}, took {iter_count} iterations\")\n        # Append error histories for this shift point\n        T_err_history.append(T_err_iter)\n        F2_err_history.append(F2_err_iter)\n\n        # Use converged values\n        rpm = w1 * 60 / (2 * pi)\n        engine_rpms.append(rpm)\n        veh_speed.append(rpm / (cr * 11.3) / 60 * Wcirc * 3.6)\n\n        # Overrun\n        if y == 1:\n            engine_rpms.append(ErpmMax)\n            veh_speed.append(ErpmMax / (CVTH * 11.3) / 60 * Wcirc * 3.6)\n\n        F1 = (MFW * rsint * (w1)**2 - Fs1)\n        Fc1 = Fc(m_prime, w1, r1, phi_1)\n        Rs1 = F1 / tan(beta)\n        R1 = Fc1 + Rs1\n\n\n        w2 = w1 / cr\n        Fc2 = Fc(m_prime, w2, r2, phi_2)\n        Rs2 = F2_new / tan(beta)\n        R2 = Fc2 + Rs2\n\n        # Use converged T1_new and T2_new\n        T_err = percentError(T2_guess, T2_new)  # should be small now\n        F2_err = percentError(F2_guess, F2_new)\n        Terr_plt.append(T_err)\n        F2_err_plt.append(F2_err)\n\n        Tmax1 = maxT(cf, Rs1, Fc1, r1)\n        Tmax2 = maxT(cf, Rs2, Fc2, r2)\n        if Tmax1 <= T1 or Tmax2 <= T2:\n            slip = 1\n\n        F1_plt.append(F1)\n        F2_plt.append(F2_new)\n        Fc1_plt.append(Fc1)\n        Fc2_plt.append(Fc2)\n        Rs1_plt.append(Rs1)\n        Rs2_plt.append(Rs2)\n        R1_plt.append(R1)\n        R2_plt.append(R2)\n        T1_plt.append(T1)\n        T2_plt.append(T2)\n        Tmax1_plt.append(Tmax1)\n        Tmax2_plt.append(Tmax2)\n        ys.append(y)\n\n        y += 0.25\n\n    return {\n        'veh_speed': veh_speed,\n        'engine_rpms': engine_rpms,\n        'slip': slip,\n        'ys': ys,\n        'F1_plt': F1_plt,\n        'F2_plt': F2_plt,\n        'Fc1_plt': Fc1_plt,\n        'Fc2_plt': Fc2_plt,\n        'Rs1_plt': Rs1_plt,\n        'Rs2_plt': Rs2_plt,\n        'R1_plt': R1_plt,\n        'R2_plt': R2_plt,\n        'T1_plt': T1_plt,\n        'T2_plt': T2_plt,\n        'Terr_plt': Terr_plt,\n        'F2_err_plt': F2_err_plt,\n        'Tmax1_plt': Tmax1_plt,\n        'Tmax2_plt': Tmax2_plt,\n\n        'Idle_rpm':rpm_idle_max,\n        'Engage_rpm':rpm_eng,\n        'Clutch_rpm':rpm_clu,\n        'T_err_history': T_err_history,\n        'F2_err_history': F2_err_history\n    }", "code_hash": "f18ecd694c58e0b2754a7372c221a216", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "emfo", "name": "*cvt_simulation"}, {"code": "def plot_simulation(result, q, w, e, r, t,shim, goal, Vsmin, Vsmax, ErpmMax, ErpmMin):\n    \"\"\"\n    Generate plots for CVT simulation results.\n\n    Parameters:\n    result: Dictionary from cvt_simulation containing simulation data\n    q, w, e, r, t: CVT parameters for labeling\n    goal: Peak power RPM\n    Vsmin, Vsmax: Min and max vehicle speeds\n    ErpmMax, ErpmMin: Max and min engine RPMs\n\n    Returns:\n    dict with 'main_plot', 'rad_plot', 'err_plot'\n    \"\"\"\n    veh_speed = result['veh_speed']\n    engine_rpms = result['engine_rpms']\n    slip = result['slip']\n    ys = result['ys']\n    Fc1_plt = result['Fc1_plt']\n    Fc2_plt = result['Fc2_plt']\n    Rs1_plt = result['Rs1_plt']\n    Rs2_plt = result['Rs2_plt']\n    R1_plt = result['R1_plt']\n    R2_plt = result['R2_plt']\n    Terr_plt = result['Terr_plt']\n    F2_err_plt = result['F2_err_plt']\n\n    # Main Plot (Engine RPM vs. Vehicle Speed)\n    fig = go.Figure()\n\n    fig.add_trace(go.Scatter(\n        x=[Vsmin, 0, Vsmax], y=[ErpmMax, 0, ErpmMax],\n        mode='lines', line=dict(dash='dot', color='grey'),\n        name='Low & High Ratios',\n    ))\n    fig.add_trace(go.Scatter(\n        x=[0, Vsmax], y=[goal, goal],\n        mode='lines', line=dict(dash='dash', color='green'),\n        name=f'Ideal shift ({goal}rpm)',\n    ))\n    fig.add_trace(go.Scatter(\n        x=[0, Vsmax], y=[ErpmMax, ErpmMax],\n        mode='lines', line=dict(dash='dash', color='red'),\n        name='Governor',\n    ))\n    fig.add_trace(go.Scatter(\n        x=[0, Vsmax], y=[ErpmMin, ErpmMin],\n        mode='lines', line=dict(dash='dash', color='grey'),\n        name='Idle',\n    ))\n\n    lame = f\"{[q, w, e, r, t]} - {shim:.0f}\"\n    if slip == 1:\n        lame += \" - SLIP\"\n\n    fig.add_trace(go.Scatter(\n        x=veh_speed[0:2], y=engine_rpms[0:2],\n        mode='lines+markers', marker=dict(symbol='star', size=6), line=dict(color='rgb(31, 119, 180)'),\n        name='No Engagement',\n        hoverinfo='x+y+name'\n    ))\n    fig.add_trace(go.Scatter(\n        x=veh_speed[1:3], y=engine_rpms[1:3],\n        mode='lines', line=dict(color='rgb(31, 119, 180)', dash='dot'),\n        name='Total Slip Engagement (TBC)',\n        hoverinfo='x+y+name'\n    ))\n    fig.add_trace(go.Scatter(\n        x=veh_speed[2:5], y=engine_rpms[2:5],\n        mode='lines+markers', marker=dict(symbol='circle', size=6), line=dict(color='rgb(255, 127, 14)', dash='dash'),\n        name='Clutching & Low Ratio',\n        hoverinfo='x+y+name'\n    ))\n    fig.add_trace(go.Scatter(\n        x=veh_speed[4:-1], y=engine_rpms[4:-1],\n        mode='lines+markers', marker=dict(symbol='circle', size=6), line=dict(color='blue'),\n        name=lame+\" (Straight Shift)\",\n        hoverinfo='x+y+name'\n    ))\n    fig.add_trace(go.Scatter(\n        x=veh_speed[-2:], y=engine_rpms[-2:],\n        mode='lines+markers', marker=dict(symbol='circle', size=6), line=dict(color='green'),\n        name=\"Overrun\",\n        hoverinfo='x+y+name'\n    ))\n\n\n    fig.update_layout(\n        template=\"plotly_white\",\n        title = lame,\n        title_x=0.5,\n        margin=dict(t=30, b=10),\n        xaxis_title=\"Vehicle Speed in km/h\",\n        yaxis_title=\"Engine Speed in RPM\",\n        yaxis=dict(range=[1300, 4000]),\n        showlegend=True,\n        legend=dict(\n            yanchor=\"bottom\",\n            y=-0.3,\n            xanchor=\"center\",\n            x=0.5,\n            orientation=\"h\",\n            traceorder=\"normal\",\n            itemsizing=\"constant\",\n            font=dict(size=13)\n        ),\n        hovermode='closest',\n    )\n    fig.update_xaxes(showgrid=True)\n    fig.update_yaxes(showgrid=True)\n\n    return {\n        \"main_plot\": fig,\n    }", "code_hash": "4e605d17a2fc4f76484dd278071d16e3", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hstk", "name": "*plot_simulation"}, {"code": "mo.md(\n    r\"\"\"\n# Other Functions\nFunction used in the mathematical model\n\"\"\"\n)", "code_hash": "08ca7dadced6a04476fed8cfff12331b", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "nWHF", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\n## Radial Force Model\nDevelopedby Hannes (JL) Pretorius (2025) to be able to convert the side force model into radial forces to be able to include Centrifugal Forces from the belt. It is also more intuitive to understand how the shifting happens with this model.\n\n### Cetrifugal Forces\nFor a belt of wrap angle, $\\phi$ and mass per meter of $m'$, the centripetal force, $F_c$ is given by\n$$F_c= m'\\omega^2 r^2 \\phi$$\nwhere $\\omega$ is the angular velocity of the pulley and $r$ is the radius the belt wraps around.\n\"\"\"\n)", "code_hash": "3bc5e76dc09737962fdf8b83758070a6", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "iLit", "name": "_"}, {"code": "def Fc(m,w,r,phi):\n    return m * w**2 * r**2 * phi", "code_hash": "ee2d431bcadf5b92203e8b5e13cfdd1a", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ZHCJ", "name": "*Fc"}, {"code": "mo.md(\n    r\"\"\"\n#### Wrap Angles\nThe first step is to solve for the wrap angles on the pulleys\n\nFrom Shigley Chapter 17 (Budynas and Nisbett, 2019) the wrap angles can be solved as follows, where C is the centre distance, and D and d is the large and small pulley diameters respectively:\n\nSmall Pulley:\n$$\u03d5_d=\u03c0-2 sin^{-1}\\frac{D-d}{2C}$$\nLarge Pulley:\n$$\u03d5_d=\u03c0+2 sin^{-1}\\frac{D-d}{2C}$$\n\"\"\"\n)", "code_hash": "0bfc9f11c6ece8809208a87563281ab7", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ROlb", "name": "_"}, {"code": "def wrap_angles(D1,D2,C=0.2667):\n    from numpy import pi, arcsin\n\n    if D1<D2:\n        d = D1\n        D = D2\n        phi_1 = pi - 2*arcsin((D-d)/(2*C))\n        phi_2 = pi + 2*arcsin((D-d)/(2*C))\n\n    elif D1>D2:\n        d = D2\n        D = D1\n        phi_1 = pi - 2*arcsin((D-d)/(2*C))\n        phi_2 = pi + 2*arcsin((D-d)/(2*C))\n\n    else: phi_1 = phi_2 = pi\n\n    return phi_1, phi_2", "code_hash": "e1cb705d82342e197041ea70b540cf91", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "qnkX", "name": "*wrap_angles"}, {"code": "mo.md(\n    r\"\"\"\n#### Diameters from Ratio (NB: Only for Algorithm)\nNB: Check what the actual belt length and centre distance is!\n\nAssuming no slip, the two diameters can be related through the CVT ratio, cr\n$$D_2=cr\\cdot D_1$$\nThe belt pitch length equation can then be rewritten as follows and solved as a quadratic equation for $D_1$.\n$$L=2C+\\frac{\\pi}{2}\\cdot (D_1+D_2 )+(D_1-D_2 )^2/4C$$\n$$\\Rightarrow L=2C+\\frac{\\pi}{2}\\cdot (D_1+rD_1 )+(D_1-crD_1 )^2/4C$$\n$$\\Rightarrow[(1-2cr+cr^2)/4C]\\cdot D_1^2+[ \\frac{\\pi}{2}\\cdot (1+cr)]\\cdot D_1+[2C-L]=0$$\n\"\"\"\n)", "code_hash": "34f3033b33453c63908ea412cd943a9f", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "TqIu", "name": "_"}, {"code": "def pulley_diameters(ratio,C=0.266405,L=1.027):\n    from numpy import pi\n    import numpy.polynomial.polynomial as poly\n\n    cr = ratio\n    a = (1 - 2*cr + cr**2)/(4*C)\n    b = (0.5*pi*(1+cr))\n    c = (2*C-L)\n\n    roots = poly.polyroots((c,b,a))\n    # print(roots)\n\n    Dp = roots[1]\n    Ds = cr*Dp\n\n    # Li = 2*C +0.5*pi*(Dp+Ds) + (Dp -Ds)**2 /(4*C)\n\n    return Dp, Ds", "code_hash": "30e78c62ee10626f619f527f9f038d1e", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Vxnm", "name": "*pulley_diameters"}, {"code": "mo.md(\n    r\"\"\"\n#Belt Slipping / Max Transferable Torque\n##Transmittable Torque \n\nThe maximum torque that can be transferred by the sheaves before the belt slips can be determined from\n\n$$T_{max}=F_{t1}-F_{t2}\u22c5r=\u0394 F_{t,max}\u22c5r$$\n\nFor this equation to be used, the belt tensions need to be determined independently of the transmitted torque. This can be done by relating the difference between the tensions, $\\Delta F_t$ and the total frictional force around the wrap of the belt by \n\n$$\u0394F_{t,max}=\u03bc N$$\n\nwhere N is the total normal force the belt experiences from the pulley and can be defined by the radial force due to the side force, $R_s$ and the reduction of it by the centrifugal force, $F_c$ given resulting in \n\n$$\\Delta F_{t,max} = \\frac{\\mu}{sin\\beta} (R_s-F_c )=f' (R-F_c)$$\n\nThat means that the max transmittable torque is\n\n$$T_{max}=f' (R_s-F_c )\u22c5r$$\n\"\"\"\n)", "code_hash": "90f4ea92d1603ef08281ea147ba2b4c3", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "DnEU", "name": "_"}, {"code": "def maxT (f,Rs,Fc,r):\n    Tmax = f*(Rs-Fc)*r\n    return Tmax", "code_hash": "99394e590ee4e7b49fc091876176a6b9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ulZA", "name": "*maxT"}, {"code": "mo.md(\n    r\"\"\"\n## Kohler/Rehlko Engine Torque Curve\n\nBelow is the power and torque curve for the rule-compliant Rehlko/Kohler engine with the Baja SAE restrictor plate installed. It has been converted into metric units from the original that was provided by Baja SAE (2025)\n\nIt is then coded in a function to be used in the algorithm:\n\n$$ T_{engine} = -2\\times 10^{-6} \\cdot  rpm^2 + 0.0058\\cdot rpm + 22.536 $$\n\"\"\"\n)", "code_hash": "f3d9e19d6a3d520e9813e8e577738ac9", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ecfG", "name": "_"}, {"code": "def engTorq(w):\n    import numpy as np\n    rpm = w * 30/np.pi\n    T_eng = -2*10**-6 * rpm**2 + 0.0058*rpm + 22.536\n    return T_eng", "code_hash": "6ef10ac7ce6c36e06978aa2398d16897", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Pvdt", "name": "*engTorq"}, {"code": "mo.md(r\"\"\"## Misc. Usefull Functions\"\"\")", "code_hash": "4c7481e2e6407992bdcead95c79021b2", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ZBYS", "name": "_"}, {"code": "def percentError(old, new):\n    return 100*abs(old-new)/new", "code_hash": "fd037e3fa27a278f5583ce1b76c0b887", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "aLJB", "name": "*percentError"}, {"code": "mo.md(r\"\"\"# Old Model for Comparison\"\"\")", "code_hash": "fa3b75c3c7fd0bf05f8faa04ca5c66ed", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "nHfw", "name": "_"}, {"code": "\nimport plotly.io as pio\nimport plotly.colors\n\ncolors = plotly.colors.qualitative.Plotly\n\nold_result = old_cvt_model(q, w, e, r, t)\nold_x, old_y = old_result\n\nold_result_fix = old_cvt_model_fix(q, w, e, r, t)\nold_x_fix, old_y_fix = old_result_fix\n\nresult_new = cvt_simulation(q, w, e, r, t)\ngoal_x = result_new['veh_speed']\ngoal_y = result_new['engine_rpms']\n\n\n# Create Plotly figure\nfig = go.Figure()\n\nv2s = (60*GR/(0.5*Wdia*3.6*2*np.pi))\n\nold_shift = dict(\n    x=np.array(old_x)*v2s ,\n    y=old_y,\n    mode='lines+markers',\n    line=dict(color=colors[7]),\n    name=f\"Old Model [{q,w,e,r,t}]\",\n)\n\nold_shift_fix = dict(\n    x=np.array(old_x_fix) *v2s,\n    y=old_y_fix,\n    mode='lines+markers',\n    line=dict(dash='dash',color=colors[6]),\n    name=f\"Old Model Diameter Fix [{q,w,e,r,t}]\",\n)\n\ngoal_shift = dict(\n        x=np.array(goal_x) *v2s,\n        y=goal_y,\n        mode='lines+markers',\n        line=dict(color=colors[5],dash=\"dot\"),\n        name=f\"New Model [{q,w,e,r,t}]\",\n    )\n\n\n# Plotting Lines to compare against\n## Data for comparison lines\nLow = np.array([Vsmin,0, Vsmax])*v2s\n\nGovspeed = np.array([ErpmMax, ErpmMax])\nIdle = np.array([ErpmMin, ErpmMin])\nRPM = np.array([0, 3800])\ngoal = 3500\n\n# Plotting Lines to compare against\n\n# Data for comparison lines\nPeakP = [goal, goal]\nGovspeed = [ErpmMax, ErpmMax]\nIdle = [ErpmMin, ErpmMin] \n\nfig.add_trace(go.Scatter(\n    x=Low, y=[ErpmMax, 0, ErpmMax],\n    mode='lines', line=dict(dash='dot', color='grey'),\n    name='Low & High Ratios',\n))\nfig.add_trace(go.Scatter(\n    x=[0, Vsmax*v2s], y=PeakP,\n    mode='lines', line=dict(dash='dash', color='green'),\n    name=f'Ideal shift ({goal}rpm)',\n))\nfig.add_trace(go.Scatter(\n    x=[0, Vsmax*v2s], y=Govspeed,\n    mode='lines', line=dict(dash='dash', color='red'),\n    name='Governor',\n))\nfig.add_trace(go.Scatter(\n    x=[0, Vsmax*v2s], y=Idle,\n    mode='lines', line=dict(dash='dash', color='grey'),\n    name='Idle',\n))\n# Add scatter trace\nfig.add_trace(go.Scatter(**old_shift))\nfig.add_trace(go.Scatter(**old_shift_fix))\nfig.add_trace(go.Scatter(**goal_shift))\n\n\n# Update layout\nfig.update_layout(\n    template = \"plotly_white\",\n    dragmode='zoom',\n    xaxis_title=\"Secondary Speed [RPM]\",\n    yaxis_title=\"Engine/Primary Speed [RPM]\",\n    yaxis=dict(range=[1000, 4500]),\n    title=dict(text=\"Old vs Fix vs New\", x=0.5, xanchor='center'),\n    showlegend=True,\n    hovermode='closest',\n    legend=dict(\n        yanchor=\"bottom\",\n        y=-0.4,\n        xanchor=\"center\",\n        x=0.5,\n        orientation=\"h\",\n        traceorder=\"normal\",\n        itemsizing=\"constant\",\n        font=dict(size=10)\n    ),\n)\nfig.update_xaxes(showgrid=True)\nfig.update_yaxes(showgrid=True)\n\nmo.ui.plotly(fig)", "code_hash": "fe7ab388b58ca3e83ecad067f88dc911", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "xXTn", "name": "_"}, {"code": "def old_cvt_model(q=4, w=2, e=7, r=1, t=1):\n    # Initialize part parameters\n    FWs = FW()\n    PSs = PS()\n    SSs = SS()\n    Ramps = Helix()\n    SPTs = SPT()\n\n    # Pulley Diameters\n    dp = 0.063 # initial diameter of primary at 3.83 x2 = x1 - 0.0047\n    Dp = 0.184 #0.173 # final diameter of primary  at 0.76\n\n    ds = 0.24129 #0.2295 # initial diameter of secondary at 3.83 x2 = x1 - 0.0047\n    Ds = 0.13984 #0.1315 # final diameter of secondary at 0.76\n\n    # Ratio and Speed Definitions\n    ## Gear Ratio and Torque Ratio Definitions\n    GR = 11.3 #Gear Reduction Ratio\n    CVTH = 0.76 # CVT High Ratio\n    CVTL = 3.8 # CVT Low Ratio\n    TRL = GR*CVTL # Torque Ratio Low\n    TRH = GR*CVTH # Torque Ratio High\n\n    eff = 1  # Efficiency of torque transfer\n    floss = 1\n    rr = 0.045  # Torque Feedback Ramp Radius\n    P0 = 63.5  # static spring displacement\n    Peng = 59  # Spring displacement when belt starts to engage\n    Pmax = 30.226  # Spring displacement when clutch is fully shifted\n    shim = 0  # Spring shim displacement\n    cf = 0.55 # coeff friction between rubber and aliminium\n    goal = 3600  # Peak Power RPM\n    T1 = round(-2E-6 * goal**2 + 0.0058 * goal + 22.536, 1)  # Peak Torque trendline\n\n\n    ## Engine RPM and Speed Definitions\n    ErpmMax = 3800 # Max engine RPM\n    ErpmMin = 1800  # Min engine RPM\n\n    ## Vehicle Speed and Wheel Diameter Definitions\n    Wdia = 23*0.0254 #wheel diameter in m\n    Wcirc = 1.74 #Wdia * np.pi ### needs calibration\n    Vsmax = 3800/TRH/60*Wcirc*3.6 # Max vehicle speed in km/h\n    Vsmin = 3800/TRL/60*Wcirc*3.6 # Min vehicle speed in km/h\n\n    '''\n    # Data Points for Comparison Lines\n    Low = [0,Vsmin]\n    High = [0,Vsmax]\n    Med = [0,((Vsmax+Vsmin)/2)]\n    PeakP = [goal,goal]\n    Govspeed = [3800,3800]\n    RPM = [0,3800]\n\n    # Close Previous Plots\n    plt.close()\n\n    # Plotting Engine RPM vs Vehicle Speed\n    plt.figure(2,figsize=(10, 6))\n    ## Plotting Lines to compare against\n    plt.plot(Low,RPM,\"--\" ,label = \"Low gear ratio\")\n    plt.plot(High,RPM,\"--\", label = \"High gear ratio\")\n    plt.plot(High,PeakP,\"--\", label = \"Ideal shift\")\n    plt.plot(High,Govspeed,\"--\", label = \"Governer\")\n    plt.ylabel(\"RPM\")\n    plt.xlabel(\"Vehicle speed (km/h)\")\n    plt.title(\"Engine RPM along Vehicle Speed\")\n    plt.subplots_adjust(bottom=0.2)\n    if inspect_optimised_results == True: plt.subplots_adjust(bottom=0.2), plt.suptitle(name + \"\\nPlot slip setups: \"+str(plot_slip_setups), fontsize=10, y=0.1)\n    plt.ylim(0,4000)\n    #plt.yticks(np.arange(0,4050,50))\n    '''\n\n    # Initialize variables for plotting\n    os = [] # Shift percentage\n    f1 = [] # Possible Primary Side Force\n    f2 = [] # Possible Secondary Side Force\n    F_req1=[] # Required Primary Side Force\n    F_req2=[] # Required Secondary Side Force\n    F_req3=[] # Average Required  Side Force\n\n    inspect = np.array([q,w,e,r,t])\n\n    # Extracting the data form the CVT Parts database\n    ## Flyweight Calculations\n    mfw = FWs[int(inspect[0]),1] # Mass of flyweight\n\n    ## Primary Spring Calculations\n    f1eng = PSs[int(inspect[1]),2]*(PSs[int(inspect[1]),1]-(P0-shim)) # Spring Force at belt engagement\n    fs1x = PSs[int(inspect[1]),2]*(PSs[int(inspect[1]),1]-(Peng-shim)) # Spring Force at zero shift\n    Fs1x = PSs[int(inspect[1]),2]*(PSs[int(inspect[1]),1]-(Pmax-shim)) # Spring Force at full shift\n\n    ## Ramp Calculations\n    ra = Ramps[int(inspect[2])]/180*pi # Ramp Angle in radians\n    rot = (28.575/tan(ra))/(pi*90)*2*pi # Ramp rotation in radians\n\n    pre = SPTs[0,int(inspect[3])]/180*pi # Secondary Pretension in radians\n\n    ## Secondary Spring Calculations\n    fs2x = SSs[int(inspect[4]),0]\n    Fs2x = SSs[int(inspect[4]),1]\n    fs2t = SSs[int(inspect[4]),2]*pre\n    Fs2t = SSs[int(inspect[4]),2]*(pre+rot)        \n\n    o = 0 #Starting shift percentage\n\n    rpms = []\n    veh_speed = [] # Vehicle Speed in km/h (Was named \"shifts\" in the original code)\n\n    while o<=1:\n\n        rel1=1\n        rel2=1\n\n        # Flywieght Geometry Factor Evaluated at shift percentage\n        rsint = FWs[int(inspect[0]),int(o*4+3)] #\n\n        #Current Pulley Ratio   \n        cr = 3.83 - o * (3.83-0.76)\n\n        # Pulley  Diameters\n        primD = dp + (Dp-dp)*o\n        secD = ds + (Ds-ds)*o\n\n        # Secondary Torque from Primary/Engine Torque\n        T2=T1*cr*eff\n\n        # Calculate the required side forces for the primary and secondary\n        req1= ((T1/primD)/cf)*2 # 2*Torque/Diameter / friction coeff\n        req2 = ((T2/secD)/cf)*2\n        req3=(req1+req2)/2 # Average\n        F_req1.append(req1)\n        F_req2.append(req2)\n        F_req3.append(req3)\n\n        # Calculate side forces for the primary and secondary due to the springs\n        F2t = fs2t + o * (Fs2t-fs2t) # Secondary Torsion\n        F2x = fs2x + o * (Fs2x-fs2x) # Secondary Compression\n        F1x = fs1x + o * (Fs1x-fs1x) # Primary Compression\n\n        # Calculate the total side force on the secondary side\n        F2 = ((0.5*T2+F2t)/(rr*tan(ra))*floss+F2x)*rel2\n\n        # Imperically Determined Correction Factor (See Mills pg 15-16)\n        if F2<req3:\n            slip=1\n            if o==0:\n                rel1=0.94\n            if o==0.25:\n                rel1=0.9\n            if o==0.5:\n                rel1=0.9\n\n        # Calculate the total side force on the primary side\n        F1 = (mfw*3/1000*rsint*(goal/60*2*pi)**2-F1x)*rel1\n\n\n        ## Record the forces for plotting\n        f1.append(F1)\n        f2.append(F2)\n        os.append(o)\n\n\n\n        ## Idle RPM   \n        if o==0:\n            rpm = ((f1eng/(mfw*3/1000*rsint))**0.5)*60/(2*pi)\n            rpms.append(rpm)\n            veh_speed.append(0)\n\n        rpm=((((F2+F1x*rel1)/(mfw*3/1000*rsint*rel1))**0.5)*60/(2*pi))\n        rpms.append(rpm)\n        veh_speed.append(rpm/(cr*11.3)/60*Wcirc*3.6)\n\n\n        # increase shift percentage by 25%\n        o=o+0.25\n\n    return veh_speed, rpms", "code_hash": "0947755fcebf02bcf7b9b5b305d9f73e", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "AjVT", "name": "*old_cvt_model"}, {"code": "def old_cvt_model_fix(q=4, w=2, e=7, r=1, t=1):\n    # Initialize part parameters\n    FWs = FW()\n    PSs = PS()\n    SSs = SS()\n    Ramps = Helix()\n    SPTs = SPT()\n\n    # Pulley Diameters\n    dp = 0.063 # initial diameter of primary at 3.83 x2 = x1 - 0.0047\n    Dp = 0.184 #0.173 # final diameter of primary  at 0.76\n\n    ds = 0.24129 #0.2295 # initial diameter of secondary at 3.83 x2 = x1 - 0.0047\n    Ds = 0.13984 #0.1315 # final diameter of secondary at 0.76\n\n    # Ratio and Speed Definitions\n    ## Gear Ratio and Torque Ratio Definitions\n    GR = 11.3 #Gear Reduction Ratio\n    CVTH = 0.76 # CVT High Ratio\n    CVTL = 3.8 # CVT Low Ratio\n    TRL = GR*CVTL # Torque Ratio Low\n    TRH = GR*CVTH # Torque Ratio High\n\n    eff = 1  # Efficiency of torque transfer\n    floss = 1\n    rr = 0.045  # Torque Feedback Ramp Radius\n    P0 = 63.5  # static spring displacement\n    Peng = 59  # Spring displacement when belt starts to engage\n    Pmax = 30.226  # Spring displacement when clutch is fully shifted\n    shim = 0  # Spring shim displacement\n    cf = 0.55 # coeff friction between rubber and aliminium\n    goal = 3600  # Peak Power RPM\n    T1 = round(-2E-6 * goal**2 + 0.0058 * goal + 22.536, 1)  # Peak Torque trendline\n\n\n    ## Engine RPM and Speed Definitions\n    ErpmMax = 3800 # Max engine RPM\n    ErpmMin = 1800  # Min engine RPM\n\n    ## Vehicle Speed and Wheel Diameter Definitions\n    Wdia = 23*0.0254 #wheel diameter in m\n    Wcirc = 1.74 #Wdia * np.pi ### needs calibration\n    Vsmax = 3800/TRH/60*Wcirc*3.6 # Max vehicle speed in km/h\n    Vsmin = 3800/TRL/60*Wcirc*3.6 # Min vehicle speed in km/h\n\n    '''\n    # Data Points for Comparison Lines\n    Low = [0,Vsmin]\n    High = [0,Vsmax]\n    Med = [0,((Vsmax+Vsmin)/2)]\n    PeakP = [goal,goal]\n    Govspeed = [3800,3800]\n    RPM = [0,3800]\n\n    # Close Previous Plots\n    plt.close()\n\n    # Plotting Engine RPM vs Vehicle Speed\n    plt.figure(2,figsize=(10, 6))\n    ## Plotting Lines to compare against\n    plt.plot(Low,RPM,\"--\" ,label = \"Low gear ratio\")\n    plt.plot(High,RPM,\"--\", label = \"High gear ratio\")\n    plt.plot(High,PeakP,\"--\", label = \"Ideal shift\")\n    plt.plot(High,Govspeed,\"--\", label = \"Governer\")\n    plt.ylabel(\"RPM\")\n    plt.xlabel(\"Vehicle speed (km/h)\")\n    plt.title(\"Engine RPM along Vehicle Speed\")\n    plt.subplots_adjust(bottom=0.2)\n    if inspect_optimised_results == True: plt.subplots_adjust(bottom=0.2), plt.suptitle(name + \"\\nPlot slip setups: \"+str(plot_slip_setups), fontsize=10, y=0.1)\n    plt.ylim(0,4000)\n    #plt.yticks(np.arange(0,4050,50))\n    '''\n\n    # Initialize variables for plotting\n    os = [] # Shift percentage\n    f1 = [] # Possible Primary Side Force\n    f2 = [] # Possible Secondary Side Force\n    F_req1=[] # Required Primary Side Force\n    F_req2=[] # Required Secondary Side Force\n    F_req3=[] # Average Required  Side Force\n\n    inspect = np.array([q,w,e,r,t])\n\n    # Extracting the data form the CVT Parts database\n    ## Flyweight Calculations\n    mfw = FWs[int(inspect[0]),1] # Mass of flyweight\n\n    ## Primary Spring Calculations\n    f1eng = PSs[int(inspect[1]),2]*(PSs[int(inspect[1]),1]-(P0-shim)) # Spring Force at belt engagement\n    fs1x = PSs[int(inspect[1]),2]*(PSs[int(inspect[1]),1]-(Peng-shim)) # Spring Force at zero shift\n    Fs1x = PSs[int(inspect[1]),2]*(PSs[int(inspect[1]),1]-(Pmax-shim)) # Spring Force at full shift\n\n    ## Ramp Calculations\n    ra = Ramps[int(inspect[2])]/180*pi # Ramp Angle in radians\n    rot = (28.575/tan(ra))/(pi*90)*2*pi # Ramp rotation in radians\n\n    pre = SPTs[0,int(inspect[3])]/180*pi # Secondary Pretension in radians\n\n    ## Secondary Spring Calculations\n    fs2x = SSs[int(inspect[4]),0]\n    Fs2x = SSs[int(inspect[4]),1]\n    fs2t = SSs[int(inspect[4]),2]*pre\n    Fs2t = SSs[int(inspect[4]),2]*(pre+rot)        \n\n    o = 0 #Starting shift percentage\n\n    rpms = []\n    veh_speed = [] # Vehicle Speed in km/h (Was named \"shifts\" in the original code)\n\n    while o<=1:\n\n        rel1=1\n        rel2=1\n\n        # Flywieght Geometry Factor Evaluated at shift percentage\n        rsint = FWs[int(inspect[0]),int(o*4+3)] #\n\n        #Current Pulley Ratio   \n        cr = 3.83 - o * (3.83-0.76)\n\n        # Pulley  Diameters\n         # Pulley diameters and wrap angles\n        primD, secD = pulley_diameters(ratio=cr)\n\n        # Secondary Torque from Primary/Engine Torque\n        T2=T1*cr*eff\n\n        # Calculate the required side forces for the primary and secondary\n        req1= ((T1/primD)/cf)*2 # 2*Torque/Diameter / friction coeff\n        req2 = ((T2/secD)/cf)*2\n        req3=(req1+req2)/2 # Average\n        F_req1.append(req1)\n        F_req2.append(req2)\n        F_req3.append(req3)\n\n        # Calculate side forces for the primary and secondary due to the springs\n        F2t = fs2t + o * (Fs2t-fs2t) # Secondary Torsion\n        F2x = fs2x + o * (Fs2x-fs2x) # Secondary Compression\n        F1x = fs1x + o * (Fs1x-fs1x) # Primary Compression\n\n        # Calculate the total side force on the secondary side\n        F2 = ((0.5*T2+F2t)/(rr*tan(ra))*floss+F2x)\n\n        # Calculate the total side force on the primary side\n        F1 = (mfw*3/1000*rsint*(goal/60*2*pi)**2-F1x)\n\n\n        ## Record the forces for plotting\n        f1.append(F1)\n        f2.append(F2)\n        os.append(o)\n\n\n\n        ## Idle RPM   \n        if o==0:\n            rpm = ((f1eng/(mfw*3/1000*rsint))**0.5)*60/(2*pi)\n            rpms.append(rpm)\n            veh_speed.append(0)\n\n        rpm=((((F2+F1x)/(mfw*3/1000*rsint))**0.5)*60/(2*pi))\n        rpms.append(rpm)\n        veh_speed.append(rpm/(cr*11.3)/60*Wcirc*3.6)\n\n\n        # Calculate the total side force on the primary side\n        o=o+0.25\n\n    return veh_speed, rpms", "code_hash": "c6c2f3de840c4810274885da8b5cd881", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "pHFh", "name": "*old_cvt_model_fix"}, {"code": "", "code_hash": null, "config": {"column": null, "disabled": false, "hide_code": false}, "id": "NCOB", "name": "_"}], "metadata": {"marimo_version": "0.16.3"}, "version": "1"},
            "session": {"cells": [{"code_hash": "7cee2b9f52777d7fce83aa9acc208a26", "console": [], "id": "setup", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "console": [], "id": "Hbol", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "45b8159d444f3ca6393a789f77c10201", "console": [], "id": "MJUe", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h1 id=\"cvt-model-simulation\">CVT Model Simulation</h1>\n<h3 id=\"interactive-simulation-with-sliders\">Interactive Simulation with Sliders</h3>\n<h4 id=\"jl-hannes-pretorius-2025\">JL (Hannes) Pretorius - (2025)</h4>\n<ul>\n<li>Simulates CVT performance for given parameters</li>\n<li>Includes sliders for interactive parameter adjustment</li>\n<li>Plots Engine RPM vs. Vehicle Speed, Radial Forces, and Errors</li>\n</ul></span>"}, "type": "data"}]}, {"code_hash": "4d43024096cb628a96b99eceb4dc3895", "console": [], "id": "vblA", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "771e851a74b79a2ebeecd40cc31042f1", "console": [{"name": "stdout", "text": "shift: 0, took 5 iterations\nshift: 0.25, took 4 iterations\nshift: 0.5, took 4 iterations\nshift: 0.75, took 3 iterations\nshift: 1.0, took 2 iterations\n", "type": "stream"}], "id": "bkHC", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "e60335169ec0423f36ecfcdc84b1fa78", "console": [], "id": "lEQa", "outputs": [{"data": {"text/html": "<div style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Goal RPM</strong>: 3400 <marimo-ui-element object-id='vblA-5' random-id='9e5497e0-8443-3b72-b314-5f8a870a46df'><marimo-slider data-initial-value='3600' data-label='null' data-start='3000' data-stop='3800' data-step='50' data-steps='[]' data-debounce='false' data-disabled='false' data-orientation='&quot;horizontal&quot;' data-show-value='false' data-include-input='false' data-full-width='false'></marimo-slider></marimo-ui-element></span></span><div style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Flyweights</strong>: 7 <marimo-ui-element object-id='vblA-0' random-id='c6963077-4036-4a3e-5af5-d41d5f2c293d'><marimo-slider data-initial-value='7' data-label='null' data-start='0' data-stop='8' data-step='1' data-steps='[]' data-debounce='false' data-disabled='false' data-orientation='&quot;horizontal&quot;' data-show-value='false' data-include-input='false' data-full-width='false'></marimo-slider></marimo-ui-element></span></span><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Primary Spring</strong>: 3 <marimo-ui-element object-id='vblA-1' random-id='21836a7c-6957-1045-e453-d9b024ecef26'><marimo-slider data-initial-value='3' data-label='null' data-start='0' data-stop='6' data-step='1' data-steps='[]' data-debounce='false' data-disabled='false' data-orientation='&quot;horizontal&quot;' data-show-value='false' data-include-input='false' data-full-width='false'></marimo-slider></marimo-ui-element></span></span><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Shim</strong>: 0 mm <marimo-ui-element object-id='vblA-6' random-id='180c7a0e-13db-0596-89e7-d56e80e5d9d5'><marimo-slider data-initial-value='0' data-label='null' data-start='0' data-stop='15' data-step='1' data-steps='[]' data-debounce='false' data-disabled='false' data-orientation='&quot;horizontal&quot;' data-show-value='false' data-include-input='false' data-full-width='false'></marimo-slider></marimo-ui-element></span></span></div><div style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Ramp Angle</strong>: 8 <marimo-ui-element object-id='vblA-2' random-id='ede6b434-c4fb-3440-05ab-652ee22f17d8'><marimo-slider data-initial-value='8' data-label='null' data-start='0' data-stop='9' data-step='1' data-steps='[]' data-debounce='false' data-disabled='false' data-orientation='&quot;horizontal&quot;' data-show-value='false' data-include-input='false' data-full-width='false'></marimo-slider></marimo-ui-element></span></span><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Pretension</strong>: 0 <marimo-ui-element object-id='vblA-3' random-id='c938073c-fa39-abc7-d956-5b2c6f42fd0a'><marimo-slider data-initial-value='0' data-label='null' data-start='0' data-stop='4' data-step='1' data-steps='[]' data-debounce='false' data-disabled='false' data-orientation='&quot;horizontal&quot;' data-show-value='false' data-include-input='false' data-full-width='false'></marimo-slider></marimo-ui-element></span></span><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Secondary Spring</strong>: 0 <marimo-ui-element object-id='vblA-4' random-id='7e67c876-7392-8a8c-d8e0-1ebaf81290ae'><marimo-slider data-initial-value='0' data-label='null' data-start='0' data-stop='2' data-step='1' data-steps='[]' data-debounce='false' data-disabled='false' data-orientation='&quot;horizontal&quot;' data-show-value='false' data-include-input='false' data-full-width='false'></marimo-slider></marimo-ui-element></span></span></div></div>"}, "type": "data"}]}, {"code_hash": "3796a4437b23f1933c5e8f1a4c244807", "console": [], "id": "PKri", "outputs": [{"data": {"text/html": "<div style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><div style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><marimo-ui-element object-id='PKri-0' random-id='28fd37eb-342e-05b0-0d3a-5d746d2166a3'><marimo-plotly data-initial-value='{}' data-label='null' data-figure='{&quot;data&quot;:[{&quot;line&quot;:{&quot;color&quot;:&quot;grey&quot;,&quot;dash&quot;:&quot;dot&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Low &amp; High Ratios&quot;,&quot;x&quot;:[8.995808104331626,0,45.5787610619469],&quot;y&quot;:[3700,0,3700],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;green&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Ideal shift (3400rpm)&quot;,&quot;x&quot;:[0,45.5787610619469],&quot;y&quot;:[3400,3400],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;red&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Governor&quot;,&quot;x&quot;:[0,45.5787610619469],&quot;y&quot;:[3700,3700],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;grey&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Idle&quot;,&quot;x&quot;:[0,45.5787610619469],&quot;y&quot;:[1800,1800],&quot;type&quot;:&quot;scatter&quot;},{&quot;hoverinfo&quot;:&quot;x+y+name&quot;,&quot;line&quot;:{&quot;color&quot;:&quot;rgb(31, 119, 180)&quot;},&quot;marker&quot;:{&quot;size&quot;:6,&quot;symbol&quot;:&quot;star&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;No Engagement&quot;,&quot;x&quot;:[0,0],&quot;y&quot;:[1930.7705770581872,2030.41650898343],&quot;type&quot;:&quot;scatter&quot;},{&quot;hoverinfo&quot;:&quot;x+y+name&quot;,&quot;line&quot;:{&quot;color&quot;:&quot;rgb(31, 119, 180)&quot;,&quot;dash&quot;:&quot;dot&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Total Slip Engagement (TBC)&quot;,&quot;x&quot;:[0,0],&quot;y&quot;:[2030.41650898343,2637.6110634446663],&quot;type&quot;:&quot;scatter&quot;},{&quot;hoverinfo&quot;:&quot;x+y+name&quot;,&quot;line&quot;:{&quot;color&quot;:&quot;rgb(255, 127, 14)&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;marker&quot;:{&quot;size&quot;:6,&quot;symbol&quot;:&quot;circle&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Clutching &amp; Low Ratio&quot;,&quot;x&quot;:[0,6.428544339742501,8.721433257338658],&quot;y&quot;:[2637.6110634446663,2664.95182451835,3615.4684860570865],&quot;type&quot;:&quot;scatter&quot;},{&quot;hoverinfo&quot;:&quot;x+y+name&quot;,&quot;line&quot;:{&quot;color&quot;:&quot;blue&quot;},&quot;marker&quot;:{&quot;size&quot;:6,&quot;symbol&quot;:&quot;circle&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;[7, 3, 8, 0, 0] - 0 (Straight Shift)&quot;,&quot;x&quot;:[8.721433257338658,10.800308133634276,14.425832245949517,21.64432857159649,42.72320932763319],&quot;y&quot;:[3615.4684860570865,3580.0590359155294,3583.4513462675463,3578.5186244462075,3514.4341159551122],&quot;type&quot;:&quot;scatter&quot;},{&quot;hoverinfo&quot;:&quot;x+y+name&quot;,&quot;line&quot;:{&quot;color&quot;:&quot;green&quot;},&quot;marker&quot;:{&quot;size&quot;:6,&quot;symbol&quot;:&quot;circle&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Overrun&quot;,&quot;x&quot;:[42.72320932763319,44.97904052165812],&quot;y&quot;:[3514.4341159551122,3700],&quot;type&quot;:&quot;scatter&quot;}],&quot;layout&quot;:{&quot;template&quot;:{&quot;data&quot;:{&quot;barpolar&quot;:[{&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;barpolar&quot;}],&quot;bar&quot;:[{&quot;error_x&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;error_y&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;bar&quot;}],&quot;carpet&quot;:[{&quot;aaxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;baxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;type&quot;:&quot;carpet&quot;}],&quot;choropleth&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;choropleth&quot;}],&quot;contourcarpet&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;contourcarpet&quot;}],&quot;contour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;contour&quot;}],&quot;heatmap&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;heatmap&quot;}],&quot;histogram2dcontour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2dcontour&quot;}],&quot;histogram2d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2d&quot;}],&quot;histogram&quot;:[{&quot;marker&quot;:{&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;histogram&quot;}],&quot;mesh3d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;mesh3d&quot;}],&quot;parcoords&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;parcoords&quot;}],&quot;pie&quot;:[{&quot;automargin&quot;:true,&quot;type&quot;:&quot;pie&quot;}],&quot;scatter3d&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatter3d&quot;}],&quot;scattercarpet&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattercarpet&quot;}],&quot;scattergeo&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergeo&quot;}],&quot;scattergl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergl&quot;}],&quot;scattermapbox&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermapbox&quot;}],&quot;scattermap&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermap&quot;}],&quot;scatterpolargl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolargl&quot;}],&quot;scatterpolar&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolar&quot;}],&quot;scatter&quot;:[{&quot;fillpattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2},&quot;type&quot;:&quot;scatter&quot;}],&quot;scatterternary&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterternary&quot;}],&quot;surface&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;surface&quot;}],&quot;table&quot;:[{&quot;cells&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#EBF0F8&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;header&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#C8D4E3&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;type&quot;:&quot;table&quot;}]},&quot;layout&quot;:{&quot;annotationdefaults&quot;:{&quot;arrowcolor&quot;:&quot;#2a3f5f&quot;,&quot;arrowhead&quot;:0,&quot;arrowwidth&quot;:1},&quot;autotypenumbers&quot;:&quot;strict&quot;,&quot;coloraxis&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;colorscale&quot;:{&quot;diverging&quot;:[[0,&quot;#8e0152&quot;],[0.1,&quot;#c51b7d&quot;],[0.2,&quot;#de77ae&quot;],[0.3,&quot;#f1b6da&quot;],[0.4,&quot;#fde0ef&quot;],[0.5,&quot;#f7f7f7&quot;],[0.6,&quot;#e6f5d0&quot;],[0.7,&quot;#b8e186&quot;],[0.8,&quot;#7fbc41&quot;],[0.9,&quot;#4d9221&quot;],[1,&quot;#276419&quot;]],&quot;sequential&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;sequentialminus&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]]},&quot;colorway&quot;:[&quot;#636efa&quot;,&quot;#EF553B&quot;,&quot;#00cc96&quot;,&quot;#ab63fa&quot;,&quot;#FFA15A&quot;,&quot;#19d3f3&quot;,&quot;#FF6692&quot;,&quot;#B6E880&quot;,&quot;#FF97FF&quot;,&quot;#FECB52&quot;],&quot;font&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;geo&quot;:{&quot;bgcolor&quot;:&quot;white&quot;,&quot;lakecolor&quot;:&quot;white&quot;,&quot;landcolor&quot;:&quot;white&quot;,&quot;showlakes&quot;:true,&quot;showland&quot;:true,&quot;subunitcolor&quot;:&quot;#C8D4E3&quot;},&quot;hoverlabel&quot;:{&quot;align&quot;:&quot;left&quot;},&quot;hovermode&quot;:&quot;closest&quot;,&quot;mapbox&quot;:{&quot;style&quot;:&quot;light&quot;},&quot;paper_bgcolor&quot;:&quot;white&quot;,&quot;plot_bgcolor&quot;:&quot;white&quot;,&quot;polar&quot;:{&quot;angularaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;radialaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;scene&quot;:{&quot;xaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;yaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;zaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;}},&quot;shapedefaults&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;}},&quot;ternary&quot;:{&quot;aaxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;baxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;caxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;title&quot;:{&quot;x&quot;:0.05},&quot;xaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2},&quot;yaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2}}},&quot;title&quot;:{&quot;text&quot;:&quot;[7, 3, 8, 0, 0] - 0&quot;,&quot;x&quot;:0.5},&quot;margin&quot;:{&quot;t&quot;:30,&quot;b&quot;:10},&quot;yaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;Engine Speed in RPM&quot;},&quot;range&quot;:[1300,4000],&quot;showgrid&quot;:true},&quot;legend&quot;:{&quot;font&quot;:{&quot;size&quot;:13},&quot;yanchor&quot;:&quot;bottom&quot;,&quot;y&quot;:-0.3,&quot;xanchor&quot;:&quot;center&quot;,&quot;x&quot;:0.5,&quot;orientation&quot;:&quot;h&quot;,&quot;traceorder&quot;:&quot;normal&quot;,&quot;itemsizing&quot;:&quot;constant&quot;},&quot;xaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;Vehicle Speed in km/h&quot;},&quot;showgrid&quot;:true},&quot;showlegend&quot;:true,&quot;hovermode&quot;:&quot;closest&quot;}}' data-config='{}'></marimo-plotly></marimo-ui-element><div style='display: flex;flex: 1;flex-direction: row;justify-content: space-between;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><div style='flex: 1'><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Primary Parts:</strong></span>\n<span class=\"paragraph\"><strong>CVT Setup:</strong> [7, 3, 8, 0, 0] - 0</span>\n<span class=\"paragraph\"><strong>Flyweight [7]:</strong> 1072</span>\n<span class=\"paragraph\"><strong>Spring 1 [3]:</strong> Purple (3)</span>\n<span class=\"paragraph\"><strong>Shim:</strong> 0mm</span></span></div><div style='flex: 1'><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Secondary Parts</strong></span>\n<span class=\"paragraph\"><strong>Ramp Angle [8]:</strong> 48</span>\n<span class=\"paragraph\"><strong>Pretension [0]:</strong> 22 = (H1-S3)</span>\n<span class=\"paragraph\"><strong>Spring 2 [0]:</strong> Red</span></span></div><div style='flex: 1'><span class=\"markdown prose dark:prose-invert\"><span class=\"paragraph\"><strong>Useful Output Parameters:</strong> </span>\n<ul>\n<li>Max Idle: 2030 rpm </li>\n<li>Engagement: 2638 rpm</li>\n<li>Low Gear: 2665 rpm</li>\n<li>Ave. Shift: 3595 rpm</li>\n<li>Shift Bandwidth : 186 rpm</li>\n<li>Max. Speed: 45km/h</li>\n</ul></span></div></div></div></div>"}, "type": "data"}]}, {"code_hash": "94d25cc1147dca36e1b85a7f1f553fa3", "console": [], "id": "Xref", "outputs": [{"data": {"text/html": "<marimo-plotly data-figure='{&quot;data&quot;:[{&quot;line&quot;:{&quot;color&quot;:&quot;orange&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Primary Centrifugal Force&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[117.34295321774728,172.79216461316167,285.86560215952744,543.4172945164756,1122.7044126498668],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;blue&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Secondary Centrifugal Force&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[180.19849097412106,251.12440914147717,382.64447524573194,635.2726866139311,1243.5753765046545],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;orange&quot;,&quot;dash&quot;:&quot;dot&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Primary Side to Radial Force&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[3935.885518483016,3525.3670745352306,3120.174549633905,2697.464130863664,2302.556697702297],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;blue&quot;,&quot;dash&quot;:&quot;dot&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Secondary Side to Radial Force&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[3844.808035368261,3466.164320469774,3029.5575823127474,2600.143330068563,2185.4109578069206],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;orange&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Primary Total Radial Force&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[4053.2284717007633,3698.1592391483923,3406.0401517934324,3240.8814253801397,3425.2611103521635],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;blue&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Secondary Total Radial Force&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[4025.0065263423817,3717.2887296112513,3412.2020575584793,3235.416016682494,3428.986334311575],&quot;type&quot;:&quot;scatter&quot;}],&quot;layout&quot;:{&quot;template&quot;:{&quot;data&quot;:{&quot;barpolar&quot;:[{&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;barpolar&quot;}],&quot;bar&quot;:[{&quot;error_x&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;error_y&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;bar&quot;}],&quot;carpet&quot;:[{&quot;aaxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;baxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;type&quot;:&quot;carpet&quot;}],&quot;choropleth&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;choropleth&quot;}],&quot;contourcarpet&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;contourcarpet&quot;}],&quot;contour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;contour&quot;}],&quot;heatmap&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;heatmap&quot;}],&quot;histogram2dcontour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2dcontour&quot;}],&quot;histogram2d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2d&quot;}],&quot;histogram&quot;:[{&quot;marker&quot;:{&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;histogram&quot;}],&quot;mesh3d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;mesh3d&quot;}],&quot;parcoords&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;parcoords&quot;}],&quot;pie&quot;:[{&quot;automargin&quot;:true,&quot;type&quot;:&quot;pie&quot;}],&quot;scatter3d&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatter3d&quot;}],&quot;scattercarpet&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattercarpet&quot;}],&quot;scattergeo&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergeo&quot;}],&quot;scattergl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergl&quot;}],&quot;scattermapbox&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermapbox&quot;}],&quot;scattermap&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermap&quot;}],&quot;scatterpolargl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolargl&quot;}],&quot;scatterpolar&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolar&quot;}],&quot;scatter&quot;:[{&quot;fillpattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2},&quot;type&quot;:&quot;scatter&quot;}],&quot;scatterternary&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterternary&quot;}],&quot;surface&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;surface&quot;}],&quot;table&quot;:[{&quot;cells&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#EBF0F8&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;header&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#C8D4E3&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;type&quot;:&quot;table&quot;}]},&quot;layout&quot;:{&quot;annotationdefaults&quot;:{&quot;arrowcolor&quot;:&quot;#2a3f5f&quot;,&quot;arrowhead&quot;:0,&quot;arrowwidth&quot;:1},&quot;autotypenumbers&quot;:&quot;strict&quot;,&quot;coloraxis&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;colorscale&quot;:{&quot;diverging&quot;:[[0,&quot;#8e0152&quot;],[0.1,&quot;#c51b7d&quot;],[0.2,&quot;#de77ae&quot;],[0.3,&quot;#f1b6da&quot;],[0.4,&quot;#fde0ef&quot;],[0.5,&quot;#f7f7f7&quot;],[0.6,&quot;#e6f5d0&quot;],[0.7,&quot;#b8e186&quot;],[0.8,&quot;#7fbc41&quot;],[0.9,&quot;#4d9221&quot;],[1,&quot;#276419&quot;]],&quot;sequential&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;sequentialminus&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]]},&quot;colorway&quot;:[&quot;#636efa&quot;,&quot;#EF553B&quot;,&quot;#00cc96&quot;,&quot;#ab63fa&quot;,&quot;#FFA15A&quot;,&quot;#19d3f3&quot;,&quot;#FF6692&quot;,&quot;#B6E880&quot;,&quot;#FF97FF&quot;,&quot;#FECB52&quot;],&quot;font&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;geo&quot;:{&quot;bgcolor&quot;:&quot;white&quot;,&quot;lakecolor&quot;:&quot;white&quot;,&quot;landcolor&quot;:&quot;white&quot;,&quot;showlakes&quot;:true,&quot;showland&quot;:true,&quot;subunitcolor&quot;:&quot;#C8D4E3&quot;},&quot;hoverlabel&quot;:{&quot;align&quot;:&quot;left&quot;},&quot;hovermode&quot;:&quot;closest&quot;,&quot;mapbox&quot;:{&quot;style&quot;:&quot;light&quot;},&quot;paper_bgcolor&quot;:&quot;white&quot;,&quot;plot_bgcolor&quot;:&quot;white&quot;,&quot;polar&quot;:{&quot;angularaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;radialaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;scene&quot;:{&quot;xaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;yaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;zaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;}},&quot;shapedefaults&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;}},&quot;ternary&quot;:{&quot;aaxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;baxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;caxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;title&quot;:{&quot;x&quot;:0.05},&quot;xaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2},&quot;yaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2}}},&quot;title&quot;:{&quot;text&quot;:&quot;Radial Force along Shift % - Setup: [7, 3, 8, 0, 0] - 0&quot;,&quot;x&quot;:0.5},&quot;margin&quot;:{&quot;t&quot;:40,&quot;b&quot;:10,&quot;r&quot;:0},&quot;legend&quot;:{&quot;font&quot;:{&quot;size&quot;:14},&quot;yanchor&quot;:&quot;bottom&quot;,&quot;y&quot;:-0.4,&quot;xanchor&quot;:&quot;center&quot;,&quot;x&quot;:0.5,&quot;orientation&quot;:&quot;h&quot;,&quot;traceorder&quot;:&quot;normal&quot;,&quot;tracegroupgap&quot;:5,&quot;itemwidth&quot;:125.0},&quot;xaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;Shift Percentage&quot;},&quot;showgrid&quot;:true},&quot;yaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;Radial Force [N]&quot;},&quot;showgrid&quot;:true},&quot;width&quot;:1000,&quot;height&quot;:500,&quot;showlegend&quot;:true,&quot;hovermode&quot;:&quot;closest&quot;,&quot;dragmode&quot;:&quot;zoom&quot;}}' data-config='{}'></marimo-plotly>"}, "type": "data"}]}, {"code_hash": "d0b87b2679825395d716ac6503006d2d", "console": [], "id": "SFPL", "outputs": [{"data": {"text/html": "<marimo-plotly data-figure='{&quot;data&quot;:[{&quot;line&quot;:{&quot;color&quot;:&quot;blue&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Primary Torque (T1)&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[19.136000000000006,19.136000000000006,19.136000000000006,19.136000000000006,19.136000000000006],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;blue&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Max Primary Torque (Tmax1)&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[73.2707452080159,77.54473568970114,82.24764551119347,83.11424725155277,65.67938819226825],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;orange&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Secondary Torque (T2)&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[73.29088000000003,58.60400000000002,43.91712000000001,29.230240000000006,14.543360000000002],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;orange&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Max Secondary Torque (Tmax2)&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[269.3143252964672,227.73841591651828,176.27822179625844,115.80718811679102,39.846496897464476],&quot;type&quot;:&quot;scatter&quot;}],&quot;layout&quot;:{&quot;template&quot;:{&quot;data&quot;:{&quot;barpolar&quot;:[{&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;barpolar&quot;}],&quot;bar&quot;:[{&quot;error_x&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;error_y&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;bar&quot;}],&quot;carpet&quot;:[{&quot;aaxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;baxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;type&quot;:&quot;carpet&quot;}],&quot;choropleth&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;choropleth&quot;}],&quot;contourcarpet&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;contourcarpet&quot;}],&quot;contour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;contour&quot;}],&quot;heatmap&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;heatmap&quot;}],&quot;histogram2dcontour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2dcontour&quot;}],&quot;histogram2d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2d&quot;}],&quot;histogram&quot;:[{&quot;marker&quot;:{&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;histogram&quot;}],&quot;mesh3d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;mesh3d&quot;}],&quot;parcoords&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;parcoords&quot;}],&quot;pie&quot;:[{&quot;automargin&quot;:true,&quot;type&quot;:&quot;pie&quot;}],&quot;scatter3d&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatter3d&quot;}],&quot;scattercarpet&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattercarpet&quot;}],&quot;scattergeo&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergeo&quot;}],&quot;scattergl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergl&quot;}],&quot;scattermapbox&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermapbox&quot;}],&quot;scattermap&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermap&quot;}],&quot;scatterpolargl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolargl&quot;}],&quot;scatterpolar&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolar&quot;}],&quot;scatter&quot;:[{&quot;fillpattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2},&quot;type&quot;:&quot;scatter&quot;}],&quot;scatterternary&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterternary&quot;}],&quot;surface&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;surface&quot;}],&quot;table&quot;:[{&quot;cells&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#EBF0F8&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;header&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#C8D4E3&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;type&quot;:&quot;table&quot;}]},&quot;layout&quot;:{&quot;annotationdefaults&quot;:{&quot;arrowcolor&quot;:&quot;#2a3f5f&quot;,&quot;arrowhead&quot;:0,&quot;arrowwidth&quot;:1},&quot;autotypenumbers&quot;:&quot;strict&quot;,&quot;coloraxis&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;colorscale&quot;:{&quot;diverging&quot;:[[0,&quot;#8e0152&quot;],[0.1,&quot;#c51b7d&quot;],[0.2,&quot;#de77ae&quot;],[0.3,&quot;#f1b6da&quot;],[0.4,&quot;#fde0ef&quot;],[0.5,&quot;#f7f7f7&quot;],[0.6,&quot;#e6f5d0&quot;],[0.7,&quot;#b8e186&quot;],[0.8,&quot;#7fbc41&quot;],[0.9,&quot;#4d9221&quot;],[1,&quot;#276419&quot;]],&quot;sequential&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;sequentialminus&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]]},&quot;colorway&quot;:[&quot;#636efa&quot;,&quot;#EF553B&quot;,&quot;#00cc96&quot;,&quot;#ab63fa&quot;,&quot;#FFA15A&quot;,&quot;#19d3f3&quot;,&quot;#FF6692&quot;,&quot;#B6E880&quot;,&quot;#FF97FF&quot;,&quot;#FECB52&quot;],&quot;font&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;geo&quot;:{&quot;bgcolor&quot;:&quot;white&quot;,&quot;lakecolor&quot;:&quot;white&quot;,&quot;landcolor&quot;:&quot;white&quot;,&quot;showlakes&quot;:true,&quot;showland&quot;:true,&quot;subunitcolor&quot;:&quot;#C8D4E3&quot;},&quot;hoverlabel&quot;:{&quot;align&quot;:&quot;left&quot;},&quot;hovermode&quot;:&quot;closest&quot;,&quot;mapbox&quot;:{&quot;style&quot;:&quot;light&quot;},&quot;paper_bgcolor&quot;:&quot;white&quot;,&quot;plot_bgcolor&quot;:&quot;white&quot;,&quot;polar&quot;:{&quot;angularaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;radialaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;scene&quot;:{&quot;xaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;yaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;zaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;}},&quot;shapedefaults&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;}},&quot;ternary&quot;:{&quot;aaxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;baxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;caxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;title&quot;:{&quot;x&quot;:0.05},&quot;xaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2},&quot;yaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2}}},&quot;title&quot;:{&quot;text&quot;:&quot;Torque Transfer Capacity - Setup: [7, 3, 8, 0, 0] - 0&quot;,&quot;x&quot;:0.5},&quot;margin&quot;:{&quot;t&quot;:40,&quot;b&quot;:10,&quot;r&quot;:0},&quot;legend&quot;:{&quot;font&quot;:{&quot;size&quot;:14},&quot;yanchor&quot;:&quot;bottom&quot;,&quot;y&quot;:-0.3,&quot;xanchor&quot;:&quot;center&quot;,&quot;x&quot;:0.5,&quot;orientation&quot;:&quot;h&quot;,&quot;traceorder&quot;:&quot;normal&quot;,&quot;tracegroupgap&quot;:5,&quot;itemwidth&quot;:125.0},&quot;xaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;Shift Percentage&quot;},&quot;showgrid&quot;:true},&quot;yaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;Torque (Nm)&quot;},&quot;showgrid&quot;:true},&quot;width&quot;:1000,&quot;height&quot;:500,&quot;showlegend&quot;:true,&quot;hovermode&quot;:&quot;closest&quot;,&quot;dragmode&quot;:&quot;zoom&quot;}}' data-config='{}'></marimo-plotly>"}, "type": "data"}]}, {"code_hash": "b0620cabcd8ee3bee9350ba2ffe7cecb", "console": [], "id": "BYtC", "outputs": [{"data": {"text/html": "<marimo-plotly data-figure='{&quot;data&quot;:[{&quot;line&quot;:{&quot;color&quot;:&quot;orange&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Secondary Force Error (After)&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[0.7340274234439917,0.5518921982401972,0.2033929244659387,0.21019643934398352,0.17045873894352864],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;blue&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Torque Error (After)&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[0.9016867563327328,0.7511930008836863,0.3234210321072632,0.42997504405029086,0.5716578820135754],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;orange&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Secondary Force Error (Before)&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[12.58793600182242,9.013472765482936,7.172066198362495,4.863744742343763,1.6771891804776768],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;blue&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Torque Error (Before)&quot;,&quot;x&quot;:[0,0.25,0.5,0.75,1.0],&quot;y&quot;:[15.603737536717086,12.390870255248188,11.522644578044885,10.033654593533457,5.647390959704828],&quot;type&quot;:&quot;scatter&quot;}],&quot;layout&quot;:{&quot;template&quot;:{&quot;data&quot;:{&quot;barpolar&quot;:[{&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;barpolar&quot;}],&quot;bar&quot;:[{&quot;error_x&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;error_y&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;bar&quot;}],&quot;carpet&quot;:[{&quot;aaxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;baxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;type&quot;:&quot;carpet&quot;}],&quot;choropleth&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;choropleth&quot;}],&quot;contourcarpet&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;contourcarpet&quot;}],&quot;contour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;contour&quot;}],&quot;heatmap&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;heatmap&quot;}],&quot;histogram2dcontour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2dcontour&quot;}],&quot;histogram2d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2d&quot;}],&quot;histogram&quot;:[{&quot;marker&quot;:{&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;histogram&quot;}],&quot;mesh3d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;mesh3d&quot;}],&quot;parcoords&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;parcoords&quot;}],&quot;pie&quot;:[{&quot;automargin&quot;:true,&quot;type&quot;:&quot;pie&quot;}],&quot;scatter3d&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatter3d&quot;}],&quot;scattercarpet&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattercarpet&quot;}],&quot;scattergeo&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergeo&quot;}],&quot;scattergl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergl&quot;}],&quot;scattermapbox&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermapbox&quot;}],&quot;scattermap&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermap&quot;}],&quot;scatterpolargl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolargl&quot;}],&quot;scatterpolar&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolar&quot;}],&quot;scatter&quot;:[{&quot;fillpattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2},&quot;type&quot;:&quot;scatter&quot;}],&quot;scatterternary&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterternary&quot;}],&quot;surface&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;surface&quot;}],&quot;table&quot;:[{&quot;cells&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#EBF0F8&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;header&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#C8D4E3&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;type&quot;:&quot;table&quot;}]},&quot;layout&quot;:{&quot;annotationdefaults&quot;:{&quot;arrowcolor&quot;:&quot;#2a3f5f&quot;,&quot;arrowhead&quot;:0,&quot;arrowwidth&quot;:1},&quot;autotypenumbers&quot;:&quot;strict&quot;,&quot;coloraxis&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;colorscale&quot;:{&quot;diverging&quot;:[[0,&quot;#8e0152&quot;],[0.1,&quot;#c51b7d&quot;],[0.2,&quot;#de77ae&quot;],[0.3,&quot;#f1b6da&quot;],[0.4,&quot;#fde0ef&quot;],[0.5,&quot;#f7f7f7&quot;],[0.6,&quot;#e6f5d0&quot;],[0.7,&quot;#b8e186&quot;],[0.8,&quot;#7fbc41&quot;],[0.9,&quot;#4d9221&quot;],[1,&quot;#276419&quot;]],&quot;sequential&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;sequentialminus&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]]},&quot;colorway&quot;:[&quot;#636efa&quot;,&quot;#EF553B&quot;,&quot;#00cc96&quot;,&quot;#ab63fa&quot;,&quot;#FFA15A&quot;,&quot;#19d3f3&quot;,&quot;#FF6692&quot;,&quot;#B6E880&quot;,&quot;#FF97FF&quot;,&quot;#FECB52&quot;],&quot;font&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;geo&quot;:{&quot;bgcolor&quot;:&quot;white&quot;,&quot;lakecolor&quot;:&quot;white&quot;,&quot;landcolor&quot;:&quot;white&quot;,&quot;showlakes&quot;:true,&quot;showland&quot;:true,&quot;subunitcolor&quot;:&quot;#C8D4E3&quot;},&quot;hoverlabel&quot;:{&quot;align&quot;:&quot;left&quot;},&quot;hovermode&quot;:&quot;closest&quot;,&quot;mapbox&quot;:{&quot;style&quot;:&quot;light&quot;},&quot;paper_bgcolor&quot;:&quot;white&quot;,&quot;plot_bgcolor&quot;:&quot;white&quot;,&quot;polar&quot;:{&quot;angularaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;radialaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;scene&quot;:{&quot;xaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;yaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;zaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;}},&quot;shapedefaults&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;}},&quot;ternary&quot;:{&quot;aaxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;baxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;caxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;title&quot;:{&quot;x&quot;:0.05},&quot;xaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2},&quot;yaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2}}},&quot;title&quot;:{&quot;text&quot;:&quot;Percentage Difference of Torque and Secondary Force Errors (Before vs After Iteration) - Setup: [7, 3, 8, 0, 0] - 0&quot;,&quot;x&quot;:0.5},&quot;margin&quot;:{&quot;t&quot;:40,&quot;b&quot;:10,&quot;r&quot;:0},&quot;yaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;% Difference Error&quot;},&quot;range&quot;:[0,30],&quot;showgrid&quot;:true},&quot;legend&quot;:{&quot;font&quot;:{&quot;size&quot;:14},&quot;yanchor&quot;:&quot;bottom&quot;,&quot;y&quot;:-0.3,&quot;xanchor&quot;:&quot;center&quot;,&quot;x&quot;:0.5,&quot;orientation&quot;:&quot;h&quot;,&quot;tracegroupgap&quot;:5,&quot;itemwidth&quot;:125.0},&quot;xaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;Shift Percentage&quot;},&quot;showgrid&quot;:true},&quot;width&quot;:1000,&quot;height&quot;:500,&quot;showlegend&quot;:true,&quot;hovermode&quot;:&quot;closest&quot;,&quot;dragmode&quot;:&quot;zoom&quot;}}' data-config='{}'></marimo-plotly>"}, "type": "data"}]}, {"code_hash": "b94184398f25dd624c471263d41240ec", "console": [], "id": "RGSE", "outputs": [{"data": {"text/html": "<marimo-plotly data-figure='{&quot;data&quot;:[{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Torque Err y=0.00&quot;,&quot;x&quot;:[0,1,2,3,4],&quot;y&quot;:[15.603737536717086,7.211010969984374,3.6991139387895595,1.8032076122902776,0.9016867563327328],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x&quot;,&quot;yaxis&quot;:&quot;y&quot;},{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Torque Err y=0.25&quot;,&quot;x&quot;:[0,1,2,3],&quot;y&quot;:[12.390870255248188,4.709562627089037,1.9037467238205683,0.7511930008836863],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x&quot;,&quot;yaxis&quot;:&quot;y&quot;},{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Torque Err y=0.50&quot;,&quot;x&quot;:[0,1,2,3],&quot;y&quot;:[11.522644578044885,3.42196851663713,1.0585208454680377,0.3234210321072632],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x&quot;,&quot;yaxis&quot;:&quot;y&quot;},{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Torque Err y=0.75&quot;,&quot;x&quot;:[0,1,2],&quot;y&quot;:[10.033654593533457,2.0544958001643203,0.42997504405029086],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x&quot;,&quot;yaxis&quot;:&quot;y&quot;},{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Torque Err y=1.00&quot;,&quot;x&quot;:[0,1],&quot;y&quot;:[5.647390959704828,0.5716578820135754],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x&quot;,&quot;yaxis&quot;:&quot;y&quot;},{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Force Err y=0.00&quot;,&quot;x&quot;:[0,1,2,3,4],&quot;y&quot;:[12.58793600182242,5.899529764527139,3.006124412722183,1.4703629649617485,0.7340274234439917],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x2&quot;,&quot;yaxis&quot;:&quot;y2&quot;},{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Force Err y=0.25&quot;,&quot;x&quot;:[0,1,2,3],&quot;y&quot;:[9.013472765482936,3.470419819010539,1.3958561417682613,0.5518921982401972],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x2&quot;,&quot;yaxis&quot;:&quot;y2&quot;},{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Force Err y=0.50&quot;,&quot;x&quot;:[0,1,2,3],&quot;y&quot;:[7.172066198362495,2.157823356028716,0.6648816466950352,0.2033929244659387],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x2&quot;,&quot;yaxis&quot;:&quot;y2&quot;},{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Force Err y=0.75&quot;,&quot;x&quot;:[0,1,2],&quot;y&quot;:[4.863744742343763,1.0065579988317537,0.21019643934398352],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x2&quot;,&quot;yaxis&quot;:&quot;y2&quot;},{&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Force Err y=1.00&quot;,&quot;x&quot;:[0,1],&quot;y&quot;:[1.6771891804776768,0.17045873894352864],&quot;type&quot;:&quot;scatter&quot;,&quot;xaxis&quot;:&quot;x2&quot;,&quot;yaxis&quot;:&quot;y2&quot;}],&quot;layout&quot;:{&quot;template&quot;:{&quot;data&quot;:{&quot;barpolar&quot;:[{&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;barpolar&quot;}],&quot;bar&quot;:[{&quot;error_x&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;error_y&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;bar&quot;}],&quot;carpet&quot;:[{&quot;aaxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;baxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;type&quot;:&quot;carpet&quot;}],&quot;choropleth&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;choropleth&quot;}],&quot;contourcarpet&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;contourcarpet&quot;}],&quot;contour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;contour&quot;}],&quot;heatmap&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;heatmap&quot;}],&quot;histogram2dcontour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2dcontour&quot;}],&quot;histogram2d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2d&quot;}],&quot;histogram&quot;:[{&quot;marker&quot;:{&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;histogram&quot;}],&quot;mesh3d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;mesh3d&quot;}],&quot;parcoords&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;parcoords&quot;}],&quot;pie&quot;:[{&quot;automargin&quot;:true,&quot;type&quot;:&quot;pie&quot;}],&quot;scatter3d&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatter3d&quot;}],&quot;scattercarpet&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattercarpet&quot;}],&quot;scattergeo&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergeo&quot;}],&quot;scattergl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergl&quot;}],&quot;scattermapbox&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermapbox&quot;}],&quot;scattermap&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermap&quot;}],&quot;scatterpolargl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolargl&quot;}],&quot;scatterpolar&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolar&quot;}],&quot;scatter&quot;:[{&quot;fillpattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2},&quot;type&quot;:&quot;scatter&quot;}],&quot;scatterternary&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterternary&quot;}],&quot;surface&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;surface&quot;}],&quot;table&quot;:[{&quot;cells&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#EBF0F8&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;header&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#C8D4E3&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;type&quot;:&quot;table&quot;}]},&quot;layout&quot;:{&quot;annotationdefaults&quot;:{&quot;arrowcolor&quot;:&quot;#2a3f5f&quot;,&quot;arrowhead&quot;:0,&quot;arrowwidth&quot;:1},&quot;autotypenumbers&quot;:&quot;strict&quot;,&quot;coloraxis&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;colorscale&quot;:{&quot;diverging&quot;:[[0,&quot;#8e0152&quot;],[0.1,&quot;#c51b7d&quot;],[0.2,&quot;#de77ae&quot;],[0.3,&quot;#f1b6da&quot;],[0.4,&quot;#fde0ef&quot;],[0.5,&quot;#f7f7f7&quot;],[0.6,&quot;#e6f5d0&quot;],[0.7,&quot;#b8e186&quot;],[0.8,&quot;#7fbc41&quot;],[0.9,&quot;#4d9221&quot;],[1,&quot;#276419&quot;]],&quot;sequential&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;sequentialminus&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]]},&quot;colorway&quot;:[&quot;#636efa&quot;,&quot;#EF553B&quot;,&quot;#00cc96&quot;,&quot;#ab63fa&quot;,&quot;#FFA15A&quot;,&quot;#19d3f3&quot;,&quot;#FF6692&quot;,&quot;#B6E880&quot;,&quot;#FF97FF&quot;,&quot;#FECB52&quot;],&quot;font&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;geo&quot;:{&quot;bgcolor&quot;:&quot;white&quot;,&quot;lakecolor&quot;:&quot;white&quot;,&quot;landcolor&quot;:&quot;white&quot;,&quot;showlakes&quot;:true,&quot;showland&quot;:true,&quot;subunitcolor&quot;:&quot;#C8D4E3&quot;},&quot;hoverlabel&quot;:{&quot;align&quot;:&quot;left&quot;},&quot;hovermode&quot;:&quot;closest&quot;,&quot;mapbox&quot;:{&quot;style&quot;:&quot;light&quot;},&quot;paper_bgcolor&quot;:&quot;white&quot;,&quot;plot_bgcolor&quot;:&quot;white&quot;,&quot;polar&quot;:{&quot;angularaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;radialaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;scene&quot;:{&quot;xaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;yaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;zaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;}},&quot;shapedefaults&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;}},&quot;ternary&quot;:{&quot;aaxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;baxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;caxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;title&quot;:{&quot;x&quot;:0.05},&quot;xaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2},&quot;yaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2}}},&quot;xaxis&quot;:{&quot;anchor&quot;:&quot;y&quot;,&quot;domain&quot;:[0.0,0.425],&quot;title&quot;:{&quot;text&quot;:&quot;Iteration&quot;}},&quot;yaxis&quot;:{&quot;anchor&quot;:&quot;x&quot;,&quot;domain&quot;:[0.0,1.0],&quot;title&quot;:{&quot;text&quot;:&quot;Torque Error (%)&quot;}},&quot;xaxis2&quot;:{&quot;anchor&quot;:&quot;y2&quot;,&quot;domain&quot;:[0.575,1.0],&quot;title&quot;:{&quot;text&quot;:&quot;Iteration&quot;}},&quot;yaxis2&quot;:{&quot;anchor&quot;:&quot;x2&quot;,&quot;domain&quot;:[0.0,1.0],&quot;title&quot;:{&quot;text&quot;:&quot;Force Error (%)&quot;}},&quot;annotations&quot;:[{&quot;font&quot;:{&quot;size&quot;:16},&quot;showarrow&quot;:false,&quot;text&quot;:&quot;Torque Error Convergence&quot;,&quot;x&quot;:0.2125,&quot;xanchor&quot;:&quot;center&quot;,&quot;xref&quot;:&quot;paper&quot;,&quot;y&quot;:1.0,&quot;yanchor&quot;:&quot;bottom&quot;,&quot;yref&quot;:&quot;paper&quot;},{&quot;font&quot;:{&quot;size&quot;:16},&quot;showarrow&quot;:false,&quot;text&quot;:&quot;Force Error Convergence&quot;,&quot;x&quot;:0.7875,&quot;xanchor&quot;:&quot;center&quot;,&quot;xref&quot;:&quot;paper&quot;,&quot;y&quot;:1.0,&quot;yanchor&quot;:&quot;bottom&quot;,&quot;yref&quot;:&quot;paper&quot;}],&quot;title&quot;:{&quot;text&quot;:&quot;CVT Error Convergence&quot;},&quot;height&quot;:400,&quot;width&quot;:1000,&quot;showlegend&quot;:true,&quot;dragmode&quot;:&quot;zoom&quot;}}' data-config='{}'></marimo-plotly>"}, "type": "data"}]}, {"code_hash": "83fb98bf14d95b9120502a3d1f6be5db", "console": [], "id": "Kclp", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h1 id=\"mathematical-model\">Mathematical Model</h1>\n<span class=\"paragraph\">The function below defines al the different stages the shifting curve and calculate all the applicable parameters for plotting or further calculations</span></span>"}, "type": "data"}]}, {"code_hash": "f18ecd694c58e0b2754a7372c221a216", "console": [], "id": "emfo", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "4e605d17a2fc4f76484dd278071d16e3", "console": [], "id": "Hstk", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "08ca7dadced6a04476fed8cfff12331b", "console": [], "id": "nWHF", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h1 id=\"other-functions\">Other Functions</h1>\n<span class=\"paragraph\">Function used in the mathematical model</span></span>"}, "type": "data"}]}, {"code_hash": "3bc5e76dc09737962fdf8b83758070a6", "console": [], "id": "iLit", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h2 id=\"radial-force-model\">Radial Force Model</h2>\n<span class=\"paragraph\">Developedby Hannes (JL) Pretorius (2025) to be able to convert the side force model into radial forces to be able to include Centrifugal Forces from the belt. It is also more intuitive to understand how the shifting happens with this model.</span>\n<h3 id=\"cetrifugal-forces\">Cetrifugal Forces</h3>\n<span class=\"paragraph\">For a belt of wrap angle, <marimo-tex class=\"arithmatex\">||(\\phi||)</marimo-tex> and mass per meter of <marimo-tex class=\"arithmatex\">||(m'||)</marimo-tex>, the centripetal force, <marimo-tex class=\"arithmatex\">||(F_c||)</marimo-tex> is given by\n<marimo-tex class=\"arithmatex\">||(<marimo-tex class=\"arithmatex\">||(F_c= m'\\omega^2 r^2 \\phi||)</marimo-tex>||)</marimo-tex>\nwhere <marimo-tex class=\"arithmatex\">||(\\omega||)</marimo-tex> is the angular velocity of the pulley and <marimo-tex class=\"arithmatex\">||(r||)</marimo-tex> is the radius the belt wraps around.</span></span>"}, "type": "data"}]}, {"code_hash": "ee2d431bcadf5b92203e8b5e13cfdd1a", "console": [], "id": "ZHCJ", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "0bfc9f11c6ece8809208a87563281ab7", "console": [], "id": "ROlb", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h4 id=\"wrap-angles\">Wrap Angles</h4>\n<span class=\"paragraph\">The first step is to solve for the wrap angles on the pulleys</span>\n<span class=\"paragraph\">From Shigley Chapter 17 (Budynas and Nisbett, 2019) the wrap angles can be solved as follows, where C is the centre distance, and D and d is the large and small pulley diameters respectively:</span>\n<span class=\"paragraph\">Small Pulley:\n<marimo-tex class=\"arithmatex\">||(<marimo-tex class=\"arithmatex\">||(\u03d5_d=\u03c0-2 sin^{-1}\\frac{D-d}{2C}||)</marimo-tex>||)</marimo-tex>\nLarge Pulley:\n<marimo-tex class=\"arithmatex\">||(<marimo-tex class=\"arithmatex\">||(\u03d5_d=\u03c0+2 sin^{-1}\\frac{D-d}{2C}||)</marimo-tex>||)</marimo-tex></span></span>"}, "type": "data"}]}, {"code_hash": "e1cb705d82342e197041ea70b540cf91", "console": [], "id": "qnkX", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "34f3033b33453c63908ea412cd943a9f", "console": [], "id": "TqIu", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h4 id=\"diameters-from-ratio-nb-only-for-algorithm\">Diameters from Ratio (NB: Only for Algorithm)</h4>\n<span class=\"paragraph\">NB: Check what the actual belt length and centre distance is!</span>\n<span class=\"paragraph\">Assuming no slip, the two diameters can be related through the CVT ratio, cr\n<marimo-tex class=\"arithmatex\">||(<marimo-tex class=\"arithmatex\">||(D_2=cr\\cdot D_1||)</marimo-tex>||)</marimo-tex>\nThe belt pitch length equation can then be rewritten as follows and solved as a quadratic equation for <marimo-tex class=\"arithmatex\">||(D_1||)</marimo-tex>.\n<marimo-tex class=\"arithmatex\">||(<marimo-tex class=\"arithmatex\">||(L=2C+\\frac{\\pi}{2}\\cdot (D_1+D_2 )+(D_1-D_2 )^2/4C||)</marimo-tex>||)</marimo-tex>\n<marimo-tex class=\"arithmatex\">||(<marimo-tex class=\"arithmatex\">||(\\Rightarrow L=2C+\\frac{\\pi}{2}\\cdot (D_1+rD_1 )+(D_1-crD_1 )^2/4C||)</marimo-tex>||)</marimo-tex>\n<marimo-tex class=\"arithmatex\">||(<marimo-tex class=\"arithmatex\">||(\\Rightarrow[(1-2cr+cr^2)/4C]\\cdot D_1^2+[ \\frac{\\pi}{2}\\cdot (1+cr)]\\cdot D_1+[2C-L]=0||)</marimo-tex>||)</marimo-tex></span></span>"}, "type": "data"}]}, {"code_hash": "30e78c62ee10626f619f527f9f038d1e", "console": [], "id": "Vxnm", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "90f4ea92d1603ef08281ea147ba2b4c3", "console": [], "id": "DnEU", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h1 id=\"belt-slipping-max-transferable-torque\">Belt Slipping / Max Transferable Torque</h1>\n<h2 id=\"transmittable-torque\">Transmittable Torque</h2>\n<span class=\"paragraph\">The maximum torque that can be transferred by the sheaves before the belt slips can be determined from</span>\n<marimo-tex class=\"arithmatex\">||[T_{max}=F_{t1}-F_{t2}\u22c5r=\u0394 F_{t,max}\u22c5r||]</marimo-tex><span class=\"paragraph\">For this equation to be used, the belt tensions need to be determined independently of the transmitted torque. This can be done by relating the difference between the tensions, <marimo-tex class=\"arithmatex\">||(\\Delta F_t||)</marimo-tex> and the total frictional force around the wrap of the belt by </span>\n<marimo-tex class=\"arithmatex\">||[\u0394F_{t,max}=\u03bc N||]</marimo-tex><span class=\"paragraph\">where N is the total normal force the belt experiences from the pulley and can be defined by the radial force due to the side force, <marimo-tex class=\"arithmatex\">||(R_s||)</marimo-tex> and the reduction of it by the centrifugal force, <marimo-tex class=\"arithmatex\">||(F_c||)</marimo-tex> given resulting in </span>\n<marimo-tex class=\"arithmatex\">||[\\Delta F_{t,max} = \\frac{\\mu}{sin\\beta} (R_s-F_c )=f' (R-F_c)||]</marimo-tex><span class=\"paragraph\">That means that the max transmittable torque is</span>\n<marimo-tex class=\"arithmatex\">||[T_{max}=f' (R_s-F_c )\u22c5r||]</marimo-tex></span>"}, "type": "data"}]}, {"code_hash": "99394e590ee4e7b49fc091876176a6b9", "console": [], "id": "ulZA", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "f3d9e19d6a3d520e9813e8e577738ac9", "console": [], "id": "ecfG", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h2 id=\"kohlerrehlko-engine-torque-curve\">Kohler/Rehlko Engine Torque Curve</h2>\n<span class=\"paragraph\">Below is the power and torque curve for the rule-compliant Rehlko/Kohler engine with the Baja SAE restrictor plate installed. It has been converted into metric units from the original that was provided by Baja SAE (2025)</span>\n<span class=\"paragraph\">It is then coded in a function to be used in the algorithm:</span>\n<marimo-tex class=\"arithmatex\">||[ T_{engine} = -2\\times 10^{-6} \\cdot  rpm^2 + 0.0058\\cdot rpm + 22.536 ||]</marimo-tex></span>"}, "type": "data"}]}, {"code_hash": "6ef10ac7ce6c36e06978aa2398d16897", "console": [], "id": "Pvdt", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "4c7481e2e6407992bdcead95c79021b2", "console": [], "id": "ZBYS", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h2 id=\"misc-usefull-functions\">Misc. Usefull Functions</h2></span>"}, "type": "data"}]}, {"code_hash": "fd037e3fa27a278f5583ce1b76c0b887", "console": [], "id": "aLJB", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "fa3b75c3c7fd0bf05f8faa04ca5c66ed", "console": [], "id": "nHfw", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h1 id=\"old-model-for-comparison\">Old Model for Comparison</h1></span>"}, "type": "data"}]}, {"code_hash": "fe7ab388b58ca3e83ecad067f88dc911", "console": [{"name": "stdout", "text": "shift: 0, took 5 iterations\nshift: 0.25, took 4 iterations\nshift: 0.5, took 4 iterations\nshift: 0.75, took 3 iterations\nshift: 1.0, took 2 iterations\n", "type": "stream"}], "id": "xXTn", "outputs": [{"data": {"text/html": "<marimo-ui-element object-id='xXTn-0' random-id='b52523df-2e2a-8122-9cc4-958007e075ef'><marimo-plotly data-initial-value='{}' data-label='null' data-figure='{&quot;data&quot;:[{&quot;line&quot;:{&quot;color&quot;:&quot;grey&quot;,&quot;dash&quot;:&quot;dot&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Low &amp; High Ratios&quot;,&quot;x&quot;:{&quot;dtype&quot;:&quot;f8&quot;,&quot;bdata&quot;:&quot;BIfKI+zYjEAAAAAAAAAAABvvqhYeRbJA&quot;},&quot;y&quot;:[3700,0,3700],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;green&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Ideal shift (3500rpm)&quot;,&quot;x&quot;:[0,4677.11753338182],&quot;y&quot;:[3500,3500],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;red&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Governor&quot;,&quot;x&quot;:[0,4677.11753338182],&quot;y&quot;:[3700,3700],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;grey&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines&quot;,&quot;name&quot;:&quot;Idle&quot;,&quot;x&quot;:[0,4677.11753338182],&quot;y&quot;:[1800,1800],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;#B6E880&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Old Model [(7, 3, 8, 0, 0)]&quot;,&quot;x&quot;:{&quot;dtype&quot;:&quot;f8&quot;,&quot;bdata&quot;:&quot;AAAAAAAAAABbfzQUVWeMQNYM1py2xZFAdNcPQM+bl0D+WHxpDCyhQDNy9KXG47BA&quot;},&quot;y&quot;:[1930.7705770581872,3671.8502314154625,3674.195970042176,3657.595275155048,3541.4072656820194,3466.0829567829646],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;#FF6692&quot;,&quot;dash&quot;:&quot;dash&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;Old Model Diameter Fix [(7, 3, 8, 0, 0)]&quot;,&quot;x&quot;:{&quot;dtype&quot;:&quot;f8&quot;,&quot;bdata&quot;:&quot;AAAAAAAAAABf7/98SM6LQERMaQIsMJFAKFHliBvolkD+WHxpDCyhQDNy9KXG47BA&quot;},&quot;y&quot;:[1930.7705770581872,3594.564027337139,3553.4313331272765,3548.843133267158,3541.4072656820194,3466.0829567829646],&quot;type&quot;:&quot;scatter&quot;},{&quot;line&quot;:{&quot;color&quot;:&quot;#19D3F3&quot;,&quot;dash&quot;:&quot;dot&quot;},&quot;mode&quot;:&quot;lines+markers&quot;,&quot;name&quot;:&quot;New Model [(7, 3, 8, 0, 0)]&quot;,&quot;x&quot;:{&quot;dtype&quot;:&quot;f8&quot;,&quot;bdata&quot;:&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9DbYGGdhEBJ5yAZrveLQFIAygklUZFAfVccTkshl0C+8uWoHVqhQBK9e34XILFAYZRelpMHskA=&quot;},&quot;y&quot;:[1930.7705770581872,2030.41650898343,2637.6110634446663,2664.95182451835,3615.4684860570865,3580.0590359155294,3583.4513462675463,3578.5186244462075,3514.4341159551122,3700],&quot;type&quot;:&quot;scatter&quot;}],&quot;layout&quot;:{&quot;template&quot;:{&quot;data&quot;:{&quot;barpolar&quot;:[{&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;barpolar&quot;}],&quot;bar&quot;:[{&quot;error_x&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;error_y&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;marker&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;,&quot;width&quot;:0.5},&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;bar&quot;}],&quot;carpet&quot;:[{&quot;aaxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;baxis&quot;:{&quot;endlinecolor&quot;:&quot;#2a3f5f&quot;,&quot;gridcolor&quot;:&quot;#C8D4E3&quot;,&quot;linecolor&quot;:&quot;#C8D4E3&quot;,&quot;minorgridcolor&quot;:&quot;#C8D4E3&quot;,&quot;startlinecolor&quot;:&quot;#2a3f5f&quot;},&quot;type&quot;:&quot;carpet&quot;}],&quot;choropleth&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;choropleth&quot;}],&quot;contourcarpet&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;contourcarpet&quot;}],&quot;contour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;contour&quot;}],&quot;heatmap&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;heatmap&quot;}],&quot;histogram2dcontour&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2dcontour&quot;}],&quot;histogram2d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;histogram2d&quot;}],&quot;histogram&quot;:[{&quot;marker&quot;:{&quot;pattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2}},&quot;type&quot;:&quot;histogram&quot;}],&quot;mesh3d&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;type&quot;:&quot;mesh3d&quot;}],&quot;parcoords&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;parcoords&quot;}],&quot;pie&quot;:[{&quot;automargin&quot;:true,&quot;type&quot;:&quot;pie&quot;}],&quot;scatter3d&quot;:[{&quot;line&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatter3d&quot;}],&quot;scattercarpet&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattercarpet&quot;}],&quot;scattergeo&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergeo&quot;}],&quot;scattergl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattergl&quot;}],&quot;scattermapbox&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermapbox&quot;}],&quot;scattermap&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scattermap&quot;}],&quot;scatterpolargl&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolargl&quot;}],&quot;scatterpolar&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterpolar&quot;}],&quot;scatter&quot;:[{&quot;fillpattern&quot;:{&quot;fillmode&quot;:&quot;overlay&quot;,&quot;size&quot;:10,&quot;solidity&quot;:0.2},&quot;type&quot;:&quot;scatter&quot;}],&quot;scatterternary&quot;:[{&quot;marker&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;type&quot;:&quot;scatterternary&quot;}],&quot;surface&quot;:[{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;},&quot;colorscale&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;type&quot;:&quot;surface&quot;}],&quot;table&quot;:[{&quot;cells&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#EBF0F8&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;header&quot;:{&quot;fill&quot;:{&quot;color&quot;:&quot;#C8D4E3&quot;},&quot;line&quot;:{&quot;color&quot;:&quot;white&quot;}},&quot;type&quot;:&quot;table&quot;}]},&quot;layout&quot;:{&quot;annotationdefaults&quot;:{&quot;arrowcolor&quot;:&quot;#2a3f5f&quot;,&quot;arrowhead&quot;:0,&quot;arrowwidth&quot;:1},&quot;autotypenumbers&quot;:&quot;strict&quot;,&quot;coloraxis&quot;:{&quot;colorbar&quot;:{&quot;outlinewidth&quot;:0,&quot;ticks&quot;:&quot;&quot;}},&quot;colorscale&quot;:{&quot;diverging&quot;:[[0,&quot;#8e0152&quot;],[0.1,&quot;#c51b7d&quot;],[0.2,&quot;#de77ae&quot;],[0.3,&quot;#f1b6da&quot;],[0.4,&quot;#fde0ef&quot;],[0.5,&quot;#f7f7f7&quot;],[0.6,&quot;#e6f5d0&quot;],[0.7,&quot;#b8e186&quot;],[0.8,&quot;#7fbc41&quot;],[0.9,&quot;#4d9221&quot;],[1,&quot;#276419&quot;]],&quot;sequential&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]],&quot;sequentialminus&quot;:[[0.0,&quot;#0d0887&quot;],[0.1111111111111111,&quot;#46039f&quot;],[0.2222222222222222,&quot;#7201a8&quot;],[0.3333333333333333,&quot;#9c179e&quot;],[0.4444444444444444,&quot;#bd3786&quot;],[0.5555555555555556,&quot;#d8576b&quot;],[0.6666666666666666,&quot;#ed7953&quot;],[0.7777777777777778,&quot;#fb9f3a&quot;],[0.8888888888888888,&quot;#fdca26&quot;],[1.0,&quot;#f0f921&quot;]]},&quot;colorway&quot;:[&quot;#636efa&quot;,&quot;#EF553B&quot;,&quot;#00cc96&quot;,&quot;#ab63fa&quot;,&quot;#FFA15A&quot;,&quot;#19d3f3&quot;,&quot;#FF6692&quot;,&quot;#B6E880&quot;,&quot;#FF97FF&quot;,&quot;#FECB52&quot;],&quot;font&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;},&quot;geo&quot;:{&quot;bgcolor&quot;:&quot;white&quot;,&quot;lakecolor&quot;:&quot;white&quot;,&quot;landcolor&quot;:&quot;white&quot;,&quot;showlakes&quot;:true,&quot;showland&quot;:true,&quot;subunitcolor&quot;:&quot;#C8D4E3&quot;},&quot;hoverlabel&quot;:{&quot;align&quot;:&quot;left&quot;},&quot;hovermode&quot;:&quot;closest&quot;,&quot;mapbox&quot;:{&quot;style&quot;:&quot;light&quot;},&quot;paper_bgcolor&quot;:&quot;white&quot;,&quot;plot_bgcolor&quot;:&quot;white&quot;,&quot;polar&quot;:{&quot;angularaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;radialaxis&quot;:{&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;scene&quot;:{&quot;xaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;yaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;},&quot;zaxis&quot;:{&quot;backgroundcolor&quot;:&quot;white&quot;,&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;gridwidth&quot;:2,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;showbackground&quot;:true,&quot;ticks&quot;:&quot;&quot;,&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;}},&quot;shapedefaults&quot;:{&quot;line&quot;:{&quot;color&quot;:&quot;#2a3f5f&quot;}},&quot;ternary&quot;:{&quot;aaxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;baxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;},&quot;bgcolor&quot;:&quot;white&quot;,&quot;caxis&quot;:{&quot;gridcolor&quot;:&quot;#DFE8F3&quot;,&quot;linecolor&quot;:&quot;#A2B1C6&quot;,&quot;ticks&quot;:&quot;&quot;}},&quot;title&quot;:{&quot;x&quot;:0.05},&quot;xaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2},&quot;yaxis&quot;:{&quot;automargin&quot;:true,&quot;gridcolor&quot;:&quot;#EBF0F8&quot;,&quot;linecolor&quot;:&quot;#EBF0F8&quot;,&quot;ticks&quot;:&quot;&quot;,&quot;title&quot;:{&quot;standoff&quot;:15},&quot;zerolinecolor&quot;:&quot;#EBF0F8&quot;,&quot;zerolinewidth&quot;:2}}},&quot;yaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;Engine/Primary Speed [RPM]&quot;},&quot;range&quot;:[1000,4500],&quot;showgrid&quot;:true},&quot;title&quot;:{&quot;text&quot;:&quot;Old vs Fix vs New&quot;,&quot;x&quot;:0.5,&quot;xanchor&quot;:&quot;center&quot;},&quot;legend&quot;:{&quot;font&quot;:{&quot;size&quot;:10},&quot;yanchor&quot;:&quot;bottom&quot;,&quot;y&quot;:-0.4,&quot;xanchor&quot;:&quot;center&quot;,&quot;x&quot;:0.5,&quot;orientation&quot;:&quot;h&quot;,&quot;traceorder&quot;:&quot;normal&quot;,&quot;itemsizing&quot;:&quot;constant&quot;},&quot;dragmode&quot;:&quot;zoom&quot;,&quot;xaxis&quot;:{&quot;title&quot;:{&quot;text&quot;:&quot;Secondary Speed [RPM]&quot;},&quot;showgrid&quot;:true},&quot;showlegend&quot;:true,&quot;hovermode&quot;:&quot;closest&quot;}}' data-config='{}'></marimo-plotly></marimo-ui-element>"}, "type": "data"}]}, {"code_hash": "0947755fcebf02bcf7b9b5b305d9f73e", "console": [], "id": "AjVT", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "c6c2f3de840c4810274885da8b5cd881", "console": [], "id": "pHFh", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": null, "console": [], "id": "NCOB", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}], "metadata": {"marimo_version": "0.16.3"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.16.3%22%0Aapp%20%3D%20marimo.App(width%3D%22medium%22)%0A%0Awith%20app.setup%3A%0A%20%20%20%20%23%20Initialization%20code%20that%20runs%20before%20all%20other%20cells%0A%20%20%20%20import%20numpy%20as%20np%0A%20%20%20%20import%20plotly.graph_objs%20as%20go%0A%20%20%20%20from%20matplotlib%20import%20pyplot%20as%20plt%0A%20%20%20%20from%20numpy%20import%20pi%20as%20pi%0A%20%20%20%20from%20numpy%20import%20tan%20as%20tan%0A%0A%20%20%20%20from%20CVT_Parts_2025%20import%20FW%2C%20PS%2C%20SS%2C%20Helix%2C%20SPT%2C%20FW_names%2C%20PS_names%2C%20SPT_names%0A%0A%20%20%20%20from%20CVT_Plotting_2025%20import%20plot_torque_transfer%2C%20plot_error%2C%20plot_radial_force%2C%20plot_cvt_error_convergence%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20return%20(mo%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20%23%20CVT%20Model%20Simulation%0A%20%20%20%20%23%23%23%20Interactive%20Simulation%20with%20Sliders%0A%20%20%20%20%23%23%23%23%20JL%20(Hannes)%20Pretorius%20-%20(2025)%0A%20%20%20%20-%20Simulates%20CVT%20performance%20for%20given%20parameters%0A%20%20%20%20-%20Includes%20sliders%20for%20interactive%20parameter%20adjustment%0A%20%20%20%20-%20Plots%20Engine%20RPM%20vs.%20Vehicle%20Speed%2C%20Radial%20Forces%2C%20and%20Errors%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20q_slider%20%3D%20mo.ui.slider(start%3D0%2C%20stop%3D8%2C%20step%3D1%2C%20value%3D7%2C)%0A%20%20%20%20w_slider%20%3D%20mo.ui.slider(start%3D0%2C%20stop%3D6%2C%20step%3D1%2C%20value%3D3%2C)%0A%20%20%20%20e_slider%20%3D%20mo.ui.slider(start%3D0%2C%20stop%3D9%2C%20step%3D1%2C%20value%3D8%2C)%0A%20%20%20%20r_slider%20%3D%20mo.ui.slider(start%3D0%2C%20stop%3D4%2C%20step%3D1%2C%20value%3D0%2C)%0A%20%20%20%20t_slider%20%3D%20mo.ui.slider(start%3D0%2C%20stop%3D2%2C%20step%3D1%2C%20value%3D0%2C)%0A%20%20%20%20goal_slider%20%3D%20mo.ui.slider(start%3D3000%2C%20stop%3D3800%2C%20step%3D50%2C%20value%3D3600)%0A%20%20%20%20shim_slider%20%3D%20mo.ui.slider(start%3D0%2C%20stop%3D15%2C%20step%3D1%2C%20value%3D0)%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20e_slider%2C%0A%20%20%20%20%20%20%20%20goal_slider%2C%0A%20%20%20%20%20%20%20%20q_slider%2C%0A%20%20%20%20%20%20%20%20r_slider%2C%0A%20%20%20%20%20%20%20%20shim_slider%2C%0A%20%20%20%20%20%20%20%20t_slider%2C%0A%20%20%20%20%20%20%20%20w_slider%2C%0A%20%20%20%20)%0A%0A%0A%40app.cell%0Adef%20_(%0A%20%20%20%20e_slider%2C%0A%20%20%20%20goal_slider%2C%0A%20%20%20%20q_slider%2C%0A%20%20%20%20r_slider%2C%0A%20%20%20%20shim_slider%2C%0A%20%20%20%20t_slider%2C%0A%20%20%20%20w_slider%2C%0A)%3A%0A%20%20%20%20%23%20General%20CVT%20parameters%20for%20plotting%0A%20%20%20%20GR%20%3D%2011.3%0A%20%20%20%20CVTH%20%3D%200.75%0A%20%20%20%20CVTL%20%3D%203.8%0A%20%20%20%20TRL%20%3D%20GR%20*%20CVTL%0A%20%20%20%20TRH%20%3D%20GR%20*%20CVTH%0A%20%20%20%20ErpmMax%20%3D%203700%0A%20%20%20%20ErpmMin%20%3D%201800%0A%20%20%20%20Wdia%20%3D%2023%20*%200.0254%0A%20%20%20%20Wcirc%20%3D%201.74%0A%20%20%20%20Vsmax%20%3D%20ErpmMax%20%2F%20TRH%20%2F%2060%20*%20Wcirc%20*%203.6%0A%20%20%20%20Vsmin%20%3D%20ErpmMax%20%2F%20TRL%20%2F%2060%20*%20Wcirc%20*%203.6%0A%0A%20%20%20%20%23%20Run%20simulation%0A%20%20%20%20result%20%3D%20cvt_simulation(%0A%20%20%20%20%20%20%20%20q%3Dq_slider.value%2C%0A%20%20%20%20%20%20%20%20w%3Dw_slider.value%2C%0A%20%20%20%20%20%20%20%20e%3De_slider.value%2C%0A%20%20%20%20%20%20%20%20r%3Dr_slider.value%2C%0A%20%20%20%20%20%20%20%20t%3Dt_slider.value%2C%0A%20%20%20%20%20%20%20%20goal%3Dgoal_slider.value%2C%0A%20%20%20%20%20%20%20%20shim%3Dshim_slider.value%2C%0A%20%20%20%20)%0A%0A%20%20%20%20q%3Dq_slider.value%0A%20%20%20%20w%3Dw_slider.value%0A%20%20%20%20e%3De_slider.value%0A%20%20%20%20r%3Dr_slider.value%0A%20%20%20%20t%3Dt_slider.value%0A%20%20%20%20shim%3Dshim_slider.value%0A%0A%20%20%20%20%23%20Part%20names%0A%20%20%20%20FWn%20%3D%20FW_names()%0A%20%20%20%20PSn%20%3D%20PS_names()%0A%20%20%20%20SSn%20%3D%20np.array(%5B%22Red%22%2C%20%22Black%22%2C%20%22Silver%22%5D)%0A%20%20%20%20SPTn%20%3D%20SPT_names()%0A%0A%20%20%20%20rpm_idle_max%20%3D%20result%5B'Idle_rpm'%5D%0A%20%20%20%20rpm_eng%20%3D%20result%5B'Engage_rpm'%5D%0A%20%20%20%20rpm_clu%20%3D%20result%5B'Clutch_rpm'%5D%0A%20%20%20%20engine_rpms%20%3D%20result%5B'engine_rpms'%5D%0A%20%20%20%20veh_speed%20%3D%20result%5B'veh_speed'%5D%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20ErpmMax%2C%0A%20%20%20%20%20%20%20%20ErpmMin%2C%0A%20%20%20%20%20%20%20%20FWn%2C%0A%20%20%20%20%20%20%20%20GR%2C%0A%20%20%20%20%20%20%20%20PSn%2C%0A%20%20%20%20%20%20%20%20SPTn%2C%0A%20%20%20%20%20%20%20%20SSn%2C%0A%20%20%20%20%20%20%20%20Vsmax%2C%0A%20%20%20%20%20%20%20%20Vsmin%2C%0A%20%20%20%20%20%20%20%20Wdia%2C%0A%20%20%20%20%20%20%20%20e%2C%0A%20%20%20%20%20%20%20%20engine_rpms%2C%0A%20%20%20%20%20%20%20%20q%2C%0A%20%20%20%20%20%20%20%20r%2C%0A%20%20%20%20%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20rpm_clu%2C%0A%20%20%20%20%20%20%20%20rpm_eng%2C%0A%20%20%20%20%20%20%20%20rpm_idle_max%2C%0A%20%20%20%20%20%20%20%20shim%2C%0A%20%20%20%20%20%20%20%20t%2C%0A%20%20%20%20%20%20%20%20veh_speed%2C%0A%20%20%20%20%20%20%20%20w%2C%0A%20%20%20%20)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(%0A%20%20%20%20e_slider%2C%0A%20%20%20%20goal_slider%2C%0A%20%20%20%20mo%2C%0A%20%20%20%20q_slider%2C%0A%20%20%20%20r_slider%2C%0A%20%20%20%20shim_slider%2C%0A%20%20%20%20t_slider%2C%0A%20%20%20%20w_slider%2C%0A)%3A%0A%20%20%20%20mo.vstack(%5B%0A%20%20%20%20%20%20%20%20mo.md(f%22**Goal%20RPM**%3A%20%7Bgoal_slider.value%7D%20%7Bgoal_slider%7D%22)%2C%0A%20%20%20%20%20%20%20%20mo.hstack(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20mo.md(f%22**Flyweights**%3A%20%7Bq_slider.value%7D%20%7Bq_slider%7D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mo.md(f%22**Primary%20Spring**%3A%20%7Bw_slider.value%7D%20%7Bw_slider%7D%22)%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20mo.md(f%22**Shim**%3A%20%7Bshim_slider.value%7D%20mm%20%7Bshim_slider%7D%22)%0A%20%20%20%20%20%20%20%20%5D%2C%20justify%3D%22start%22)%2C%0A%20%20%20%20%20%20%20%20mo.hstack(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20mo.md(f%22**Ramp%20Angle**%3A%20%7Be_slider.value%7D%20%7Be_slider%7D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mo.md(f%22**Pretension**%3A%20%7Br_slider.value%7D%20%7Br_slider%7D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mo.md(f%22**Secondary%20Spring**%3A%20%7Bt_slider.value%7D%20%7Bt_slider%7D%22)%2C%0A%0A%20%20%20%20%20%20%20%20%5D%2C%20justify%3D%22start%22)%0A%20%20%20%20%5D)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(%0A%20%20%20%20ErpmMax%2C%0A%20%20%20%20ErpmMin%2C%0A%20%20%20%20FWn%2C%0A%20%20%20%20PSn%2C%0A%20%20%20%20SPTn%2C%0A%20%20%20%20SSn%2C%0A%20%20%20%20Vsmax%2C%0A%20%20%20%20Vsmin%2C%0A%20%20%20%20e%2C%0A%20%20%20%20e_slider%2C%0A%20%20%20%20engine_rpms%2C%0A%20%20%20%20goal_slider%2C%0A%20%20%20%20mo%2C%0A%20%20%20%20q%2C%0A%20%20%20%20q_slider%2C%0A%20%20%20%20r%2C%0A%20%20%20%20r_slider%2C%0A%20%20%20%20result%2C%0A%20%20%20%20rpm_clu%2C%0A%20%20%20%20rpm_eng%2C%0A%20%20%20%20rpm_idle_max%2C%0A%20%20%20%20shim%2C%0A%20%20%20%20shim_slider%2C%0A%20%20%20%20t%2C%0A%20%20%20%20t_slider%2C%0A%20%20%20%20veh_speed%2C%0A%20%20%20%20w%2C%0A%20%20%20%20w_slider%2C%0A)%3A%0A%20%20%20%20%23%20Display%20plots%20and%20simulation%20results%0A%20%20%20%20info%20%3D%20True%0A%20%20%20%20vert%20%3D%20True%0A%20%20%20%20%23%20Generate%20plots%0A%20%20%20%20plots%20%3D%20plot_simulation(%0A%20%20%20%20%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20q%3Dq_slider.value%2C%0A%20%20%20%20%20%20%20%20w%3Dw_slider.value%2C%0A%20%20%20%20%20%20%20%20e%3De_slider.value%2C%0A%20%20%20%20%20%20%20%20r%3Dr_slider.value%2C%0A%20%20%20%20%20%20%20%20t%3Dt_slider.value%2C%0A%20%20%20%20%20%20%20%20shim%3Dshim_slider.value%2C%0A%20%20%20%20%20%20%20%20goal%3Dgoal_slider.value%2C%0A%20%20%20%20%20%20%20%20Vsmin%3DVsmin%2C%0A%20%20%20%20%20%20%20%20Vsmax%3DVsmax%2C%0A%20%20%20%20%20%20%20%20ErpmMax%3DErpmMax%2C%0A%20%20%20%20%20%20%20%20ErpmMin%3DErpmMin%0A%20%20%20%20)%0A%0A%20%20%20%20if%20info%20%3D%3D%20True%20%26%20vert%20%3D%3D%20False%3A%0A%20%20%20%20%20%20%20%20mo.output.append(%0A%20%20%20%20%20%20%20%20%20%20%20%20mo.vstack(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.hstack(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.ui.plotly(plots%5B'main_plot'%5D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%22%22%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**CVT%20Setup%3A**%20%7B%5Bq%2Cw%2Ce%2Cr%2Ct%5D%7D%20-%20%7Bshim%3A.0f%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Flyweight%20%5B%7Bq%7D%5D%3A**%20%7BFWn%5Bq%5D%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Spring%201%20%5B%7Bw%7D%5D%3A**%20%7BPSn%5Bw%5D%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Shim%3A**%20%7Bshim%3A.0f%7Dmm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Ramp%20Angle%20%5B%7Be%7D%5D%3A**%20%7Be*2%20%2B32%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Pretension%20%5B%7Br%7D%5D%3A**%20%7BSPTn%5Br%5D%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Spring%202%20%5B%7Bt%7D%5D%3A**%20%7BSSn%5Bt%5D%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Useful%20Output%20Parameters%3A**%20%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Max%20Idle%3A%20%7Brpm_idle_max%3A.0f%7D%20rpm%20%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Engagement%3A%20%7Brpm_eng%3A.0f%7D%20rpm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Low%20Gear%3A%20%7Brpm_clu%3A.0f%7D%20rpm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Ave.%20Shift%3A%20%7Bnp.average(engine_rpms%5B4%3A%5D)%3A.0f%7D%20rpm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Shift%20Bandwidth%20%3A%20%7Bnp.max(engine_rpms%5B4%3A%5D)-np.min(engine_rpms%5B4%3A%5D)%3A.0f%7D%20rpm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Max.%20Speed%3A%20%7Bveh_speed%5B-1%5D%3A.0f%7Dkm%2Fh%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22)%2C%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2Cwidths%3D%5B4%2C1%5D)%5D))%0A%20%20%20%20if%20info%20%3D%3D%20True%20%26%20vert%20%3D%3D%20True%3A%0A%20%20%20%20%20%20%20%20mo.output.append(%0A%20%20%20%20%20%20%20%20%20%20%20%20mo.vstack(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.ui.plotly(plots%5B'main_plot'%5D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.hstack(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Primary%20Parts%3A**%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**CVT%20Setup%3A**%20%7B%5Bq%2Cw%2Ce%2Cr%2Ct%5D%7D%20-%20%7Bshim%3A.0f%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Flyweight%20%5B%7Bq%7D%5D%3A**%20%7BFWn%5Bq%5D%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Spring%201%20%5B%7Bw%7D%5D%3A**%20%7BPSn%5Bw%5D%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Shim%3A**%20%7Bshim%3A.0f%7Dmm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Secondary%20Parts**%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Ramp%20Angle%20%5B%7Be%7D%5D%3A**%20%7Be*2%20%2B32%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Pretension%20%5B%7Br%7D%5D%3A**%20%7BSPTn%5Br%5D%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Spring%202%20%5B%7Bt%7D%5D%3A**%20%7BSSn%5Bt%5D%7D%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20**Useful%20Output%20Parameters%3A**%20%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Max%20Idle%3A%20%7Brpm_idle_max%3A.0f%7D%20rpm%20%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Engagement%3A%20%7Brpm_eng%3A.0f%7D%20rpm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Low%20Gear%3A%20%7Brpm_clu%3A.0f%7D%20rpm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Ave.%20Shift%3A%20%7Bnp.average(engine_rpms%5B4%3A%5D)%3A.0f%7D%20rpm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Shift%20Bandwidth%20%3A%20%7Bnp.max(engine_rpms%5B4%3A%5D)-np.min(engine_rpms%5B4%3A%5D)%3A.0f%7D%20rpm%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-%20Max.%20Speed%3A%20%7Bveh_speed%5B-1%5D%3A.0f%7Dkm%2Fh%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2Cwidths%3D%5B1%2C1%2C1%5D)%5D))%0A%0A%20%20%20%20if%20info%20%3D%3D%20False%3A%0A%20%20%20%20%20%20%20%20mo.output.append(%20%0A%20%20%20%20%20%20%20%20%20%20%20%20mo.vstack(%5Bmo.ui.plotly(plots%5B'main_plot'%5D)%5D))%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(e%2C%20q%2C%20r%2C%20result%2C%20shim%2C%20t%2C%20w)%3A%0A%20%20%20%20plot_radial_force(result%2C%20q%2C%20w%2C%20e%2C%20r%2C%20t%2C%20shim)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(e%2C%20q%2C%20r%2C%20result%2C%20shim%2C%20t%2C%20w)%3A%0A%20%20%20%20plot_torque_transfer(result%2C%20q%2C%20w%2C%20e%2C%20r%2C%20t%2C%20shim)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(e%2C%20q%2C%20r%2C%20result%2C%20shim%2C%20t%2C%20w)%3A%0A%20%20%20%20plot_error(result%2C%20q%2C%20w%2C%20e%2C%20r%2C%20t%2Cshim)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(result)%3A%0A%20%20%20%20plot_cvt_error_convergence(result)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20%23%20Mathematical%20Model%0A%20%20%20%20The%20function%20below%20defines%20al%20the%20different%20stages%20the%20shifting%20curve%20and%20calculate%20all%20the%20applicable%20parameters%20for%20plotting%20or%20further%20calculations%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20cvt_simulation(q%3D7%2C%20w%3D3%2C%20e%3D8%2C%20r%3D1%2C%20t%3D1%2C%20goal%3D3400%2C%20shim%3D0%2C%20no_T2%3DFalse)%3A%0A%20%20%20%20%22%22%22%0A%20%20%20%20Simulate%20CVT%20based%20on%20parameters.%0A%0A%20%20%20%20Parameters%3A%0A%20%20%20%20q%3A%20Flyweights%20index%20(0-8)%0A%20%20%20%20w%3A%20Primary%20spring%20index%20(0-6)%0A%20%20%20%20e%3A%20Ramp%20angle%20index%20(0-9)%0A%20%20%20%20r%3A%20Secondary%20pretension%20index%20(0-4)%0A%20%20%20%20t%3A%20Secondary%20spring%20index%20(0-2)%0A%20%20%20%20goal%3A%20Peak%20power%20RPM%0A%20%20%20%20shim%3A%20Spring%20shim%20displacement%0A%20%20%20%20%22%22%22%0A%20%20%20%20%23%20Initialize%20part%20parameters%0A%20%20%20%20FWs%20%3D%20FW()%0A%20%20%20%20PSs%20%3D%20PS()%0A%20%20%20%20SSs%20%3D%20SS()%0A%20%20%20%20Ramps%20%3D%20Helix()%0A%20%20%20%20SPTs%20%3D%20SPT()%0A%0A%20%20%20%20%23%20Belt%20parameters%0A%20%20%20%20L%20%3D%201.0414%0A%20%20%20%20M%20%3D%200.365%0A%20%20%20%20m_prime%20%3D%20M%20%2F%20L%0A%20%20%20%20beta%20%3D%20np.radians(12)%0A%0A%20%20%20%20%23%20General%20CVT%20parameters%0A%20%20%20%20cf%20%3D%200.625%20%20%23%20Effective%20Coeff.%20of%20Friction%0A%20%20%20%20GR%20%3D%2011.3%20%20%23%20Gear%20Reduction%20Ratio%0A%20%20%20%20CVTH%20%3D%200.76%20%20%23%20CVT%20High%20Ratio%0A%20%20%20%20CVTL%20%3D%203.8%20%20%23%20CVT%20Low%20Ratio%0A%20%20%20%20TRL%20%3D%20GR%20*%20CVTL%20%20%23%20Torque%20Ratio%20Low%0A%20%20%20%20TRH%20%3D%20GR%20*%20CVTH%20%20%23%20Torque%20Ratio%20High%0A%20%20%20%20ErpmMax%20%3D%203700%20%20%23%20Max%20engine%20RPM%0A%20%20%20%20ErpmMin%20%3D%201800%20%20%23%20Min%20engine%20RPM%0A%20%20%20%20Wdia%20%3D%2023%20*%200.0254%20%20%23%20wheel%20diameter%20in%20m%0A%20%20%20%20Wcirc%20%3D%201.74%20%20%23%20Wdia%20*%20np.pi%20%23%23%23%20needs%20calibration%0A%20%20%20%20Vsmax%20%3D%20ErpmMax%20%2F%20TRH%20%2F%2060%20*%20Wcirc%20*%203.6%20%20%23%20Max%20vehicle%20speed%20in%20km%2Fh%0A%20%20%20%20Vsmin%20%3D%20ErpmMax%20%2F%20TRL%20%2F%2060%20*%20Wcirc%20*%203.6%20%20%23%20Min%20vehicle%20speed%20in%20km%2Fh%0A%0A%20%20%20%20eff%20%3D%201%20%20%23%20Efficiency%20of%20torque%20transfer%20(Not%20used%202025)%0A%20%20%20%20floss%20%3D%201%20%23%20Friction%20Losses%20(Not%20used%202025)%0A%0A%20%20%20%20r_h%20%3D%200.045%20%20%23%20Torque%20Feedback%20Ramp%20Radius%0A%20%20%20%20P0%20%3D%2063.5%20%20%23%20static%20spring%20displacement%0A%20%20%20%20Peng%20%3D%2059%20%20%23%20Spring%20displacement%20when%20belt%20starts%20to%20engage%0A%20%20%20%20Pmax%20%3D%2030.226%20%20%23%20Spring%20displacement%20when%20clutch%20is%20fully%20shifted%0A%0A%20%20%20%20w_goal%20%3D%20goal*%20np.pi%2F30%0A%20%20%20%20T1%20%3D%20engTorq(w_goal)%0A%0A%20%20%20%20%23%20Part%20names%20(for%20reference%2C%20optional%20output)%0A%20%20%20%20FWn%20%3D%20FW_names()%0A%20%20%20%20PSn%20%3D%20PS_names()%0A%20%20%20%20SSn%20%3D%20np.array(%5B%22Red%22%2C%20%22Black%22%2C%20%22Silver%22%5D)%0A%20%20%20%20SPTn%20%3D%20SPT_names()%0A%0A%20%20%20%20%23%20Initialize%20lists%0A%20%20%20%20ys%20%3D%20%5B%5D%20%20%23%20Shift%20percentage%0A%20%20%20%20F1_plt%20%3D%20%5B%5D%20%20%23%20Primary%20Side%20Force%0A%20%20%20%20F2_plt%20%3D%20%5B%5D%20%20%23%20Secondary%20Side%20Force%0A%20%20%20%20F2_err_plt%20%3D%20%5B%5D%0A%20%20%20%20Fc1_plt%20%3D%20%5B%5D%20%20%23%20Primary%20Centrifugal%20Force%0A%20%20%20%20Fc2_plt%20%3D%20%5B%5D%20%20%23%20Secondary%20Centrifugal%20Force%0A%20%20%20%20Rs1_plt%20%3D%20%5B%5D%20%20%23%20Primary%20Side%20to%20Radial%20Force%0A%20%20%20%20Rs2_plt%20%3D%20%5B%5D%20%20%23%20Secondary%20Side%20to%20Radial%20Force%0A%20%20%20%20R1_plt%20%3D%20%5B%5D%20%20%23%20Total%20Primary%20Radial%20Force%0A%20%20%20%20R2_plt%20%3D%20%5B%5D%20%20%23%20Total%20Secondary%20Radial%20Force%0A%20%20%20%20T1_plt%20%3D%20%5B%5D%0A%20%20%20%20T2_plt%20%3D%20%5B%5D%0A%20%20%20%20Terr_plt%20%3D%20%5B%5D%0A%20%20%20%20Tmax1_plt%20%3D%20%5B%5D%20%20%23%20Required%20Primary%20Force%0A%20%20%20%20Tmax2_plt%20%3D%20%5B%5D%20%20%23%20Required%20Primary%20Force%0A%0A%20%20%20%20veh_speed%20%3D%20%5B%5D%0A%20%20%20%20engine_rpms%20%3D%20%5B%5D%0A%0A%20%20%20%20T_err_history%20%3D%20%5B%5D%0A%20%20%20%20F2_err_history%20%3D%20%5B%5D%0A%0A%20%20%20%20slip%20%3D%200%0A%0A%20%20%20%20%23%20Flyweights%0A%20%20%20%20mfw%20%3D%20FWs%5Bq%2C%201%5D%20%20%23%20Flyweight%20Mass%0A%20%20%20%20MFW%20%3D%203%20*%20mfw%20%2F%201000%20%20%23%203%20flyweights%2C%20kg%0A%0A%20%20%20%20%23%20Primary%20spring%0A%20%20%20%20k1%20%3D%20PSs%5Bw%2C%202%5D%0A%20%20%20%20Ls%20%3D%20PSs%5Bw%2C%201%5D%0A%20%20%20%20f0%20%3D%20k1%20*%20(Ls%20-%20(P0%20-%20shim))%20%20%23%20Spring%20Force%20at%20no%20primary%20movement%0A%20%20%20%20feng%20%3D%20k1%20*%20(Ls%20-%20(Peng%20-%20shim))%20%20%23%20Spring%20Force%20at%20belt%20engagement%0A%20%20%20%20fs1x%20%3D%20k1%20*%20(Ls%20-%20(Peng%20-%20shim))%20%20%23%20Spring%20Force%20at%20zero%20shift%0A%20%20%20%20Fs1x%20%3D%20k1%20*%20(Ls%20-%20(Pmax%20-%20shim))%20%20%23%20Spring%20Force%20at%20full%20shift%0A%0A%20%20%20%20%23%20Secondary%20Ramp%20Angle%20%26%20Rotation%0A%20%20%20%20%22%22%22%20This%20will%20have%20to%20change%20for%20composite%20ramps%22%22%22%0A%20%20%20%20ramp_angle%20%3D%20Ramps%5Be%5D%20%2F%20180%20*%20pi%20%20%23%20Ramp%20Angle%20in%20radians%0A%20%20%20%20full_rotation%20%3D%20(28.575%20%2F%20tan(ramp_angle))%20%2F%20(pi%20*%2090)%20*%202%20*%20pi%0A%0A%20%20%20%20%23%20Secondary%20Pretension%0A%20%20%20%20pretension%20%3D%20SPTs%5B0%2C%20r%5D%20%2F%20180%20*%20pi%0A%0A%20%20%20%20%23%20Secondary%20spring%20forces%0A%20%20%20%20fs2x%20%3D%20SSs%5Bt%2C%200%5D%20%20%23%20Spring%20Compression%20Force%20at%20no%20shift%0A%20%20%20%20Fs2x%20%3D%20SSs%5Bt%2C%201%5D%20%20%23%20Spring%20Compression%20Force%20at%20full%20shift%0A%20%20%20%20f2t%20%3D%20SSs%5Bt%2C%202%5D%20*%20pretension%20%20%23%20Spring%20Torsion%20Moments%20at%20pretension%0A%20%20%20%20F2t%20%3D%20SSs%5Bt%2C%202%5D%20*%20(pretension%20%2B%20full_rotation)%20%20%23%20Spring%20Torsion%20Moments%20at%20full%20shift%0A%0A%20%20%20%20y%20%3D%200%20%23%20Shift%20Percentage%0A%20%20%20%20while%20y%20%3C%3D%201%3A%0A%20%20%20%20%20%20%20%20rsint%20%3D%20FWs%5Bq%2C%20(int(y%20*%204)%20%2B%203)%5D%20%20%23%20Flyweight%20geometric%20parameter%0A%0A%20%20%20%20%20%20%20%20cr%20%3D%203.83%20-%20y%20*%20(3.83%20-%200.76)%20%20%23%20Current%20ratio%0A%0A%20%20%20%20%20%20%20%20%23%20Pulley%20diameters%20and%20wrap%20angles%0A%20%20%20%20%20%20%20%20D1%2C%20D2%20%3D%20pulley_diameters(ratio%3Dcr)%0A%20%20%20%20%20%20%20%20r1%20%3D%20D1%20%2F%202%0A%20%20%20%20%20%20%20%20r2%20%3D%20D2%20%2F%202%0A%20%20%20%20%20%20%20%20phi_1%2C%20phi_2%20%3D%20wrap_angles(D1%2C%20D2)%0A%0A%20%20%20%20%20%20%20%20T2%20%3D%20T1%20*%20cr%20*%20eff%20*%20(0.1%20if%20no_T2%20else%201)%0A%0A%20%20%20%20%20%20%20%20%23%20Interpolating%20Spring%20Forces%0A%20%20%20%20%20%20%20%20Fs2t%20%3D%20f2t%20%2B%20y%20*%20(F2t%20-%20f2t)%20%20%23%20Secondary%20Torsion%0A%20%20%20%20%20%20%20%20Fs2%20%3D%20fs2x%20%2B%20y%20*%20(Fs2x%20-%20fs2x)%20%20%23%20Secondary%20Compression%0A%20%20%20%20%20%20%20%20Fs1%20%3D%20fs1x%20%2B%20y%20*%20(Fs1x%20-%20fs1x)%20%20%23%20Primary%20Compression%0A%0A%20%20%20%20%20%20%20%20if%20y%20%3D%3D%200%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Idle%20Speeds%0A%20%20%20%20%20%20%20%20%20%20%20%20rpm_idle%20%3D%20((f0%20%2F%20(MFW%20*%20rsint))**0.5)%20*%2060%20%2F%20(2%20*%20pi)%0A%20%20%20%20%20%20%20%20%20%20%20%20engine_rpms.append(rpm_idle)%0A%20%20%20%20%20%20%20%20%20%20%20%20veh_speed.append(0)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Max%20Idle%20Speed%0A%20%20%20%20%20%20%20%20%20%20%20%20rpm_idle_max%20%3D%20(60%20%2F%20(2%20*%20pi))%20*%20(feng%20%2F%20(MFW%20*%20rsint))**0.5%0A%20%20%20%20%20%20%20%20%20%20%20%20engine_rpms.append(rpm_idle_max)%0A%20%20%20%20%20%20%20%20%20%20%20%20veh_speed.append(0)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Engagement%20Speed%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%20%0A%20%20%20%20%20%20%20%20%20%20%20%20Mulamba%3A%20Check%20and%20Fix!%0A%20%20%20%20%20%20%20%20%20%20%20%20Why%20just%20add%20900%20rpm%20for%20engagement%3F!%20-%20It%20does%20match%20the%20data%20he%20got...%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20TRY%3A%20Use%20dynamic%20friction%20coefficient%20instead%20of%20static%20friction%20coeff.%0A%20%20%20%20%20%20%20%20%20%20%20%20TRY%3A%20From%20Aaen%2C%20not%20all%20torque%20from%20engine%20needs%20to%20be%20transmitted%20to%20get%20the%20vehicle%20moving%0A%20%20%20%20%20%20%20%20%20%20%20%20%3D%3D%3D%3D%3E%20Calculate%20the%20takeoff%20torque%20or%20use%20Wheel%20Force%20Transducer%20data%20to%20estimate%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20cf_dyn%20%3D%200.4%20*%20cf%20%23Guess%0A%20%20%20%20%20%20%20%20%20%20%20%20T_takeoff%20%3D%200.5%20*%20T1%20%23Guess%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20w_eng%20%3D%20(((T_takeoff%20*%20tan(beta)%20%2F%20(r1%20*%20cf_dyn))%20%2B%20feng)%20%2F%20(MFW%20*%20rsint))**0.5%0A%20%20%20%20%20%20%20%20%20%20%20%20rpm_eng%20%3D%20(60%20%2F%20(2%20*%20pi))%20*%20w_eng%0A%20%20%20%20%20%20%20%20%20%20%20%20engine_rpms.append(rpm_eng)%0A%20%20%20%20%20%20%20%20%20%20%20%20veh_speed.append(0)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Clutching%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22Use%20the%20engagement%20rpm%20just%20solved%20for%20to%20guess%20clutching%20engine%20and%20evalute%20the%20engine%20torque%20at%20that%20point%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20T1_clu%20%3D%20engTorq(w_eng)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20w_clu%20%3D%20(((T1_clu%20*%20tan(beta)%20%2F%20(r1%20*%20cf))%20%2B%20feng)%20%2F%20((MFW%20*%20rsint)%20-%20(m_prime%20*%20tan(beta)%20*%20phi_1%20*%20r1**2)))**0.5%0A%20%20%20%20%20%20%20%20%20%20%20%20rpm_clu%20%3D%20(60%20%2F%20(2%20*%20pi))%20*%20w_clu%0A%20%20%20%20%20%20%20%20%20%20%20%20vel_clu%20%3D%20rpm_clu%20%2F%20(cr%20*%2011.3)%20%2F%2060%20*%20Wcirc%20*%203.6%0A%20%20%20%20%20%20%20%20%20%20%20%20engine_rpms.append(rpm_clu)%0A%20%20%20%20%20%20%20%20%20%20%20%20veh_speed.append(vel_clu)%0A%0A%20%20%20%20%20%20%20%20%23%20Straight%20shift%20points%3A%0A%0A%20%20%20%20%20%20%20%20%23%23%20Iteration%20for%20convergence%0A%20%20%20%20%20%20%20%20T_factor%20%3D%200.1%20if%20no_T2%20else%201%20%23%20For%20testbench%20data%0A%20%20%20%20%20%20%20%20T1_guess%20%3D%20T1%0A%20%20%20%20%20%20%20%20err%20%3D%20float('inf')%0A%20%20%20%20%20%20%20%20tol%20%3D%201%20%20%23%20percent%20error%20bound%0A%20%20%20%20%20%20%20%20max_iter%20%3D%2050%0A%20%20%20%20%20%20%20%20iter_count%20%3D%200%0A%0A%20%20%20%20%20%20%20%20%23%23%23%20Lists%20to%20store%20errors%20for%20this%20shift%20point%0A%20%20%20%20%20%20%20%20T_err_iter%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20F2_err_iter%20%3D%20%5B%5D%0A%0A%0A%20%20%20%20%20%20%20%20while%20err%20%3E%20tol%20and%20iter_count%20%3C%20max_iter%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20T2_guess%20%3D%20T1_guess%20*%20cr%20*%20eff%20*%20T_factor%0A%20%20%20%20%20%20%20%20%20%20%20%20F2_guess%20%3D%20(0.5%20*%20T2_guess%20%2B%20Fs2t)%20%2F%20(r_h%20*%20tan(ramp_angle))%20%2B%20Fs2%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20denom%20%3D%20MFW%20*%20rsint%20%2B%20m_prime%20*%20tan(beta)%20*%20(phi_1%20*%20r1**2%20-%20phi_2%20*%20r2**2%20%2F%20cr**2)%0A%20%20%20%20%20%20%20%20%20%20%20%20w1%20%3D%20((F2_guess%20%2B%20Fs1)%20%2F%20denom)**0.5%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20T1_new%20%3D%20engTorq(w1)%0A%20%20%20%20%20%20%20%20%20%20%20%20T2_new%20%3D%20T1_new%20*%20cr%20*%20eff%20*%20T_factor%0A%20%20%20%20%20%20%20%20%20%20%20%20F2_new%20%3D%20(0.5%20*%20T2_new%20%2B%20Fs2t)%20%2F%20(r_h%20*%20tan(ramp_angle))%20%2B%20Fs2%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20T_err%20%3D%20percentError(T2_guess%2C%20T2_new)%0A%20%20%20%20%20%20%20%20%20%20%20%20F2_err%20%3D%20percentError(F2_guess%2C%20F2_new)%0A%20%20%20%20%20%20%20%20%20%20%20%20err%20%3D%20max(abs(T_err)%2C%20abs(F2_err))%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Store%20errors%20for%20this%20iteration%0A%20%20%20%20%20%20%20%20%20%20%20%20T_err_iter.append(T_err)%0A%20%20%20%20%20%20%20%20%20%20%20%20F2_err_iter.append(F2_err)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20T1_guess%20%3D%20T1_new%0A%20%20%20%20%20%20%20%20%20%20%20%20iter_count%20%2B%3D%201%0A%0A%20%20%20%20%20%20%20%20print(f%22shift%3A%20%7By%7D%2C%20took%20%7Biter_count%7D%20iterations%22)%0A%20%20%20%20%20%20%20%20%23%20Append%20error%20histories%20for%20this%20shift%20point%0A%20%20%20%20%20%20%20%20T_err_history.append(T_err_iter)%0A%20%20%20%20%20%20%20%20F2_err_history.append(F2_err_iter)%0A%0A%20%20%20%20%20%20%20%20%23%20Use%20converged%20values%0A%20%20%20%20%20%20%20%20rpm%20%3D%20w1%20*%2060%20%2F%20(2%20*%20pi)%0A%20%20%20%20%20%20%20%20engine_rpms.append(rpm)%0A%20%20%20%20%20%20%20%20veh_speed.append(rpm%20%2F%20(cr%20*%2011.3)%20%2F%2060%20*%20Wcirc%20*%203.6)%0A%0A%20%20%20%20%20%20%20%20%23%20Overrun%0A%20%20%20%20%20%20%20%20if%20y%20%3D%3D%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20engine_rpms.append(ErpmMax)%0A%20%20%20%20%20%20%20%20%20%20%20%20veh_speed.append(ErpmMax%20%2F%20(CVTH%20*%2011.3)%20%2F%2060%20*%20Wcirc%20*%203.6)%0A%0A%20%20%20%20%20%20%20%20F1%20%3D%20(MFW%20*%20rsint%20*%20(w1)**2%20-%20Fs1)%0A%20%20%20%20%20%20%20%20Fc1%20%3D%20Fc(m_prime%2C%20w1%2C%20r1%2C%20phi_1)%0A%20%20%20%20%20%20%20%20Rs1%20%3D%20F1%20%2F%20tan(beta)%0A%20%20%20%20%20%20%20%20R1%20%3D%20Fc1%20%2B%20Rs1%0A%0A%0A%20%20%20%20%20%20%20%20w2%20%3D%20w1%20%2F%20cr%0A%20%20%20%20%20%20%20%20Fc2%20%3D%20Fc(m_prime%2C%20w2%2C%20r2%2C%20phi_2)%0A%20%20%20%20%20%20%20%20Rs2%20%3D%20F2_new%20%2F%20tan(beta)%0A%20%20%20%20%20%20%20%20R2%20%3D%20Fc2%20%2B%20Rs2%0A%0A%20%20%20%20%20%20%20%20%23%20Use%20converged%20T1_new%20and%20T2_new%0A%20%20%20%20%20%20%20%20T_err%20%3D%20percentError(T2_guess%2C%20T2_new)%20%20%23%20should%20be%20small%20now%0A%20%20%20%20%20%20%20%20F2_err%20%3D%20percentError(F2_guess%2C%20F2_new)%0A%20%20%20%20%20%20%20%20Terr_plt.append(T_err)%0A%20%20%20%20%20%20%20%20F2_err_plt.append(F2_err)%0A%0A%20%20%20%20%20%20%20%20Tmax1%20%3D%20maxT(cf%2C%20Rs1%2C%20Fc1%2C%20r1)%0A%20%20%20%20%20%20%20%20Tmax2%20%3D%20maxT(cf%2C%20Rs2%2C%20Fc2%2C%20r2)%0A%20%20%20%20%20%20%20%20if%20Tmax1%20%3C%3D%20T1%20or%20Tmax2%20%3C%3D%20T2%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20slip%20%3D%201%0A%0A%20%20%20%20%20%20%20%20F1_plt.append(F1)%0A%20%20%20%20%20%20%20%20F2_plt.append(F2_new)%0A%20%20%20%20%20%20%20%20Fc1_plt.append(Fc1)%0A%20%20%20%20%20%20%20%20Fc2_plt.append(Fc2)%0A%20%20%20%20%20%20%20%20Rs1_plt.append(Rs1)%0A%20%20%20%20%20%20%20%20Rs2_plt.append(Rs2)%0A%20%20%20%20%20%20%20%20R1_plt.append(R1)%0A%20%20%20%20%20%20%20%20R2_plt.append(R2)%0A%20%20%20%20%20%20%20%20T1_plt.append(T1)%0A%20%20%20%20%20%20%20%20T2_plt.append(T2)%0A%20%20%20%20%20%20%20%20Tmax1_plt.append(Tmax1)%0A%20%20%20%20%20%20%20%20Tmax2_plt.append(Tmax2)%0A%20%20%20%20%20%20%20%20ys.append(y)%0A%0A%20%20%20%20%20%20%20%20y%20%2B%3D%200.25%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20'veh_speed'%3A%20veh_speed%2C%0A%20%20%20%20%20%20%20%20'engine_rpms'%3A%20engine_rpms%2C%0A%20%20%20%20%20%20%20%20'slip'%3A%20slip%2C%0A%20%20%20%20%20%20%20%20'ys'%3A%20ys%2C%0A%20%20%20%20%20%20%20%20'F1_plt'%3A%20F1_plt%2C%0A%20%20%20%20%20%20%20%20'F2_plt'%3A%20F2_plt%2C%0A%20%20%20%20%20%20%20%20'Fc1_plt'%3A%20Fc1_plt%2C%0A%20%20%20%20%20%20%20%20'Fc2_plt'%3A%20Fc2_plt%2C%0A%20%20%20%20%20%20%20%20'Rs1_plt'%3A%20Rs1_plt%2C%0A%20%20%20%20%20%20%20%20'Rs2_plt'%3A%20Rs2_plt%2C%0A%20%20%20%20%20%20%20%20'R1_plt'%3A%20R1_plt%2C%0A%20%20%20%20%20%20%20%20'R2_plt'%3A%20R2_plt%2C%0A%20%20%20%20%20%20%20%20'T1_plt'%3A%20T1_plt%2C%0A%20%20%20%20%20%20%20%20'T2_plt'%3A%20T2_plt%2C%0A%20%20%20%20%20%20%20%20'Terr_plt'%3A%20Terr_plt%2C%0A%20%20%20%20%20%20%20%20'F2_err_plt'%3A%20F2_err_plt%2C%0A%20%20%20%20%20%20%20%20'Tmax1_plt'%3A%20Tmax1_plt%2C%0A%20%20%20%20%20%20%20%20'Tmax2_plt'%3A%20Tmax2_plt%2C%0A%0A%20%20%20%20%20%20%20%20'Idle_rpm'%3Arpm_idle_max%2C%0A%20%20%20%20%20%20%20%20'Engage_rpm'%3Arpm_eng%2C%0A%20%20%20%20%20%20%20%20'Clutch_rpm'%3Arpm_clu%2C%0A%20%20%20%20%20%20%20%20'T_err_history'%3A%20T_err_history%2C%0A%20%20%20%20%20%20%20%20'F2_err_history'%3A%20F2_err_history%0A%20%20%20%20%7D%0A%0A%0A%40app.function%0Adef%20plot_simulation(result%2C%20q%2C%20w%2C%20e%2C%20r%2C%20t%2Cshim%2C%20goal%2C%20Vsmin%2C%20Vsmax%2C%20ErpmMax%2C%20ErpmMin)%3A%0A%20%20%20%20%22%22%22%0A%20%20%20%20Generate%20plots%20for%20CVT%20simulation%20results.%0A%0A%20%20%20%20Parameters%3A%0A%20%20%20%20result%3A%20Dictionary%20from%20cvt_simulation%20containing%20simulation%20data%0A%20%20%20%20q%2C%20w%2C%20e%2C%20r%2C%20t%3A%20CVT%20parameters%20for%20labeling%0A%20%20%20%20goal%3A%20Peak%20power%20RPM%0A%20%20%20%20Vsmin%2C%20Vsmax%3A%20Min%20and%20max%20vehicle%20speeds%0A%20%20%20%20ErpmMax%2C%20ErpmMin%3A%20Max%20and%20min%20engine%20RPMs%0A%0A%20%20%20%20Returns%3A%0A%20%20%20%20dict%20with%20'main_plot'%2C%20'rad_plot'%2C%20'err_plot'%0A%20%20%20%20%22%22%22%0A%20%20%20%20veh_speed%20%3D%20result%5B'veh_speed'%5D%0A%20%20%20%20engine_rpms%20%3D%20result%5B'engine_rpms'%5D%0A%20%20%20%20slip%20%3D%20result%5B'slip'%5D%0A%20%20%20%20ys%20%3D%20result%5B'ys'%5D%0A%20%20%20%20Fc1_plt%20%3D%20result%5B'Fc1_plt'%5D%0A%20%20%20%20Fc2_plt%20%3D%20result%5B'Fc2_plt'%5D%0A%20%20%20%20Rs1_plt%20%3D%20result%5B'Rs1_plt'%5D%0A%20%20%20%20Rs2_plt%20%3D%20result%5B'Rs2_plt'%5D%0A%20%20%20%20R1_plt%20%3D%20result%5B'R1_plt'%5D%0A%20%20%20%20R2_plt%20%3D%20result%5B'R2_plt'%5D%0A%20%20%20%20Terr_plt%20%3D%20result%5B'Terr_plt'%5D%0A%20%20%20%20F2_err_plt%20%3D%20result%5B'F2_err_plt'%5D%0A%0A%20%20%20%20%23%20Main%20Plot%20(Engine%20RPM%20vs.%20Vehicle%20Speed)%0A%20%20%20%20fig%20%3D%20go.Figure()%0A%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3D%5BVsmin%2C%200%2C%20Vsmax%5D%2C%20y%3D%5BErpmMax%2C%200%2C%20ErpmMax%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines'%2C%20line%3Ddict(dash%3D'dot'%2C%20color%3D'grey')%2C%0A%20%20%20%20%20%20%20%20name%3D'Low%20%26%20High%20Ratios'%2C%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3D%5B0%2C%20Vsmax%5D%2C%20y%3D%5Bgoal%2C%20goal%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines'%2C%20line%3Ddict(dash%3D'dash'%2C%20color%3D'green')%2C%0A%20%20%20%20%20%20%20%20name%3Df'Ideal%20shift%20(%7Bgoal%7Drpm)'%2C%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3D%5B0%2C%20Vsmax%5D%2C%20y%3D%5BErpmMax%2C%20ErpmMax%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines'%2C%20line%3Ddict(dash%3D'dash'%2C%20color%3D'red')%2C%0A%20%20%20%20%20%20%20%20name%3D'Governor'%2C%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3D%5B0%2C%20Vsmax%5D%2C%20y%3D%5BErpmMin%2C%20ErpmMin%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines'%2C%20line%3Ddict(dash%3D'dash'%2C%20color%3D'grey')%2C%0A%20%20%20%20%20%20%20%20name%3D'Idle'%2C%0A%20%20%20%20))%0A%0A%20%20%20%20lame%20%3D%20f%22%7B%5Bq%2C%20w%2C%20e%2C%20r%2C%20t%5D%7D%20-%20%7Bshim%3A.0f%7D%22%0A%20%20%20%20if%20slip%20%3D%3D%201%3A%0A%20%20%20%20%20%20%20%20lame%20%2B%3D%20%22%20-%20SLIP%22%0A%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3Dveh_speed%5B0%3A2%5D%2C%20y%3Dengine_rpms%5B0%3A2%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines%2Bmarkers'%2C%20marker%3Ddict(symbol%3D'star'%2C%20size%3D6)%2C%20line%3Ddict(color%3D'rgb(31%2C%20119%2C%20180)')%2C%0A%20%20%20%20%20%20%20%20name%3D'No%20Engagement'%2C%0A%20%20%20%20%20%20%20%20hoverinfo%3D'x%2By%2Bname'%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3Dveh_speed%5B1%3A3%5D%2C%20y%3Dengine_rpms%5B1%3A3%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines'%2C%20line%3Ddict(color%3D'rgb(31%2C%20119%2C%20180)'%2C%20dash%3D'dot')%2C%0A%20%20%20%20%20%20%20%20name%3D'Total%20Slip%20Engagement%20(TBC)'%2C%0A%20%20%20%20%20%20%20%20hoverinfo%3D'x%2By%2Bname'%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3Dveh_speed%5B2%3A5%5D%2C%20y%3Dengine_rpms%5B2%3A5%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines%2Bmarkers'%2C%20marker%3Ddict(symbol%3D'circle'%2C%20size%3D6)%2C%20line%3Ddict(color%3D'rgb(255%2C%20127%2C%2014)'%2C%20dash%3D'dash')%2C%0A%20%20%20%20%20%20%20%20name%3D'Clutching%20%26%20Low%20Ratio'%2C%0A%20%20%20%20%20%20%20%20hoverinfo%3D'x%2By%2Bname'%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3Dveh_speed%5B4%3A-1%5D%2C%20y%3Dengine_rpms%5B4%3A-1%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines%2Bmarkers'%2C%20marker%3Ddict(symbol%3D'circle'%2C%20size%3D6)%2C%20line%3Ddict(color%3D'blue')%2C%0A%20%20%20%20%20%20%20%20name%3Dlame%2B%22%20(Straight%20Shift)%22%2C%0A%20%20%20%20%20%20%20%20hoverinfo%3D'x%2By%2Bname'%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3Dveh_speed%5B-2%3A%5D%2C%20y%3Dengine_rpms%5B-2%3A%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines%2Bmarkers'%2C%20marker%3Ddict(symbol%3D'circle'%2C%20size%3D6)%2C%20line%3Ddict(color%3D'green')%2C%0A%20%20%20%20%20%20%20%20name%3D%22Overrun%22%2C%0A%20%20%20%20%20%20%20%20hoverinfo%3D'x%2By%2Bname'%0A%20%20%20%20))%0A%0A%0A%20%20%20%20fig.update_layout(%0A%20%20%20%20%20%20%20%20template%3D%22plotly_white%22%2C%0A%20%20%20%20%20%20%20%20title%20%3D%20lame%2C%0A%20%20%20%20%20%20%20%20title_x%3D0.5%2C%0A%20%20%20%20%20%20%20%20margin%3Ddict(t%3D30%2C%20b%3D10)%2C%0A%20%20%20%20%20%20%20%20xaxis_title%3D%22Vehicle%20Speed%20in%20km%2Fh%22%2C%0A%20%20%20%20%20%20%20%20yaxis_title%3D%22Engine%20Speed%20in%20RPM%22%2C%0A%20%20%20%20%20%20%20%20yaxis%3Ddict(range%3D%5B1300%2C%204000%5D)%2C%0A%20%20%20%20%20%20%20%20showlegend%3DTrue%2C%0A%20%20%20%20%20%20%20%20legend%3Ddict(%0A%20%20%20%20%20%20%20%20%20%20%20%20yanchor%3D%22bottom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3D-0.3%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xanchor%3D%22center%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3D0.5%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20orientation%3D%22h%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20traceorder%3D%22normal%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20itemsizing%3D%22constant%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20font%3Ddict(size%3D13)%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20hovermode%3D'closest'%2C%0A%20%20%20%20)%0A%20%20%20%20fig.update_xaxes(showgrid%3DTrue)%0A%20%20%20%20fig.update_yaxes(showgrid%3DTrue)%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%22main_plot%22%3A%20fig%2C%0A%20%20%20%20%7D%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20%23%20Other%20Functions%0A%20%20%20%20Function%20used%20in%20the%20mathematical%20model%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20%23%23%20Radial%20Force%20Model%0A%20%20%20%20Developedby%20Hannes%20(JL)%20Pretorius%20(2025)%20to%20be%20able%20to%20convert%20the%20side%20force%20model%20into%20radial%20forces%20to%20be%20able%20to%20include%20Centrifugal%20Forces%20from%20the%20belt.%20It%20is%20also%20more%20intuitive%20to%20understand%20how%20the%20shifting%20happens%20with%20this%20model.%0A%0A%20%20%20%20%23%23%23%20Cetrifugal%20Forces%0A%20%20%20%20For%20a%20belt%20of%20wrap%20angle%2C%20%24%5Cphi%24%20and%20mass%20per%20meter%20of%20%24m'%24%2C%20the%20centripetal%20force%2C%20%24F_c%24%20is%20given%20by%0A%20%20%20%20%24%24F_c%3D%20m'%5Comega%5E2%20r%5E2%20%5Cphi%24%24%0A%20%20%20%20where%20%24%5Comega%24%20is%20the%20angular%20velocity%20of%20the%20pulley%20and%20%24r%24%20is%20the%20radius%20the%20belt%20wraps%20around.%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20Fc(m%2Cw%2Cr%2Cphi)%3A%0A%20%20%20%20return%20m%20*%20w**2%20*%20r**2%20*%20phi%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20%23%23%23%23%20Wrap%20Angles%0A%20%20%20%20The%20first%20step%20is%20to%20solve%20for%20the%20wrap%20angles%20on%20the%20pulleys%0A%0A%20%20%20%20From%20Shigley%20Chapter%2017%20(Budynas%20and%20Nisbett%2C%202019)%20the%20wrap%20angles%20can%20be%20solved%20as%20follows%2C%20where%20C%20is%20the%20centre%20distance%2C%20and%20D%20and%20d%20is%20the%20large%20and%20small%20pulley%20diameters%20respectively%3A%0A%0A%20%20%20%20Small%20Pulley%3A%0A%20%20%20%20%24%24%CF%95_d%3D%CF%80-2%20sin%5E%7B-1%7D%5Cfrac%7BD-d%7D%7B2C%7D%24%24%0A%20%20%20%20Large%20Pulley%3A%0A%20%20%20%20%24%24%CF%95_d%3D%CF%80%2B2%20sin%5E%7B-1%7D%5Cfrac%7BD-d%7D%7B2C%7D%24%24%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20wrap_angles(D1%2CD2%2CC%3D0.2667)%3A%0A%20%20%20%20from%20numpy%20import%20pi%2C%20arcsin%0A%0A%20%20%20%20if%20D1%3CD2%3A%0A%20%20%20%20%20%20%20%20d%20%3D%20D1%0A%20%20%20%20%20%20%20%20D%20%3D%20D2%0A%20%20%20%20%20%20%20%20phi_1%20%3D%20pi%20-%202*arcsin((D-d)%2F(2*C))%0A%20%20%20%20%20%20%20%20phi_2%20%3D%20pi%20%2B%202*arcsin((D-d)%2F(2*C))%0A%0A%20%20%20%20elif%20D1%3ED2%3A%0A%20%20%20%20%20%20%20%20d%20%3D%20D2%0A%20%20%20%20%20%20%20%20D%20%3D%20D1%0A%20%20%20%20%20%20%20%20phi_1%20%3D%20pi%20-%202*arcsin((D-d)%2F(2*C))%0A%20%20%20%20%20%20%20%20phi_2%20%3D%20pi%20%2B%202*arcsin((D-d)%2F(2*C))%0A%0A%20%20%20%20else%3A%20phi_1%20%3D%20phi_2%20%3D%20pi%0A%0A%20%20%20%20return%20phi_1%2C%20phi_2%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20%23%23%23%23%20Diameters%20from%20Ratio%20(NB%3A%20Only%20for%20Algorithm)%0A%20%20%20%20NB%3A%20Check%20what%20the%20actual%20belt%20length%20and%20centre%20distance%20is!%0A%0A%20%20%20%20Assuming%20no%20slip%2C%20the%20two%20diameters%20can%20be%20related%20through%20the%20CVT%20ratio%2C%20cr%0A%20%20%20%20%24%24D_2%3Dcr%5Ccdot%20D_1%24%24%0A%20%20%20%20The%20belt%20pitch%20length%20equation%20can%20then%20be%20rewritten%20as%20follows%20and%20solved%20as%20a%20quadratic%20equation%20for%20%24D_1%24.%0A%20%20%20%20%24%24L%3D2C%2B%5Cfrac%7B%5Cpi%7D%7B2%7D%5Ccdot%20(D_1%2BD_2%20)%2B(D_1-D_2%20)%5E2%2F4C%24%24%0A%20%20%20%20%24%24%5CRightarrow%20L%3D2C%2B%5Cfrac%7B%5Cpi%7D%7B2%7D%5Ccdot%20(D_1%2BrD_1%20)%2B(D_1-crD_1%20)%5E2%2F4C%24%24%0A%20%20%20%20%24%24%5CRightarrow%5B(1-2cr%2Bcr%5E2)%2F4C%5D%5Ccdot%20D_1%5E2%2B%5B%20%5Cfrac%7B%5Cpi%7D%7B2%7D%5Ccdot%20(1%2Bcr)%5D%5Ccdot%20D_1%2B%5B2C-L%5D%3D0%24%24%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20pulley_diameters(ratio%2CC%3D0.266405%2CL%3D1.027)%3A%0A%20%20%20%20from%20numpy%20import%20pi%0A%20%20%20%20import%20numpy.polynomial.polynomial%20as%20poly%0A%0A%20%20%20%20cr%20%3D%20ratio%0A%20%20%20%20a%20%3D%20(1%20-%202*cr%20%2B%20cr**2)%2F(4*C)%0A%20%20%20%20b%20%3D%20(0.5*pi*(1%2Bcr))%0A%20%20%20%20c%20%3D%20(2*C-L)%0A%0A%20%20%20%20roots%20%3D%20poly.polyroots((c%2Cb%2Ca))%0A%20%20%20%20%23%20print(roots)%0A%0A%20%20%20%20Dp%20%3D%20roots%5B1%5D%0A%20%20%20%20Ds%20%3D%20cr*Dp%0A%0A%20%20%20%20%23%20Li%20%3D%202*C%20%2B0.5*pi*(Dp%2BDs)%20%2B%20(Dp%20-Ds)**2%20%2F(4*C)%0A%0A%20%20%20%20return%20Dp%2C%20Ds%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20%23Belt%20Slipping%20%2F%20Max%20Transferable%20Torque%0A%20%20%20%20%23%23Transmittable%20Torque%20%0A%0A%20%20%20%20The%20maximum%20torque%20that%20can%20be%20transferred%20by%20the%20sheaves%20before%20the%20belt%20slips%20can%20be%20determined%20from%0A%0A%20%20%20%20%24%24T_%7Bmax%7D%3DF_%7Bt1%7D-F_%7Bt2%7D%E2%8B%85r%3D%CE%94%20F_%7Bt%2Cmax%7D%E2%8B%85r%24%24%0A%0A%20%20%20%20For%20this%20equation%20to%20be%20used%2C%20the%20belt%20tensions%20need%20to%20be%20determined%20independently%20of%20the%20transmitted%20torque.%20This%20can%20be%20done%20by%20relating%20the%20difference%20between%20the%20tensions%2C%20%24%5CDelta%20F_t%24%20and%20the%20total%20frictional%20force%20around%20the%20wrap%20of%20the%20belt%20by%20%0A%0A%20%20%20%20%24%24%CE%94F_%7Bt%2Cmax%7D%3D%CE%BC%20N%24%24%0A%0A%20%20%20%20where%20N%20is%20the%20total%20normal%20force%20the%20belt%20experiences%20from%20the%20pulley%20and%20can%20be%20defined%20by%20the%20radial%20force%20due%20to%20the%20side%20force%2C%20%24R_s%24%20and%20the%20reduction%20of%20it%20by%20the%20centrifugal%20force%2C%20%24F_c%24%20given%20resulting%20in%20%0A%0A%20%20%20%20%24%24%5CDelta%20F_%7Bt%2Cmax%7D%20%3D%20%5Cfrac%7B%5Cmu%7D%7Bsin%5Cbeta%7D%20(R_s-F_c%20)%3Df'%20(R-F_c)%24%24%0A%0A%20%20%20%20That%20means%20that%20the%20max%20transmittable%20torque%20is%0A%0A%20%20%20%20%24%24T_%7Bmax%7D%3Df'%20(R_s-F_c%20)%E2%8B%85r%24%24%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20maxT%20(f%2CRs%2CFc%2Cr)%3A%0A%20%20%20%20Tmax%20%3D%20f*(Rs-Fc)*r%0A%20%20%20%20return%20Tmax%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20%23%23%20Kohler%2FRehlko%20Engine%20Torque%20Curve%0A%0A%20%20%20%20Below%20is%20the%20power%20and%20torque%20curve%20for%20the%20rule-compliant%20Rehlko%2FKohler%20engine%20with%20the%20Baja%20SAE%20restrictor%20plate%20installed.%20It%20has%20been%20converted%20into%20metric%20units%20from%20the%20original%20that%20was%20provided%20by%20Baja%20SAE%20(2025)%0A%0A%20%20%20%20It%20is%20then%20coded%20in%20a%20function%20to%20be%20used%20in%20the%20algorithm%3A%0A%0A%20%20%20%20%24%24%20T_%7Bengine%7D%20%3D%20-2%5Ctimes%2010%5E%7B-6%7D%20%5Ccdot%20%20rpm%5E2%20%2B%200.0058%5Ccdot%20rpm%20%2B%2022.536%20%24%24%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20engTorq(w)%3A%0A%20%20%20%20import%20numpy%20as%20np%0A%20%20%20%20rpm%20%3D%20w%20*%2030%2Fnp.pi%0A%20%20%20%20T_eng%20%3D%20-2*10**-6%20*%20rpm**2%20%2B%200.0058*rpm%20%2B%2022.536%0A%20%20%20%20return%20T_eng%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Misc.%20Usefull%20Functions%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20percentError(old%2C%20new)%3A%0A%20%20%20%20return%20100*abs(old-new)%2Fnew%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%20Old%20Model%20for%20Comparison%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(ErpmMax%2C%20ErpmMin%2C%20GR%2C%20Vsmax%2C%20Vsmin%2C%20Wdia%2C%20e%2C%20mo%2C%20q%2C%20r%2C%20t%2C%20w)%3A%0A%0A%20%20%20%20import%20plotly.io%20as%20pio%0A%20%20%20%20import%20plotly.colors%0A%0A%20%20%20%20colors%20%3D%20plotly.colors.qualitative.Plotly%0A%0A%20%20%20%20old_result%20%3D%20old_cvt_model(q%2C%20w%2C%20e%2C%20r%2C%20t)%0A%20%20%20%20old_x%2C%20old_y%20%3D%20old_result%0A%0A%20%20%20%20old_result_fix%20%3D%20old_cvt_model_fix(q%2C%20w%2C%20e%2C%20r%2C%20t)%0A%20%20%20%20old_x_fix%2C%20old_y_fix%20%3D%20old_result_fix%0A%0A%20%20%20%20result_new%20%3D%20cvt_simulation(q%2C%20w%2C%20e%2C%20r%2C%20t)%0A%20%20%20%20goal_x%20%3D%20result_new%5B'veh_speed'%5D%0A%20%20%20%20goal_y%20%3D%20result_new%5B'engine_rpms'%5D%0A%0A%0A%20%20%20%20%23%20Create%20Plotly%20figure%0A%20%20%20%20fig%20%3D%20go.Figure()%0A%0A%20%20%20%20v2s%20%3D%20(60*GR%2F(0.5*Wdia*3.6*2*np.pi))%0A%0A%20%20%20%20old_shift%20%3D%20dict(%0A%20%20%20%20%20%20%20%20x%3Dnp.array(old_x)*v2s%20%2C%0A%20%20%20%20%20%20%20%20y%3Dold_y%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines%2Bmarkers'%2C%0A%20%20%20%20%20%20%20%20line%3Ddict(color%3Dcolors%5B7%5D)%2C%0A%20%20%20%20%20%20%20%20name%3Df%22Old%20Model%20%5B%7Bq%2Cw%2Ce%2Cr%2Ct%7D%5D%22%2C%0A%20%20%20%20)%0A%0A%20%20%20%20old_shift_fix%20%3D%20dict(%0A%20%20%20%20%20%20%20%20x%3Dnp.array(old_x_fix)%20*v2s%2C%0A%20%20%20%20%20%20%20%20y%3Dold_y_fix%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines%2Bmarkers'%2C%0A%20%20%20%20%20%20%20%20line%3Ddict(dash%3D'dash'%2Ccolor%3Dcolors%5B6%5D)%2C%0A%20%20%20%20%20%20%20%20name%3Df%22Old%20Model%20Diameter%20Fix%20%5B%7Bq%2Cw%2Ce%2Cr%2Ct%7D%5D%22%2C%0A%20%20%20%20)%0A%0A%20%20%20%20goal_shift%20%3D%20dict(%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3Dnp.array(goal_x)%20*v2s%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3Dgoal_y%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mode%3D'lines%2Bmarkers'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20line%3Ddict(color%3Dcolors%5B5%5D%2Cdash%3D%22dot%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20name%3Df%22New%20Model%20%5B%7Bq%2Cw%2Ce%2Cr%2Ct%7D%5D%22%2C%0A%20%20%20%20%20%20%20%20)%0A%0A%0A%20%20%20%20%23%20Plotting%20Lines%20to%20compare%20against%0A%20%20%20%20%23%23%20Data%20for%20comparison%20lines%0A%20%20%20%20Low%20%3D%20np.array(%5BVsmin%2C0%2C%20Vsmax%5D)*v2s%0A%0A%20%20%20%20Govspeed%20%3D%20np.array(%5BErpmMax%2C%20ErpmMax%5D)%0A%20%20%20%20Idle%20%3D%20np.array(%5BErpmMin%2C%20ErpmMin%5D)%0A%20%20%20%20RPM%20%3D%20np.array(%5B0%2C%203800%5D)%0A%20%20%20%20goal%20%3D%203500%0A%0A%20%20%20%20%23%20Plotting%20Lines%20to%20compare%20against%0A%0A%20%20%20%20%23%20Data%20for%20comparison%20lines%0A%20%20%20%20PeakP%20%3D%20%5Bgoal%2C%20goal%5D%0A%20%20%20%20Govspeed%20%3D%20%5BErpmMax%2C%20ErpmMax%5D%0A%20%20%20%20Idle%20%3D%20%5BErpmMin%2C%20ErpmMin%5D%20%0A%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3DLow%2C%20y%3D%5BErpmMax%2C%200%2C%20ErpmMax%5D%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines'%2C%20line%3Ddict(dash%3D'dot'%2C%20color%3D'grey')%2C%0A%20%20%20%20%20%20%20%20name%3D'Low%20%26%20High%20Ratios'%2C%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3D%5B0%2C%20Vsmax*v2s%5D%2C%20y%3DPeakP%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines'%2C%20line%3Ddict(dash%3D'dash'%2C%20color%3D'green')%2C%0A%20%20%20%20%20%20%20%20name%3Df'Ideal%20shift%20(%7Bgoal%7Drpm)'%2C%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3D%5B0%2C%20Vsmax*v2s%5D%2C%20y%3DGovspeed%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines'%2C%20line%3Ddict(dash%3D'dash'%2C%20color%3D'red')%2C%0A%20%20%20%20%20%20%20%20name%3D'Governor'%2C%0A%20%20%20%20))%0A%20%20%20%20fig.add_trace(go.Scatter(%0A%20%20%20%20%20%20%20%20x%3D%5B0%2C%20Vsmax*v2s%5D%2C%20y%3DIdle%2C%0A%20%20%20%20%20%20%20%20mode%3D'lines'%2C%20line%3Ddict(dash%3D'dash'%2C%20color%3D'grey')%2C%0A%20%20%20%20%20%20%20%20name%3D'Idle'%2C%0A%20%20%20%20))%0A%20%20%20%20%23%20Add%20scatter%20trace%0A%20%20%20%20fig.add_trace(go.Scatter(**old_shift))%0A%20%20%20%20fig.add_trace(go.Scatter(**old_shift_fix))%0A%20%20%20%20fig.add_trace(go.Scatter(**goal_shift))%0A%0A%0A%20%20%20%20%23%20Update%20layout%0A%20%20%20%20fig.update_layout(%0A%20%20%20%20%20%20%20%20template%20%3D%20%22plotly_white%22%2C%0A%20%20%20%20%20%20%20%20dragmode%3D'zoom'%2C%0A%20%20%20%20%20%20%20%20xaxis_title%3D%22Secondary%20Speed%20%5BRPM%5D%22%2C%0A%20%20%20%20%20%20%20%20yaxis_title%3D%22Engine%2FPrimary%20Speed%20%5BRPM%5D%22%2C%0A%20%20%20%20%20%20%20%20yaxis%3Ddict(range%3D%5B1000%2C%204500%5D)%2C%0A%20%20%20%20%20%20%20%20title%3Ddict(text%3D%22Old%20vs%20Fix%20vs%20New%22%2C%20x%3D0.5%2C%20xanchor%3D'center')%2C%0A%20%20%20%20%20%20%20%20showlegend%3DTrue%2C%0A%20%20%20%20%20%20%20%20hovermode%3D'closest'%2C%0A%20%20%20%20%20%20%20%20legend%3Ddict(%0A%20%20%20%20%20%20%20%20%20%20%20%20yanchor%3D%22bottom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3D-0.4%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xanchor%3D%22center%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3D0.5%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20orientation%3D%22h%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20traceorder%3D%22normal%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20itemsizing%3D%22constant%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20font%3Ddict(size%3D10)%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%20%20%20%20fig.update_xaxes(showgrid%3DTrue)%0A%20%20%20%20fig.update_yaxes(showgrid%3DTrue)%0A%0A%20%20%20%20mo.ui.plotly(fig)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20old_cvt_model(q%3D4%2C%20w%3D2%2C%20e%3D7%2C%20r%3D1%2C%20t%3D1)%3A%0A%20%20%20%20%23%20Initialize%20part%20parameters%0A%20%20%20%20FWs%20%3D%20FW()%0A%20%20%20%20PSs%20%3D%20PS()%0A%20%20%20%20SSs%20%3D%20SS()%0A%20%20%20%20Ramps%20%3D%20Helix()%0A%20%20%20%20SPTs%20%3D%20SPT()%0A%0A%20%20%20%20%23%20Pulley%20Diameters%0A%20%20%20%20dp%20%3D%200.063%20%23%20initial%20diameter%20of%20primary%20at%203.83%20x2%20%3D%20x1%20-%200.0047%0A%20%20%20%20Dp%20%3D%200.184%20%230.173%20%23%20final%20diameter%20of%20primary%20%20at%200.76%0A%0A%20%20%20%20ds%20%3D%200.24129%20%230.2295%20%23%20initial%20diameter%20of%20secondary%20at%203.83%20x2%20%3D%20x1%20-%200.0047%0A%20%20%20%20Ds%20%3D%200.13984%20%230.1315%20%23%20final%20diameter%20of%20secondary%20at%200.76%0A%0A%20%20%20%20%23%20Ratio%20and%20Speed%20Definitions%0A%20%20%20%20%23%23%20Gear%20Ratio%20and%20Torque%20Ratio%20Definitions%0A%20%20%20%20GR%20%3D%2011.3%20%23Gear%20Reduction%20Ratio%0A%20%20%20%20CVTH%20%3D%200.76%20%23%20CVT%20High%20Ratio%0A%20%20%20%20CVTL%20%3D%203.8%20%23%20CVT%20Low%20Ratio%0A%20%20%20%20TRL%20%3D%20GR*CVTL%20%23%20Torque%20Ratio%20Low%0A%20%20%20%20TRH%20%3D%20GR*CVTH%20%23%20Torque%20Ratio%20High%0A%0A%20%20%20%20eff%20%3D%201%20%20%23%20Efficiency%20of%20torque%20transfer%0A%20%20%20%20floss%20%3D%201%0A%20%20%20%20rr%20%3D%200.045%20%20%23%20Torque%20Feedback%20Ramp%20Radius%0A%20%20%20%20P0%20%3D%2063.5%20%20%23%20static%20spring%20displacement%0A%20%20%20%20Peng%20%3D%2059%20%20%23%20Spring%20displacement%20when%20belt%20starts%20to%20engage%0A%20%20%20%20Pmax%20%3D%2030.226%20%20%23%20Spring%20displacement%20when%20clutch%20is%20fully%20shifted%0A%20%20%20%20shim%20%3D%200%20%20%23%20Spring%20shim%20displacement%0A%20%20%20%20cf%20%3D%200.55%20%23%20coeff%20friction%20between%20rubber%20and%20aliminium%0A%20%20%20%20goal%20%3D%203600%20%20%23%20Peak%20Power%20RPM%0A%20%20%20%20T1%20%3D%20round(-2E-6%20*%20goal**2%20%2B%200.0058%20*%20goal%20%2B%2022.536%2C%201)%20%20%23%20Peak%20Torque%20trendline%0A%0A%0A%20%20%20%20%23%23%20Engine%20RPM%20and%20Speed%20Definitions%0A%20%20%20%20ErpmMax%20%3D%203800%20%23%20Max%20engine%20RPM%0A%20%20%20%20ErpmMin%20%3D%201800%20%20%23%20Min%20engine%20RPM%0A%0A%20%20%20%20%23%23%20Vehicle%20Speed%20and%20Wheel%20Diameter%20Definitions%0A%20%20%20%20Wdia%20%3D%2023*0.0254%20%23wheel%20diameter%20in%20m%0A%20%20%20%20Wcirc%20%3D%201.74%20%23Wdia%20*%20np.pi%20%23%23%23%20needs%20calibration%0A%20%20%20%20Vsmax%20%3D%203800%2FTRH%2F60*Wcirc*3.6%20%23%20Max%20vehicle%20speed%20in%20km%2Fh%0A%20%20%20%20Vsmin%20%3D%203800%2FTRL%2F60*Wcirc*3.6%20%23%20Min%20vehicle%20speed%20in%20km%2Fh%0A%0A%20%20%20%20'''%0A%20%20%20%20%23%20Data%20Points%20for%20Comparison%20Lines%0A%20%20%20%20Low%20%3D%20%5B0%2CVsmin%5D%0A%20%20%20%20High%20%3D%20%5B0%2CVsmax%5D%0A%20%20%20%20Med%20%3D%20%5B0%2C((Vsmax%2BVsmin)%2F2)%5D%0A%20%20%20%20PeakP%20%3D%20%5Bgoal%2Cgoal%5D%0A%20%20%20%20Govspeed%20%3D%20%5B3800%2C3800%5D%0A%20%20%20%20RPM%20%3D%20%5B0%2C3800%5D%0A%0A%20%20%20%20%23%20Close%20Previous%20Plots%0A%20%20%20%20plt.close()%0A%0A%20%20%20%20%23%20Plotting%20Engine%20RPM%20vs%20Vehicle%20Speed%0A%20%20%20%20plt.figure(2%2Cfigsize%3D(10%2C%206))%0A%20%20%20%20%23%23%20Plotting%20Lines%20to%20compare%20against%0A%20%20%20%20plt.plot(Low%2CRPM%2C%22--%22%20%2Clabel%20%3D%20%22Low%20gear%20ratio%22)%0A%20%20%20%20plt.plot(High%2CRPM%2C%22--%22%2C%20label%20%3D%20%22High%20gear%20ratio%22)%0A%20%20%20%20plt.plot(High%2CPeakP%2C%22--%22%2C%20label%20%3D%20%22Ideal%20shift%22)%0A%20%20%20%20plt.plot(High%2CGovspeed%2C%22--%22%2C%20label%20%3D%20%22Governer%22)%0A%20%20%20%20plt.ylabel(%22RPM%22)%0A%20%20%20%20plt.xlabel(%22Vehicle%20speed%20(km%2Fh)%22)%0A%20%20%20%20plt.title(%22Engine%20RPM%20along%20Vehicle%20Speed%22)%0A%20%20%20%20plt.subplots_adjust(bottom%3D0.2)%0A%20%20%20%20if%20inspect_optimised_results%20%3D%3D%20True%3A%20plt.subplots_adjust(bottom%3D0.2)%2C%20plt.suptitle(name%20%2B%20%22%5CnPlot%20slip%20setups%3A%20%22%2Bstr(plot_slip_setups)%2C%20fontsize%3D10%2C%20y%3D0.1)%0A%20%20%20%20plt.ylim(0%2C4000)%0A%20%20%20%20%23plt.yticks(np.arange(0%2C4050%2C50))%0A%20%20%20%20'''%0A%0A%20%20%20%20%23%20Initialize%20variables%20for%20plotting%0A%20%20%20%20os%20%3D%20%5B%5D%20%23%20Shift%20percentage%0A%20%20%20%20f1%20%3D%20%5B%5D%20%23%20Possible%20Primary%20Side%20Force%0A%20%20%20%20f2%20%3D%20%5B%5D%20%23%20Possible%20Secondary%20Side%20Force%0A%20%20%20%20F_req1%3D%5B%5D%20%23%20Required%20Primary%20Side%20Force%0A%20%20%20%20F_req2%3D%5B%5D%20%23%20Required%20Secondary%20Side%20Force%0A%20%20%20%20F_req3%3D%5B%5D%20%23%20Average%20Required%20%20Side%20Force%0A%0A%20%20%20%20inspect%20%3D%20np.array(%5Bq%2Cw%2Ce%2Cr%2Ct%5D)%0A%0A%20%20%20%20%23%20Extracting%20the%20data%20form%20the%20CVT%20Parts%20database%0A%20%20%20%20%23%23%20Flyweight%20Calculations%0A%20%20%20%20mfw%20%3D%20FWs%5Bint(inspect%5B0%5D)%2C1%5D%20%23%20Mass%20of%20flyweight%0A%0A%20%20%20%20%23%23%20Primary%20Spring%20Calculations%0A%20%20%20%20f1eng%20%3D%20PSs%5Bint(inspect%5B1%5D)%2C2%5D*(PSs%5Bint(inspect%5B1%5D)%2C1%5D-(P0-shim))%20%23%20Spring%20Force%20at%20belt%20engagement%0A%20%20%20%20fs1x%20%3D%20PSs%5Bint(inspect%5B1%5D)%2C2%5D*(PSs%5Bint(inspect%5B1%5D)%2C1%5D-(Peng-shim))%20%23%20Spring%20Force%20at%20zero%20shift%0A%20%20%20%20Fs1x%20%3D%20PSs%5Bint(inspect%5B1%5D)%2C2%5D*(PSs%5Bint(inspect%5B1%5D)%2C1%5D-(Pmax-shim))%20%23%20Spring%20Force%20at%20full%20shift%0A%0A%20%20%20%20%23%23%20Ramp%20Calculations%0A%20%20%20%20ra%20%3D%20Ramps%5Bint(inspect%5B2%5D)%5D%2F180*pi%20%23%20Ramp%20Angle%20in%20radians%0A%20%20%20%20rot%20%3D%20(28.575%2Ftan(ra))%2F(pi*90)*2*pi%20%23%20Ramp%20rotation%20in%20radians%0A%0A%20%20%20%20pre%20%3D%20SPTs%5B0%2Cint(inspect%5B3%5D)%5D%2F180*pi%20%23%20Secondary%20Pretension%20in%20radians%0A%0A%20%20%20%20%23%23%20Secondary%20Spring%20Calculations%0A%20%20%20%20fs2x%20%3D%20SSs%5Bint(inspect%5B4%5D)%2C0%5D%0A%20%20%20%20Fs2x%20%3D%20SSs%5Bint(inspect%5B4%5D)%2C1%5D%0A%20%20%20%20fs2t%20%3D%20SSs%5Bint(inspect%5B4%5D)%2C2%5D*pre%0A%20%20%20%20Fs2t%20%3D%20SSs%5Bint(inspect%5B4%5D)%2C2%5D*(pre%2Brot)%20%20%20%20%20%20%20%20%0A%0A%20%20%20%20o%20%3D%200%20%23Starting%20shift%20percentage%0A%0A%20%20%20%20rpms%20%3D%20%5B%5D%0A%20%20%20%20veh_speed%20%3D%20%5B%5D%20%23%20Vehicle%20Speed%20in%20km%2Fh%20(Was%20named%20%22shifts%22%20in%20the%20original%20code)%0A%0A%20%20%20%20while%20o%3C%3D1%3A%0A%0A%20%20%20%20%20%20%20%20rel1%3D1%0A%20%20%20%20%20%20%20%20rel2%3D1%0A%0A%20%20%20%20%20%20%20%20%23%20Flywieght%20Geometry%20Factor%20Evaluated%20at%20shift%20percentage%0A%20%20%20%20%20%20%20%20rsint%20%3D%20FWs%5Bint(inspect%5B0%5D)%2Cint(o*4%2B3)%5D%20%23%0A%0A%20%20%20%20%20%20%20%20%23Current%20Pulley%20Ratio%20%20%20%0A%20%20%20%20%20%20%20%20cr%20%3D%203.83%20-%20o%20*%20(3.83-0.76)%0A%0A%20%20%20%20%20%20%20%20%23%20Pulley%20%20Diameters%0A%20%20%20%20%20%20%20%20primD%20%3D%20dp%20%2B%20(Dp-dp)*o%0A%20%20%20%20%20%20%20%20secD%20%3D%20ds%20%2B%20(Ds-ds)*o%0A%0A%20%20%20%20%20%20%20%20%23%20Secondary%20Torque%20from%20Primary%2FEngine%20Torque%0A%20%20%20%20%20%20%20%20T2%3DT1*cr*eff%0A%0A%20%20%20%20%20%20%20%20%23%20Calculate%20the%20required%20side%20forces%20for%20the%20primary%20and%20secondary%0A%20%20%20%20%20%20%20%20req1%3D%20((T1%2FprimD)%2Fcf)*2%20%23%202*Torque%2FDiameter%20%2F%20friction%20coeff%0A%20%20%20%20%20%20%20%20req2%20%3D%20((T2%2FsecD)%2Fcf)*2%0A%20%20%20%20%20%20%20%20req3%3D(req1%2Breq2)%2F2%20%23%20Average%0A%20%20%20%20%20%20%20%20F_req1.append(req1)%0A%20%20%20%20%20%20%20%20F_req2.append(req2)%0A%20%20%20%20%20%20%20%20F_req3.append(req3)%0A%0A%20%20%20%20%20%20%20%20%23%20Calculate%20side%20forces%20for%20the%20primary%20and%20secondary%20due%20to%20the%20springs%0A%20%20%20%20%20%20%20%20F2t%20%3D%20fs2t%20%2B%20o%20*%20(Fs2t-fs2t)%20%23%20Secondary%20Torsion%0A%20%20%20%20%20%20%20%20F2x%20%3D%20fs2x%20%2B%20o%20*%20(Fs2x-fs2x)%20%23%20Secondary%20Compression%0A%20%20%20%20%20%20%20%20F1x%20%3D%20fs1x%20%2B%20o%20*%20(Fs1x-fs1x)%20%23%20Primary%20Compression%0A%0A%20%20%20%20%20%20%20%20%23%20Calculate%20the%20total%20side%20force%20on%20the%20secondary%20side%0A%20%20%20%20%20%20%20%20F2%20%3D%20((0.5*T2%2BF2t)%2F(rr*tan(ra))*floss%2BF2x)*rel2%0A%0A%20%20%20%20%20%20%20%20%23%20Imperically%20Determined%20Correction%20Factor%20(See%20Mills%20pg%2015-16)%0A%20%20%20%20%20%20%20%20if%20F2%3Creq3%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20slip%3D1%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20o%3D%3D0%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rel1%3D0.94%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20o%3D%3D0.25%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rel1%3D0.9%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20o%3D%3D0.5%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rel1%3D0.9%0A%0A%20%20%20%20%20%20%20%20%23%20Calculate%20the%20total%20side%20force%20on%20the%20primary%20side%0A%20%20%20%20%20%20%20%20F1%20%3D%20(mfw*3%2F1000*rsint*(goal%2F60*2*pi)**2-F1x)*rel1%0A%0A%0A%20%20%20%20%20%20%20%20%23%23%20Record%20the%20forces%20for%20plotting%0A%20%20%20%20%20%20%20%20f1.append(F1)%0A%20%20%20%20%20%20%20%20f2.append(F2)%0A%20%20%20%20%20%20%20%20os.append(o)%0A%0A%0A%0A%20%20%20%20%20%20%20%20%23%23%20Idle%20RPM%20%20%20%0A%20%20%20%20%20%20%20%20if%20o%3D%3D0%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20rpm%20%3D%20((f1eng%2F(mfw*3%2F1000*rsint))**0.5)*60%2F(2*pi)%0A%20%20%20%20%20%20%20%20%20%20%20%20rpms.append(rpm)%0A%20%20%20%20%20%20%20%20%20%20%20%20veh_speed.append(0)%0A%0A%20%20%20%20%20%20%20%20rpm%3D((((F2%2BF1x*rel1)%2F(mfw*3%2F1000*rsint*rel1))**0.5)*60%2F(2*pi))%0A%20%20%20%20%20%20%20%20rpms.append(rpm)%0A%20%20%20%20%20%20%20%20veh_speed.append(rpm%2F(cr*11.3)%2F60*Wcirc*3.6)%0A%0A%0A%20%20%20%20%20%20%20%20%23%20increase%20shift%20percentage%20by%2025%25%0A%20%20%20%20%20%20%20%20o%3Do%2B0.25%0A%0A%20%20%20%20return%20veh_speed%2C%20rpms%0A%0A%0A%40app.function%0Adef%20old_cvt_model_fix(q%3D4%2C%20w%3D2%2C%20e%3D7%2C%20r%3D1%2C%20t%3D1)%3A%0A%20%20%20%20%23%20Initialize%20part%20parameters%0A%20%20%20%20FWs%20%3D%20FW()%0A%20%20%20%20PSs%20%3D%20PS()%0A%20%20%20%20SSs%20%3D%20SS()%0A%20%20%20%20Ramps%20%3D%20Helix()%0A%20%20%20%20SPTs%20%3D%20SPT()%0A%0A%20%20%20%20%23%20Pulley%20Diameters%0A%20%20%20%20dp%20%3D%200.063%20%23%20initial%20diameter%20of%20primary%20at%203.83%20x2%20%3D%20x1%20-%200.0047%0A%20%20%20%20Dp%20%3D%200.184%20%230.173%20%23%20final%20diameter%20of%20primary%20%20at%200.76%0A%0A%20%20%20%20ds%20%3D%200.24129%20%230.2295%20%23%20initial%20diameter%20of%20secondary%20at%203.83%20x2%20%3D%20x1%20-%200.0047%0A%20%20%20%20Ds%20%3D%200.13984%20%230.1315%20%23%20final%20diameter%20of%20secondary%20at%200.76%0A%0A%20%20%20%20%23%20Ratio%20and%20Speed%20Definitions%0A%20%20%20%20%23%23%20Gear%20Ratio%20and%20Torque%20Ratio%20Definitions%0A%20%20%20%20GR%20%3D%2011.3%20%23Gear%20Reduction%20Ratio%0A%20%20%20%20CVTH%20%3D%200.76%20%23%20CVT%20High%20Ratio%0A%20%20%20%20CVTL%20%3D%203.8%20%23%20CVT%20Low%20Ratio%0A%20%20%20%20TRL%20%3D%20GR*CVTL%20%23%20Torque%20Ratio%20Low%0A%20%20%20%20TRH%20%3D%20GR*CVTH%20%23%20Torque%20Ratio%20High%0A%0A%20%20%20%20eff%20%3D%201%20%20%23%20Efficiency%20of%20torque%20transfer%0A%20%20%20%20floss%20%3D%201%0A%20%20%20%20rr%20%3D%200.045%20%20%23%20Torque%20Feedback%20Ramp%20Radius%0A%20%20%20%20P0%20%3D%2063.5%20%20%23%20static%20spring%20displacement%0A%20%20%20%20Peng%20%3D%2059%20%20%23%20Spring%20displacement%20when%20belt%20starts%20to%20engage%0A%20%20%20%20Pmax%20%3D%2030.226%20%20%23%20Spring%20displacement%20when%20clutch%20is%20fully%20shifted%0A%20%20%20%20shim%20%3D%200%20%20%23%20Spring%20shim%20displacement%0A%20%20%20%20cf%20%3D%200.55%20%23%20coeff%20friction%20between%20rubber%20and%20aliminium%0A%20%20%20%20goal%20%3D%203600%20%20%23%20Peak%20Power%20RPM%0A%20%20%20%20T1%20%3D%20round(-2E-6%20*%20goal**2%20%2B%200.0058%20*%20goal%20%2B%2022.536%2C%201)%20%20%23%20Peak%20Torque%20trendline%0A%0A%0A%20%20%20%20%23%23%20Engine%20RPM%20and%20Speed%20Definitions%0A%20%20%20%20ErpmMax%20%3D%203800%20%23%20Max%20engine%20RPM%0A%20%20%20%20ErpmMin%20%3D%201800%20%20%23%20Min%20engine%20RPM%0A%0A%20%20%20%20%23%23%20Vehicle%20Speed%20and%20Wheel%20Diameter%20Definitions%0A%20%20%20%20Wdia%20%3D%2023*0.0254%20%23wheel%20diameter%20in%20m%0A%20%20%20%20Wcirc%20%3D%201.74%20%23Wdia%20*%20np.pi%20%23%23%23%20needs%20calibration%0A%20%20%20%20Vsmax%20%3D%203800%2FTRH%2F60*Wcirc*3.6%20%23%20Max%20vehicle%20speed%20in%20km%2Fh%0A%20%20%20%20Vsmin%20%3D%203800%2FTRL%2F60*Wcirc*3.6%20%23%20Min%20vehicle%20speed%20in%20km%2Fh%0A%0A%20%20%20%20'''%0A%20%20%20%20%23%20Data%20Points%20for%20Comparison%20Lines%0A%20%20%20%20Low%20%3D%20%5B0%2CVsmin%5D%0A%20%20%20%20High%20%3D%20%5B0%2CVsmax%5D%0A%20%20%20%20Med%20%3D%20%5B0%2C((Vsmax%2BVsmin)%2F2)%5D%0A%20%20%20%20PeakP%20%3D%20%5Bgoal%2Cgoal%5D%0A%20%20%20%20Govspeed%20%3D%20%5B3800%2C3800%5D%0A%20%20%20%20RPM%20%3D%20%5B0%2C3800%5D%0A%0A%20%20%20%20%23%20Close%20Previous%20Plots%0A%20%20%20%20plt.close()%0A%0A%20%20%20%20%23%20Plotting%20Engine%20RPM%20vs%20Vehicle%20Speed%0A%20%20%20%20plt.figure(2%2Cfigsize%3D(10%2C%206))%0A%20%20%20%20%23%23%20Plotting%20Lines%20to%20compare%20against%0A%20%20%20%20plt.plot(Low%2CRPM%2C%22--%22%20%2Clabel%20%3D%20%22Low%20gear%20ratio%22)%0A%20%20%20%20plt.plot(High%2CRPM%2C%22--%22%2C%20label%20%3D%20%22High%20gear%20ratio%22)%0A%20%20%20%20plt.plot(High%2CPeakP%2C%22--%22%2C%20label%20%3D%20%22Ideal%20shift%22)%0A%20%20%20%20plt.plot(High%2CGovspeed%2C%22--%22%2C%20label%20%3D%20%22Governer%22)%0A%20%20%20%20plt.ylabel(%22RPM%22)%0A%20%20%20%20plt.xlabel(%22Vehicle%20speed%20(km%2Fh)%22)%0A%20%20%20%20plt.title(%22Engine%20RPM%20along%20Vehicle%20Speed%22)%0A%20%20%20%20plt.subplots_adjust(bottom%3D0.2)%0A%20%20%20%20if%20inspect_optimised_results%20%3D%3D%20True%3A%20plt.subplots_adjust(bottom%3D0.2)%2C%20plt.suptitle(name%20%2B%20%22%5CnPlot%20slip%20setups%3A%20%22%2Bstr(plot_slip_setups)%2C%20fontsize%3D10%2C%20y%3D0.1)%0A%20%20%20%20plt.ylim(0%2C4000)%0A%20%20%20%20%23plt.yticks(np.arange(0%2C4050%2C50))%0A%20%20%20%20'''%0A%0A%20%20%20%20%23%20Initialize%20variables%20for%20plotting%0A%20%20%20%20os%20%3D%20%5B%5D%20%23%20Shift%20percentage%0A%20%20%20%20f1%20%3D%20%5B%5D%20%23%20Possible%20Primary%20Side%20Force%0A%20%20%20%20f2%20%3D%20%5B%5D%20%23%20Possible%20Secondary%20Side%20Force%0A%20%20%20%20F_req1%3D%5B%5D%20%23%20Required%20Primary%20Side%20Force%0A%20%20%20%20F_req2%3D%5B%5D%20%23%20Required%20Secondary%20Side%20Force%0A%20%20%20%20F_req3%3D%5B%5D%20%23%20Average%20Required%20%20Side%20Force%0A%0A%20%20%20%20inspect%20%3D%20np.array(%5Bq%2Cw%2Ce%2Cr%2Ct%5D)%0A%0A%20%20%20%20%23%20Extracting%20the%20data%20form%20the%20CVT%20Parts%20database%0A%20%20%20%20%23%23%20Flyweight%20Calculations%0A%20%20%20%20mfw%20%3D%20FWs%5Bint(inspect%5B0%5D)%2C1%5D%20%23%20Mass%20of%20flyweight%0A%0A%20%20%20%20%23%23%20Primary%20Spring%20Calculations%0A%20%20%20%20f1eng%20%3D%20PSs%5Bint(inspect%5B1%5D)%2C2%5D*(PSs%5Bint(inspect%5B1%5D)%2C1%5D-(P0-shim))%20%23%20Spring%20Force%20at%20belt%20engagement%0A%20%20%20%20fs1x%20%3D%20PSs%5Bint(inspect%5B1%5D)%2C2%5D*(PSs%5Bint(inspect%5B1%5D)%2C1%5D-(Peng-shim))%20%23%20Spring%20Force%20at%20zero%20shift%0A%20%20%20%20Fs1x%20%3D%20PSs%5Bint(inspect%5B1%5D)%2C2%5D*(PSs%5Bint(inspect%5B1%5D)%2C1%5D-(Pmax-shim))%20%23%20Spring%20Force%20at%20full%20shift%0A%0A%20%20%20%20%23%23%20Ramp%20Calculations%0A%20%20%20%20ra%20%3D%20Ramps%5Bint(inspect%5B2%5D)%5D%2F180*pi%20%23%20Ramp%20Angle%20in%20radians%0A%20%20%20%20rot%20%3D%20(28.575%2Ftan(ra))%2F(pi*90)*2*pi%20%23%20Ramp%20rotation%20in%20radians%0A%0A%20%20%20%20pre%20%3D%20SPTs%5B0%2Cint(inspect%5B3%5D)%5D%2F180*pi%20%23%20Secondary%20Pretension%20in%20radians%0A%0A%20%20%20%20%23%23%20Secondary%20Spring%20Calculations%0A%20%20%20%20fs2x%20%3D%20SSs%5Bint(inspect%5B4%5D)%2C0%5D%0A%20%20%20%20Fs2x%20%3D%20SSs%5Bint(inspect%5B4%5D)%2C1%5D%0A%20%20%20%20fs2t%20%3D%20SSs%5Bint(inspect%5B4%5D)%2C2%5D*pre%0A%20%20%20%20Fs2t%20%3D%20SSs%5Bint(inspect%5B4%5D)%2C2%5D*(pre%2Brot)%20%20%20%20%20%20%20%20%0A%0A%20%20%20%20o%20%3D%200%20%23Starting%20shift%20percentage%0A%0A%20%20%20%20rpms%20%3D%20%5B%5D%0A%20%20%20%20veh_speed%20%3D%20%5B%5D%20%23%20Vehicle%20Speed%20in%20km%2Fh%20(Was%20named%20%22shifts%22%20in%20the%20original%20code)%0A%0A%20%20%20%20while%20o%3C%3D1%3A%0A%0A%20%20%20%20%20%20%20%20rel1%3D1%0A%20%20%20%20%20%20%20%20rel2%3D1%0A%0A%20%20%20%20%20%20%20%20%23%20Flywieght%20Geometry%20Factor%20Evaluated%20at%20shift%20percentage%0A%20%20%20%20%20%20%20%20rsint%20%3D%20FWs%5Bint(inspect%5B0%5D)%2Cint(o*4%2B3)%5D%20%23%0A%0A%20%20%20%20%20%20%20%20%23Current%20Pulley%20Ratio%20%20%20%0A%20%20%20%20%20%20%20%20cr%20%3D%203.83%20-%20o%20*%20(3.83-0.76)%0A%0A%20%20%20%20%20%20%20%20%23%20Pulley%20%20Diameters%0A%20%20%20%20%20%20%20%20%20%23%20Pulley%20diameters%20and%20wrap%20angles%0A%20%20%20%20%20%20%20%20primD%2C%20secD%20%3D%20pulley_diameters(ratio%3Dcr)%0A%0A%20%20%20%20%20%20%20%20%23%20Secondary%20Torque%20from%20Primary%2FEngine%20Torque%0A%20%20%20%20%20%20%20%20T2%3DT1*cr*eff%0A%0A%20%20%20%20%20%20%20%20%23%20Calculate%20the%20required%20side%20forces%20for%20the%20primary%20and%20secondary%0A%20%20%20%20%20%20%20%20req1%3D%20((T1%2FprimD)%2Fcf)*2%20%23%202*Torque%2FDiameter%20%2F%20friction%20coeff%0A%20%20%20%20%20%20%20%20req2%20%3D%20((T2%2FsecD)%2Fcf)*2%0A%20%20%20%20%20%20%20%20req3%3D(req1%2Breq2)%2F2%20%23%20Average%0A%20%20%20%20%20%20%20%20F_req1.append(req1)%0A%20%20%20%20%20%20%20%20F_req2.append(req2)%0A%20%20%20%20%20%20%20%20F_req3.append(req3)%0A%0A%20%20%20%20%20%20%20%20%23%20Calculate%20side%20forces%20for%20the%20primary%20and%20secondary%20due%20to%20the%20springs%0A%20%20%20%20%20%20%20%20F2t%20%3D%20fs2t%20%2B%20o%20*%20(Fs2t-fs2t)%20%23%20Secondary%20Torsion%0A%20%20%20%20%20%20%20%20F2x%20%3D%20fs2x%20%2B%20o%20*%20(Fs2x-fs2x)%20%23%20Secondary%20Compression%0A%20%20%20%20%20%20%20%20F1x%20%3D%20fs1x%20%2B%20o%20*%20(Fs1x-fs1x)%20%23%20Primary%20Compression%0A%0A%20%20%20%20%20%20%20%20%23%20Calculate%20the%20total%20side%20force%20on%20the%20secondary%20side%0A%20%20%20%20%20%20%20%20F2%20%3D%20((0.5*T2%2BF2t)%2F(rr*tan(ra))*floss%2BF2x)%0A%0A%20%20%20%20%20%20%20%20%23%20Calculate%20the%20total%20side%20force%20on%20the%20primary%20side%0A%20%20%20%20%20%20%20%20F1%20%3D%20(mfw*3%2F1000*rsint*(goal%2F60*2*pi)**2-F1x)%0A%0A%0A%20%20%20%20%20%20%20%20%23%23%20Record%20the%20forces%20for%20plotting%0A%20%20%20%20%20%20%20%20f1.append(F1)%0A%20%20%20%20%20%20%20%20f2.append(F2)%0A%20%20%20%20%20%20%20%20os.append(o)%0A%0A%0A%0A%20%20%20%20%20%20%20%20%23%23%20Idle%20RPM%20%20%20%0A%20%20%20%20%20%20%20%20if%20o%3D%3D0%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20rpm%20%3D%20((f1eng%2F(mfw*3%2F1000*rsint))**0.5)*60%2F(2*pi)%0A%20%20%20%20%20%20%20%20%20%20%20%20rpms.append(rpm)%0A%20%20%20%20%20%20%20%20%20%20%20%20veh_speed.append(0)%0A%0A%20%20%20%20%20%20%20%20rpm%3D((((F2%2BF1x)%2F(mfw*3%2F1000*rsint))**0.5)*60%2F(2*pi))%0A%20%20%20%20%20%20%20%20rpms.append(rpm)%0A%20%20%20%20%20%20%20%20veh_speed.append(rpm%2F(cr*11.3)%2F60*Wcirc*3.6)%0A%0A%0A%20%20%20%20%20%20%20%20%23%20Calculate%20the%20total%20side%20force%20on%20the%20primary%20side%0A%20%20%20%20%20%20%20%20o%3Do%2B0.25%0A%0A%20%20%20%20return%20veh_speed%2C%20rpms%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20return%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">3516b77fc9caac6e2ca9c8e109f2eb24282fa00c00a68d424285cb13e8b20f3d</marimo-code-hash>
</body>
</html>
